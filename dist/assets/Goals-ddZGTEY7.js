import{r as v,j as e,e as w,T as D,P as C,p as k,o as T}from"./index-DaCuWBGK.js";const p=(t,a)=>Math.round(Math.abs((t.getTime()-a.getTime())/864e5)),u=t=>t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),M=({goal:t,spent:a,onEdit:x,onDelete:r})=>{const n=new Date,l=new Date(t.startDate+"T00:00:00"),o=new Date(t.endDate+"T23:59:59"),h=n>o?o:n<l?l:n,N=Math.max(1,p(o,l)),A=p(h,l),m=Math.max(0,p(o,h)),b=t.targetAmount-a,j=m>0?Math.max(0,b/m):0,g=Math.min(a/t.targetAmount*100,100),s=Math.min(A/N*100,100);let c="Dentro do Limite",i="bg-blue-500",d="bg-blue-50 text-blue-700";return a>t.targetAmount?(c="Estourado",i="bg-red-600",d="bg-red-100 text-red-700"):g>s+15&&(c="Gastando Rápido",i="bg-yellow-500",d="bg-yellow-100 text-yellow-800"),e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow relative overflow-hidden group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-blue-50 text-blue-600 rounded-lg shrink-0 aspect-square",children:e.jsx(w,{className:"text-lg"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800 leading-tight text-sm",children:t.name}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wide",children:t.category})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:x,className:"text-gray-400 hover:text-blue-600 p-1.5 rounded-full hover:bg-blue-50",children:e.jsx(k,{className:"text-base"})}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-red-600 p-1.5 rounded-full hover:bg-red-50",children:e.jsx(T,{className:"text-base"})})]})]}),e.jsxs("div",{className:"mb-4 relative",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1 font-medium",children:[e.jsxs("span",{className:"text-gray-600",children:[g.toFixed(0),"% Gasto"]}),e.jsxs("span",{className:`${a>t.targetAmount?"text-red-600":"text-gray-500"}`,children:[u(a)," ",e.jsxs("span",{className:"text-gray-400",children:["/ ",u(t.targetAmount)]})]})]}),e.jsxs("div",{className:"w-full bg-gray-100 rounded-full h-2.5 relative overflow-hidden",children:[e.jsx("div",{className:`h-full rounded-full ${i} transition-all duration-500`,style:{width:`${g}%`}}),a<=t.targetAmount&&e.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-gray-800 opacity-30 z-10",style:{left:`${s}%`},title:"Tempo decorrido"})]})]}),e.jsxs("div",{className:`py-2 px-3 rounded-lg text-xs font-bold flex items-center justify-between ${d}`,children:[e.jsx("span",{children:c}),e.jsxs("span",{className:"text-[10px] opacity-80 font-medium",children:["Diária seg: ",u(j)]})]})]})},$=({goal:t,onEdit:a,onDelete:x})=>{const r=Math.min(t.currentAmount/t.targetAmount*100,100),n=t.targetAmount-t.currentAmount;if(t.deadline){const l=new Date;l.setHours(0,0,0,0);const o=new Date(t.deadline+"T00:00:00");p(o,l)}return e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow relative overflow-hidden group",children:[r>=100&&e.jsx("div",{className:"absolute inset-0 bg-yellow-50/50 z-0 pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-xl shrink-0 aspect-square ${r>=100?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:e.jsx(D,{className:"text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800 text-base",children:t.name}),t.deadline?e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"event"}),new Date(t.deadline+"T00:00:00").toLocaleDateString("pt-BR")]}):e.jsx("p",{className:"text-xs text-gray-400",children:"Sem data limite"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-blue-600 p-1.5 rounded-full hover:bg-blue-50",children:e.jsx(k,{className:"text-base"})}),e.jsx("button",{onClick:x,className:"text-gray-400 hover:text-red-600 p-1.5 rounded-full hover:bg-red-50",children:e.jsx(T,{className:"text-base"})})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-2 mb-2",children:[e.jsx("span",{className:"text-3xl font-extrabold text-gray-800 tracking-tight",children:u(t.currentAmount)}),e.jsxs("span",{className:"text-xs text-gray-500 font-medium bg-gray-100 px-2 py-0.5 rounded-md mt-1",children:["Meta: ",u(t.targetAmount)]})]}),e.jsx("div",{className:"relative h-4 w-full bg-gray-100 rounded-full overflow-hidden shadow-inner mb-2",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${r>=100?"bg-gradient-to-r from-yellow-400 to-orange-500":"bg-gradient-to-r from-green-400 to-emerald-500"}`,style:{width:`${r}%`},children:e.jsx("div",{className:"absolute inset-0 bg-white/20 w-full animate-[shimmer_2s_infinite] skew-x-[-20deg]"})})}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-600 font-medium",children:[e.jsxs("span",{children:[r.toFixed(0),"% Concluído"]}),n>0?e.jsxs("span",{children:["Faltam ",u(n)]}):e.jsxs("span",{className:"text-green-600 font-bold flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"})," Conquistado!"]})]}),n>0&&e.jsxs("button",{onClick:a,className:"w-full mt-4 py-2 bg-green-50 text-green-700 font-bold rounded-xl text-xs hover:bg-green-100 transition-colors flex items-center justify-center gap-1 border border-green-100",children:[e.jsx(C,{className:"text-sm"})," Adicionar Valor"]})]})]})},S=({goals:t,savingsGoals:a,expenses:x,onOpenGoalModal:r,onOpenSavingsModal:n,onEditGoal:l,onEditSavingsGoal:o,onDeleteGoal:h,onDeleteSavingsGoal:N,isLoading:A})=>{const[m,b]=v.useState("budgets"),j=v.useMemo(()=>t.map(s=>{const c=new Date(s.startDate+"T00:00:00"),i=new Date(s.endDate+"T23:59:59"),d=x.filter(f=>{const y=new Date(f.purchaseDate+"T00:00:00");return f.category===s.category&&y>=c&&y<=i}).reduce((f,y)=>f+y.total,0);return{...s,spent:d}}),[t,x]),g=v.useMemo(()=>[...a].sort((s,c)=>{const i=s.currentAmount/s.targetAmount,d=c.currentAmount/c.targetAmount;return i>=1&&d<1?1:i<1&&d>=1?-1:d-i}),[a]);return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Planejamento"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Gerencie limites de gastos e conquiste seus sonhos."})]}),e.jsxs("div",{className:"bg-gray-200/50 p-1 rounded-xl flex font-bold text-sm shadow-inner self-start md:self-auto",children:[e.jsxs("button",{onClick:()=>b("budgets"),className:`px-5 py-2.5 rounded-lg transition-all flex items-center gap-2 ${m==="budgets"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(w,{className:"text-lg"}),"Orçamentos"]}),e.jsxs("button",{onClick:()=>b("savings"),className:`px-5 py-2.5 rounded-lg transition-all flex items-center gap-2 ${m==="savings"?"bg-white text-green-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(D,{className:"text-lg"}),"Metas"]})]})]}),m==="budgets"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-700",children:"Limites de Categoria"}),e.jsxs("button",{onClick:r,className:"text-blue-600 text-sm font-bold flex items-center gap-1 hover:bg-blue-50 px-3 py-1.5 rounded-lg transition-colors",children:[e.jsx(C,{className:"text-lg"})," Novo Orçamento"]})]}),j.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-gray-100 border-dashed",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-3 text-blue-400",children:e.jsx(w,{className:"text-3xl"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhum orçamento definido."}),e.jsx("button",{onClick:r,className:"mt-2 text-blue-600 font-bold text-sm",children:"Criar um agora"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(s=>e.jsx(M,{goal:s,spent:s.spent,onEdit:()=>l(s),onDelete:()=>h(s.id)},s.id))})]}),m==="savings"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-700",children:"Meus Sonhos"}),e.jsxs("button",{onClick:n,className:"text-green-600 text-sm font-bold flex items-center gap-1 hover:bg-green-50 px-3 py-1.5 rounded-lg transition-colors",children:[e.jsx(C,{className:"text-lg"})," Nova Meta"]})]}),a.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-gray-100 border-dashed",children:[e.jsx("div",{className:"w-16 h-16 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-3 text-green-500",children:e.jsx(D,{className:"text-3xl"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Você ainda não tem metas de economia."}),e.jsx("button",{onClick:n,className:"mt-2 text-green-600 font-bold text-sm",children:"Começar a poupar"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(s=>e.jsx($,{goal:s,onEdit:()=>o(s),onDelete:()=>N(s.id)},s.id))})]})]})};export{S as Goals};
//# sourceMappingURL=Goals-ddZGTEY7.js.map
