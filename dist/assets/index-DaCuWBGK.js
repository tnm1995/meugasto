const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CGAQzjcd.js","assets/BarChart-hgWFuMxg.js","assets/Reports-q2ZPoiVB.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var b8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $E={exports:{}},Ed={},zE={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ol=Symbol.for("react.element"),bb=Symbol.for("react.portal"),kb=Symbol.for("react.fragment"),Db=Symbol.for("react.strict_mode"),Mb=Symbol.for("react.profiler"),Vb=Symbol.for("react.provider"),Lb=Symbol.for("react.context"),Fb=Symbol.for("react.forward_ref"),Ub=Symbol.for("react.suspense"),Ob=Symbol.for("react.memo"),qb=Symbol.for("react.lazy"),y0=Symbol.iterator;function Bb(t){return t===null||typeof t!="object"?null:(t=y0&&t[y0]||t["@@iterator"],typeof t=="function"?t:null)}var HE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WE=Object.assign,KE={};function Mo(t,e,n){this.props=t,this.context=e,this.refs=KE,this.updater=n||HE}Mo.prototype.isReactComponent={};Mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function JE(){}JE.prototype=Mo.prototype;function Hm(t,e,n){this.props=t,this.context=e,this.refs=KE,this.updater=n||HE}var Wm=Hm.prototype=new JE;Wm.constructor=Hm;WE(Wm,Mo.prototype);Wm.isPureReactComponent=!0;var v0=Array.isArray,YE=Object.prototype.hasOwnProperty,Km={current:null},QE={key:!0,ref:!0,__self:!0,__source:!0};function XE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)YE.call(e,r)&&!QE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ol,type:t,key:i,ref:o,props:s,_owner:Km.current}}function jb(t,e){return{$$typeof:Ol,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ol}function Gb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _0=/\/+/g;function Ff(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gb(""+t.key):e.toString(36)}function Zu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ol:case bb:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ff(o,0):r,v0(s)?(n="",t!=null&&(n=t.replace(_0,"$&/")+"/"),Zu(s,e,n,"",function(u){return u})):s!=null&&(Jm(s)&&(s=jb(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(_0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",v0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ff(i,a);o+=Zu(i,e,n,l,s)}else if(l=Bb(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ff(i,a++),o+=Zu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Su(t,e,n){if(t==null)return t;var r=[],s=0;return Zu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function $b(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},ec={transition:null},zb={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:ec,ReactCurrentOwner:Km};function ZE(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Su,forEach:function(t,e,n){Su(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Su(t,function(){e++}),e},toArray:function(t){return Su(t,function(e){return e})||[]},only:function(t){if(!Jm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=Mo;he.Fragment=kb;he.Profiler=Mb;he.PureComponent=Hm;he.StrictMode=Db;he.Suspense=Ub;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zb;he.act=ZE;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=WE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Km.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)YE.call(e,l)&&!QE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ol,type:t.type,key:s,ref:i,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:Lb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Vb,_context:t},t.Consumer=t};he.createElement=XE;he.createFactory=function(t){var e=XE.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:Fb,render:t}};he.isValidElement=Jm;he.lazy=function(t){return{$$typeof:qb,_payload:{_status:-1,_result:t},_init:$b}};he.memo=function(t,e){return{$$typeof:Ob,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=ec.transition;ec.transition={};try{t()}finally{ec.transition=e}};he.unstable_act=ZE;he.useCallback=function(t,e){return Ft.current.useCallback(t,e)};he.useContext=function(t){return Ft.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};he.useEffect=function(t,e){return Ft.current.useEffect(t,e)};he.useId=function(){return Ft.current.useId()};he.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Ft.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};he.useRef=function(t){return Ft.current.useRef(t)};he.useState=function(t){return Ft.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Ft.current.useTransition()};he.version="18.3.1";zE.exports=he;var M=zE.exports;const eI=GE(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb=M,Wb=Symbol.for("react.element"),Kb=Symbol.for("react.fragment"),Jb=Object.prototype.hasOwnProperty,Yb=Hb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qb={key:!0,ref:!0,__self:!0,__source:!0};function tI(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Jb.call(e,r)&&!Qb.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Wb,type:t,key:i,ref:o,props:s,_owner:Yb.current}}Ed.Fragment=Kb;Ed.jsx=tI;Ed.jsxs=tI;$E.exports=Ed;var p=$E.exports,Hh={},nI={exports:{}},ln={},rI={exports:{}},sI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,z){var B=O.length;O.push(z);e:for(;0<B;){var Y=B-1>>>1,ee=O[Y];if(0<s(ee,z))O[Y]=z,O[B]=ee,B=Y;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var z=O[0],B=O.pop();if(B!==z){O[0]=B;e:for(var Y=0,ee=O.length,re=ee>>>1;Y<re;){var fe=2*(Y+1)-1,je=O[fe],Ge=fe+1,ve=O[Ge];if(0>s(je,B))Ge<ee&&0>s(ve,je)?(O[Y]=ve,O[Ge]=B,Y=Ge):(O[Y]=je,O[fe]=B,Y=fe);else if(Ge<ee&&0>s(ve,B))O[Y]=ve,O[Ge]=B,Y=Ge;else break e}}return z}function s(O,z){var B=O.sortIndex-z.sortIndex;return B!==0?B:O.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,m=null,g=3,v=!1,w=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=O)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function V(O){if(C=!1,S(O),!w)if(n(l)!==null)w=!0,te(L);else{var z=n(u);z!==null&&W(V,z.startTime-O)}}function L(O,z){w=!1,C&&(C=!1,E(T),T=-1),v=!0;var B=g;try{for(S(z),m=n(l);m!==null&&(!(m.expirationTime>z)||O&&!k());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,g=m.priorityLevel;var ee=Y(m.expirationTime<=z);z=t.unstable_now(),typeof ee=="function"?m.callback=ee:m===n(l)&&r(l),S(z)}else r(l);m=n(l)}if(m!==null)var re=!0;else{var fe=n(u);fe!==null&&W(V,fe.startTime-z),re=!1}return re}finally{m=null,g=B,v=!1}}var F=!1,I=null,T=-1,A=5,P=-1;function k(){return!(t.unstable_now()-P<A)}function D(){if(I!==null){var O=t.unstable_now();P=O;var z=!0;try{z=I(!0,O)}finally{z?b():(F=!1,I=null)}}else F=!1}var b;if(typeof x=="function")b=function(){x(D)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Me=Ie.port2;Ie.port1.onmessage=D,b=function(){Me.postMessage(null)}}else b=function(){R(D,0)};function te(O){I=O,F||(F=!0,b())}function W(O,z){T=R(function(){O(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){w||v||(w=!0,te(L))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(g){case 1:case 2:case 3:var z=3;break;default:z=g}var B=g;g=z;try{return O()}finally{g=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,z){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var B=g;g=O;try{return z()}finally{g=B}},t.unstable_scheduleCallback=function(O,z,B){var Y=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Y+B:Y):B=Y,O){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=B+ee,O={id:d++,callback:z,priorityLevel:O,startTime:B,expirationTime:ee,sortIndex:-1},B>Y?(O.sortIndex=B,e(u,O),n(l)===null&&O===n(u)&&(C?(E(T),T=-1):C=!0,W(V,B-Y))):(O.sortIndex=ee,e(l,O),w||v||(w=!0,te(L))),O},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(O){var z=g;return function(){var B=g;g=z;try{return O.apply(this,arguments)}finally{g=B}}}})(sI);rI.exports=sI;var Xb=rI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb=M,an=Xb;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iI=new Set,il={};function hi(t,e){ho(t,e),ho(t+"Capture",e)}function ho(t,e){for(il[t]=e,t=0;t<e.length;t++)iI.add(e[t])}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wh=Object.prototype.hasOwnProperty,ek=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x0={},w0={};function tk(t){return Wh.call(w0,t)?!0:Wh.call(x0,t)?!1:ek.test(t)?w0[t]=!0:(x0[t]=!0,!1)}function nk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rk(t,e,n,r){if(e===null||typeof e>"u"||nk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ym=/[\-:]([a-z])/g;function Qm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ym,Qm);yt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ym,Qm);yt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ym,Qm);yt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xm(t,e,n,r){var s=yt.hasOwnProperty(e)?yt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rk(e,n,s,r)&&(n=null),r||s===null?tk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mr=Zb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cu=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Mi=Symbol.for("react.fragment"),Zm=Symbol.for("react.strict_mode"),Kh=Symbol.for("react.profiler"),oI=Symbol.for("react.provider"),aI=Symbol.for("react.context"),eg=Symbol.for("react.forward_ref"),Jh=Symbol.for("react.suspense"),Yh=Symbol.for("react.suspense_list"),tg=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),lI=Symbol.for("react.offscreen"),T0=Symbol.iterator;function da(t){return t===null||typeof t!="object"?null:(t=T0&&t[T0]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,Uf;function Ea(t){if(Uf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uf=e&&e[1]||""}return`
`+Uf+t}var Of=!1;function qf(t,e){if(!t||Of)return"";Of=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Of=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ea(t):""}function sk(t){switch(t.tag){case 5:return Ea(t.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 2:case 15:return t=qf(t.type,!1),t;case 11:return t=qf(t.type.render,!1),t;case 1:return t=qf(t.type,!0),t;default:return""}}function Qh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mi:return"Fragment";case Di:return"Portal";case Kh:return"Profiler";case Zm:return"StrictMode";case Jh:return"Suspense";case Yh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case aI:return(t.displayName||"Context")+".Consumer";case oI:return(t._context.displayName||"Context")+".Provider";case eg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tg:return e=t.displayName||null,e!==null?e:Qh(t.type)||"Memo";case Hr:e=t._payload,t=t._init;try{return Qh(t(e))}catch{}}return null}function ik(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qh(e);case 8:return e===Zm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ok(t){var e=uI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Au(t){t._valueTracker||(t._valueTracker=ok(t))}function cI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xh(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function E0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dI(t,e){e=e.checked,e!=null&&Xm(t,"checked",e,!1)}function Zh(t,e){dI(t,e);var n=hs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ep(t,e.type,n):e.hasOwnProperty("defaultValue")&&ep(t,e.type,hs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function I0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ep(t,e,n){(e!=="number"||Cc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ia=Array.isArray;function Xi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function S0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Ia(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hs(n)}}function fI(t,e){var n=hs(e.value),r=hs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function C0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function np(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nu,pI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nu=Nu||document.createElement("div"),Nu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ol(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var La={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ak=["Webkit","ms","Moz","O"];Object.keys(La).forEach(function(t){ak.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),La[e]=La[t]})});function mI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||La.hasOwnProperty(t)&&La[t]?(""+e).trim():e+"px"}function gI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=mI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var lk=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rp(t,e){if(e){if(lk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function sp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ip=null;function ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var op=null,Zi=null,eo=null;function A0(t){if(t=jl(t)){if(typeof op!="function")throw Error($(280));var e=t.stateNode;e&&(e=Nd(e),op(t.stateNode,t.type,e))}}function yI(t){Zi?eo?eo.push(t):eo=[t]:Zi=t}function vI(){if(Zi){var t=Zi,e=eo;if(eo=Zi=null,A0(t),e)for(t=0;t<e.length;t++)A0(e[t])}}function _I(t,e){return t(e)}function xI(){}var Bf=!1;function wI(t,e,n){if(Bf)return t(e,n);Bf=!0;try{return _I(t,e,n)}finally{Bf=!1,(Zi!==null||eo!==null)&&(xI(),vI())}}function al(t,e){var n=t.stateNode;if(n===null)return null;var r=Nd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ap=!1;if(Er)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){ap=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{ap=!1}function uk(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Fa=!1,Ac=null,Nc=!1,lp=null,ck={onError:function(t){Fa=!0,Ac=t}};function dk(t,e,n,r,s,i,o,a,l){Fa=!1,Ac=null,uk.apply(ck,arguments)}function fk(t,e,n,r,s,i,o,a,l){if(dk.apply(this,arguments),Fa){if(Fa){var u=Ac;Fa=!1,Ac=null}else throw Error($(198));Nc||(Nc=!0,lp=u)}}function pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function N0(t){if(pi(t)!==t)throw Error($(188))}function hk(t){var e=t.alternate;if(!e){if(e=pi(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return N0(s),t;if(i===r)return N0(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function EI(t){return t=hk(t),t!==null?II(t):null}function II(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=II(t);if(e!==null)return e;t=t.sibling}return null}var SI=an.unstable_scheduleCallback,P0=an.unstable_cancelCallback,pk=an.unstable_shouldYield,mk=an.unstable_requestPaint,Ke=an.unstable_now,gk=an.unstable_getCurrentPriorityLevel,rg=an.unstable_ImmediatePriority,CI=an.unstable_UserBlockingPriority,Pc=an.unstable_NormalPriority,yk=an.unstable_LowPriority,AI=an.unstable_IdlePriority,Id=null,Qn=null;function vk(t){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(Id,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:wk,_k=Math.log,xk=Math.LN2;function wk(t){return t>>>=0,t===0?32:31-(_k(t)/xk|0)|0}var Pu=64,Ru=4194304;function Sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Sa(a):(i&=o,i!==0&&(r=Sa(i)))}else o=n&~s,o!==0?r=Sa(o):i!==0&&(r=Sa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ln(e),s=1<<n,r|=t[n],e&=~s;return r}function Tk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ek(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ln(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=Tk(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function up(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function NI(){var t=Pu;return Pu<<=1,!(Pu&4194240)&&(Pu=64),t}function jf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ql(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function Ik(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ln(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function sg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ln(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ee=0;function PI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var RI,ig,bI,kI,DI,cp=!1,bu=[],ns=null,rs=null,ss=null,ll=new Map,ul=new Map,Kr=[],Sk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R0(t,e){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":ll.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ul.delete(e.pointerId)}}function ha(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=jl(e),e!==null&&ig(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ck(t,e,n,r,s){switch(e){case"focusin":return ns=ha(ns,t,e,n,r,s),!0;case"dragenter":return rs=ha(rs,t,e,n,r,s),!0;case"mouseover":return ss=ha(ss,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ll.set(i,ha(ll.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ul.set(i,ha(ul.get(i)||null,t,e,n,r,s)),!0}return!1}function MI(t){var e=js(t.target);if(e!==null){var n=pi(e);if(n!==null){if(e=n.tag,e===13){if(e=TI(n),e!==null){t.blockedOn=e,DI(t.priority,function(){bI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ip=r,n.target.dispatchEvent(r),ip=null}else return e=jl(n),e!==null&&ig(e),t.blockedOn=n,!1;e.shift()}return!0}function b0(t,e,n){tc(t)&&n.delete(e)}function Ak(){cp=!1,ns!==null&&tc(ns)&&(ns=null),rs!==null&&tc(rs)&&(rs=null),ss!==null&&tc(ss)&&(ss=null),ll.forEach(b0),ul.forEach(b0)}function pa(t,e){t.blockedOn===e&&(t.blockedOn=null,cp||(cp=!0,an.unstable_scheduleCallback(an.unstable_NormalPriority,Ak)))}function cl(t){function e(s){return pa(s,t)}if(0<bu.length){pa(bu[0],t);for(var n=1;n<bu.length;n++){var r=bu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ns!==null&&pa(ns,t),rs!==null&&pa(rs,t),ss!==null&&pa(ss,t),ll.forEach(e),ul.forEach(e),n=0;n<Kr.length;n++)r=Kr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kr.length&&(n=Kr[0],n.blockedOn===null);)MI(n),n.blockedOn===null&&Kr.shift()}var to=Mr.ReactCurrentBatchConfig,bc=!0;function Nk(t,e,n,r){var s=Ee,i=to.transition;to.transition=null;try{Ee=1,og(t,e,n,r)}finally{Ee=s,to.transition=i}}function Pk(t,e,n,r){var s=Ee,i=to.transition;to.transition=null;try{Ee=4,og(t,e,n,r)}finally{Ee=s,to.transition=i}}function og(t,e,n,r){if(bc){var s=dp(t,e,n,r);if(s===null)Xf(t,e,r,kc,n),R0(t,r);else if(Ck(s,t,e,n,r))r.stopPropagation();else if(R0(t,r),e&4&&-1<Sk.indexOf(t)){for(;s!==null;){var i=jl(s);if(i!==null&&RI(i),i=dp(t,e,n,r),i===null&&Xf(t,e,r,kc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xf(t,e,r,null,n)}}var kc=null;function dp(t,e,n,r){if(kc=null,t=ng(r),t=js(t),t!==null)if(e=pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kc=t,null}function VI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gk()){case rg:return 1;case CI:return 4;case Pc:case yk:return 16;case AI:return 536870912;default:return 16}default:return 16}}var Zr=null,ag=null,nc=null;function LI(){if(nc)return nc;var t,e=ag,n=e.length,r,s="value"in Zr?Zr.value:Zr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return nc=s.slice(t,1<r?1-r:void 0)}function rc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ku(){return!0}function k0(){return!1}function un(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ku:k0,this.isPropagationStopped=k0,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ku)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ku)},persist:function(){},isPersistent:ku}),e}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lg=un(Vo),Bl=qe({},Vo,{view:0,detail:0}),Rk=un(Bl),Gf,$f,ma,Sd=qe({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ug,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(Gf=t.screenX-ma.screenX,$f=t.screenY-ma.screenY):$f=Gf=0,ma=t),Gf)},movementY:function(t){return"movementY"in t?t.movementY:$f}}),D0=un(Sd),bk=qe({},Sd,{dataTransfer:0}),kk=un(bk),Dk=qe({},Bl,{relatedTarget:0}),zf=un(Dk),Mk=qe({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),Vk=un(Mk),Lk=qe({},Vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fk=un(Lk),Uk=qe({},Vo,{data:0}),M0=un(Uk),Ok={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bk[t])?!!e[t]:!1}function ug(){return jk}var Gk=qe({},Bl,{key:function(t){if(t.key){var e=Ok[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ug,charCode:function(t){return t.type==="keypress"?rc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$k=un(Gk),zk=qe({},Sd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V0=un(zk),Hk=qe({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ug}),Wk=un(Hk),Kk=qe({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jk=un(Kk),Yk=qe({},Sd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qk=un(Yk),Xk=[9,13,27,32],cg=Er&&"CompositionEvent"in window,Ua=null;Er&&"documentMode"in document&&(Ua=document.documentMode);var Zk=Er&&"TextEvent"in window&&!Ua,FI=Er&&(!cg||Ua&&8<Ua&&11>=Ua),L0=" ",F0=!1;function UI(t,e){switch(t){case"keyup":return Xk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vi=!1;function e1(t,e){switch(t){case"compositionend":return OI(e);case"keypress":return e.which!==32?null:(F0=!0,L0);case"textInput":return t=e.data,t===L0&&F0?null:t;default:return null}}function t1(t,e){if(Vi)return t==="compositionend"||!cg&&UI(t,e)?(t=LI(),nc=ag=Zr=null,Vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return FI&&e.locale!=="ko"?null:e.data;default:return null}}var n1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!n1[t.type]:e==="textarea"}function qI(t,e,n,r){yI(r),e=Dc(e,"onChange"),0<e.length&&(n=new lg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oa=null,dl=null;function r1(t){QI(t,0)}function Cd(t){var e=Ui(t);if(cI(e))return t}function s1(t,e){if(t==="change")return e}var BI=!1;if(Er){var Hf;if(Er){var Wf="oninput"in document;if(!Wf){var O0=document.createElement("div");O0.setAttribute("oninput","return;"),Wf=typeof O0.oninput=="function"}Hf=Wf}else Hf=!1;BI=Hf&&(!document.documentMode||9<document.documentMode)}function q0(){Oa&&(Oa.detachEvent("onpropertychange",jI),dl=Oa=null)}function jI(t){if(t.propertyName==="value"&&Cd(dl)){var e=[];qI(e,dl,t,ng(t)),wI(r1,e)}}function i1(t,e,n){t==="focusin"?(q0(),Oa=e,dl=n,Oa.attachEvent("onpropertychange",jI)):t==="focusout"&&q0()}function o1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cd(dl)}function a1(t,e){if(t==="click")return Cd(e)}function l1(t,e){if(t==="input"||t==="change")return Cd(e)}function u1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:u1;function fl(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Wh.call(e,s)||!Un(t[s],e[s]))return!1}return!0}function B0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j0(t,e){var n=B0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B0(n)}}function GI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?GI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $I(){for(var t=window,e=Cc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cc(t.document)}return e}function dg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function c1(t){var e=$I(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&GI(n.ownerDocument.documentElement,n)){if(r!==null&&dg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=j0(n,i);var o=j0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var d1=Er&&"documentMode"in document&&11>=document.documentMode,Li=null,fp=null,qa=null,hp=!1;function G0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hp||Li==null||Li!==Cc(r)||(r=Li,"selectionStart"in r&&dg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qa&&fl(qa,r)||(qa=r,r=Dc(fp,"onSelect"),0<r.length&&(e=new lg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Li)))}function Du(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fi={animationend:Du("Animation","AnimationEnd"),animationiteration:Du("Animation","AnimationIteration"),animationstart:Du("Animation","AnimationStart"),transitionend:Du("Transition","TransitionEnd")},Kf={},zI={};Er&&(zI=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);function Ad(t){if(Kf[t])return Kf[t];if(!Fi[t])return t;var e=Fi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zI)return Kf[t]=e[n];return t}var HI=Ad("animationend"),WI=Ad("animationiteration"),KI=Ad("animationstart"),JI=Ad("transitionend"),YI=new Map,$0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(t,e){YI.set(t,e),hi(e,[t])}for(var Jf=0;Jf<$0.length;Jf++){var Yf=$0[Jf],f1=Yf.toLowerCase(),h1=Yf[0].toUpperCase()+Yf.slice(1);xs(f1,"on"+h1)}xs(HI,"onAnimationEnd");xs(WI,"onAnimationIteration");xs(KI,"onAnimationStart");xs("dblclick","onDoubleClick");xs("focusin","onFocus");xs("focusout","onBlur");xs(JI,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function z0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fk(r,e,void 0,t),t.currentTarget=null}function QI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;z0(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;z0(s,a,u),i=l}}}if(Nc)throw t=lp,Nc=!1,lp=null,t}function Pe(t,e){var n=e[vp];n===void 0&&(n=e[vp]=new Set);var r=t+"__bubble";n.has(r)||(XI(e,t,2,!1),n.add(r))}function Qf(t,e,n){var r=0;e&&(r|=4),XI(n,t,r,e)}var Mu="_reactListening"+Math.random().toString(36).slice(2);function hl(t){if(!t[Mu]){t[Mu]=!0,iI.forEach(function(n){n!=="selectionchange"&&(p1.has(n)||Qf(n,!1,t),Qf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mu]||(e[Mu]=!0,Qf("selectionchange",!1,e))}}function XI(t,e,n,r){switch(VI(e)){case 1:var s=Nk;break;case 4:s=Pk;break;default:s=og}n=s.bind(null,e,n,t),s=void 0,!ap||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=js(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}wI(function(){var u=i,d=ng(n),m=[];e:{var g=YI.get(t);if(g!==void 0){var v=lg,w=t;switch(t){case"keypress":if(rc(n)===0)break e;case"keydown":case"keyup":v=$k;break;case"focusin":w="focus",v=zf;break;case"focusout":w="blur",v=zf;break;case"beforeblur":case"afterblur":v=zf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=D0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=kk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Wk;break;case HI:case WI:case KI:v=Vk;break;case JI:v=Jk;break;case"scroll":v=Rk;break;case"wheel":v=Qk;break;case"copy":case"cut":case"paste":v=Fk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=V0}var C=(e&4)!==0,R=!C&&t==="scroll",E=C?g!==null?g+"Capture":null:g;C=[];for(var x=u,S;x!==null;){S=x;var V=S.stateNode;if(S.tag===5&&V!==null&&(S=V,E!==null&&(V=al(x,E),V!=null&&C.push(pl(x,V,S)))),R)break;x=x.return}0<C.length&&(g=new v(g,w,null,n,d),m.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==ip&&(w=n.relatedTarget||n.fromElement)&&(js(w)||w[Ir]))break e;if((v||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=u,w=w?js(w):null,w!==null&&(R=pi(w),w!==R||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=u),v!==w)){if(C=D0,V="onMouseLeave",E="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(C=V0,V="onPointerLeave",E="onPointerEnter",x="pointer"),R=v==null?g:Ui(v),S=w==null?g:Ui(w),g=new C(V,x+"leave",v,n,d),g.target=R,g.relatedTarget=S,V=null,js(d)===u&&(C=new C(E,x+"enter",w,n,d),C.target=S,C.relatedTarget=R,V=C),R=V,v&&w)t:{for(C=v,E=w,x=0,S=C;S;S=Ni(S))x++;for(S=0,V=E;V;V=Ni(V))S++;for(;0<x-S;)C=Ni(C),x--;for(;0<S-x;)E=Ni(E),S--;for(;x--;){if(C===E||E!==null&&C===E.alternate)break t;C=Ni(C),E=Ni(E)}C=null}else C=null;v!==null&&H0(m,g,v,C,!1),w!==null&&R!==null&&H0(m,R,w,C,!0)}}e:{if(g=u?Ui(u):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var L=s1;else if(U0(g))if(BI)L=l1;else{L=o1;var F=i1}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=a1);if(L&&(L=L(t,u))){qI(m,L,n,d);break e}F&&F(t,g,u),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&ep(g,"number",g.value)}switch(F=u?Ui(u):window,t){case"focusin":(U0(F)||F.contentEditable==="true")&&(Li=F,fp=u,qa=null);break;case"focusout":qa=fp=Li=null;break;case"mousedown":hp=!0;break;case"contextmenu":case"mouseup":case"dragend":hp=!1,G0(m,n,d);break;case"selectionchange":if(d1)break;case"keydown":case"keyup":G0(m,n,d)}var I;if(cg)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Vi?UI(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(FI&&n.locale!=="ko"&&(Vi||T!=="onCompositionStart"?T==="onCompositionEnd"&&Vi&&(I=LI()):(Zr=d,ag="value"in Zr?Zr.value:Zr.textContent,Vi=!0)),F=Dc(u,T),0<F.length&&(T=new M0(T,t,null,n,d),m.push({event:T,listeners:F}),I?T.data=I:(I=OI(n),I!==null&&(T.data=I)))),(I=Zk?e1(t,n):t1(t,n))&&(u=Dc(u,"onBeforeInput"),0<u.length&&(d=new M0("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:u}),d.data=I))}QI(m,e)})}function pl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=al(t,n),i!=null&&r.unshift(pl(t,i,s)),i=al(t,e),i!=null&&r.push(pl(t,i,s))),t=t.return}return r}function Ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function H0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=al(n,i),l!=null&&o.unshift(pl(n,l,a))):s||(l=al(n,i),l!=null&&o.push(pl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var m1=/\r\n?/g,g1=/\u0000|\uFFFD/g;function W0(t){return(typeof t=="string"?t:""+t).replace(m1,`
`).replace(g1,"")}function Vu(t,e,n){if(e=W0(e),W0(t)!==e&&n)throw Error($(425))}function Mc(){}var pp=null,mp=null;function gp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yp=typeof setTimeout=="function"?setTimeout:void 0,y1=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,v1=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(t){return K0.resolve(null).then(t).catch(_1)}:yp;function _1(t){setTimeout(function(){throw t})}function Zf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);cl(e)}function is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function J0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Lo=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Lo,ml="__reactProps$"+Lo,Ir="__reactContainer$"+Lo,vp="__reactEvents$"+Lo,x1="__reactListeners$"+Lo,w1="__reactHandles$"+Lo;function js(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ir]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=J0(t);t!==null;){if(n=t[Jn])return n;t=J0(t)}return e}t=n,n=t.parentNode}return null}function jl(t){return t=t[Jn]||t[Ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ui(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Nd(t){return t[ml]||null}var _p=[],Oi=-1;function ws(t){return{current:t}}function De(t){0>Oi||(t.current=_p[Oi],_p[Oi]=null,Oi--)}function Ce(t,e){Oi++,_p[Oi]=t.current,t.current=e}var ps={},Rt=ws(ps),Wt=ws(!1),ei=ps;function po(t,e){var n=t.type.contextTypes;if(!n)return ps;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Kt(t){return t=t.childContextTypes,t!=null}function Vc(){De(Wt),De(Rt)}function Y0(t,e,n){if(Rt.current!==ps)throw Error($(168));Ce(Rt,e),Ce(Wt,n)}function ZI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,ik(t)||"Unknown",s));return qe({},n,r)}function Lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ps,ei=Rt.current,Ce(Rt,t),Ce(Wt,Wt.current),!0}function Q0(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=ZI(t,e,ei),r.__reactInternalMemoizedMergedChildContext=t,De(Wt),De(Rt),Ce(Rt,t)):De(Wt),Ce(Wt,n)}var hr=null,Pd=!1,eh=!1;function eS(t){hr===null?hr=[t]:hr.push(t)}function T1(t){Pd=!0,eS(t)}function Ts(){if(!eh&&hr!==null){eh=!0;var t=0,e=Ee;try{var n=hr;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hr=null,Pd=!1}catch(s){throw hr!==null&&(hr=hr.slice(t+1)),SI(rg,Ts),s}finally{Ee=e,eh=!1}}return null}var qi=[],Bi=0,Fc=null,Uc=0,hn=[],pn=0,ti=null,mr=1,gr="";function Us(t,e){qi[Bi++]=Uc,qi[Bi++]=Fc,Fc=t,Uc=e}function tS(t,e,n){hn[pn++]=mr,hn[pn++]=gr,hn[pn++]=ti,ti=t;var r=mr;t=gr;var s=32-Ln(r)-1;r&=~(1<<s),n+=1;var i=32-Ln(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,mr=1<<32-Ln(e)+s|n<<s|r,gr=i+t}else mr=1<<i|n<<s|r,gr=t}function fg(t){t.return!==null&&(Us(t,1),tS(t,1,0))}function hg(t){for(;t===Fc;)Fc=qi[--Bi],qi[Bi]=null,Uc=qi[--Bi],qi[Bi]=null;for(;t===ti;)ti=hn[--pn],hn[pn]=null,gr=hn[--pn],hn[pn]=null,mr=hn[--pn],hn[pn]=null}var sn=null,nn=null,Ve=!1,Vn=null;function nS(t,e){var n=gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function X0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sn=t,nn=is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sn=t,nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ti!==null?{id:mr,overflow:gr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,sn=t,nn=null,!0):!1;default:return!1}}function xp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wp(t){if(Ve){var e=nn;if(e){var n=e;if(!X0(t,e)){if(xp(t))throw Error($(418));e=is(n.nextSibling);var r=sn;e&&X0(t,e)?nS(r,n):(t.flags=t.flags&-4097|2,Ve=!1,sn=t)}}else{if(xp(t))throw Error($(418));t.flags=t.flags&-4097|2,Ve=!1,sn=t}}}function Z0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sn=t}function Lu(t){if(t!==sn)return!1;if(!Ve)return Z0(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gp(t.type,t.memoizedProps)),e&&(e=nn)){if(xp(t))throw rS(),Error($(418));for(;e;)nS(t,e),e=is(e.nextSibling)}if(Z0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nn=is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nn=null}}else nn=sn?is(t.stateNode.nextSibling):null;return!0}function rS(){for(var t=nn;t;)t=is(t.nextSibling)}function mo(){nn=sn=null,Ve=!1}function pg(t){Vn===null?Vn=[t]:Vn.push(t)}var E1=Mr.ReactCurrentBatchConfig;function ga(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Fu(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function e_(t){var e=t._init;return e(t._payload)}function sS(t){function e(E,x){if(t){var S=E.deletions;S===null?(E.deletions=[x],E.flags|=16):S.push(x)}}function n(E,x){if(!t)return null;for(;x!==null;)e(E,x),x=x.sibling;return null}function r(E,x){for(E=new Map;x!==null;)x.key!==null?E.set(x.key,x):E.set(x.index,x),x=x.sibling;return E}function s(E,x){return E=us(E,x),E.index=0,E.sibling=null,E}function i(E,x,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<x?(E.flags|=2,x):S):(E.flags|=2,x)):(E.flags|=1048576,x)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,x,S,V){return x===null||x.tag!==6?(x=ah(S,E.mode,V),x.return=E,x):(x=s(x,S),x.return=E,x)}function l(E,x,S,V){var L=S.type;return L===Mi?d(E,x,S.props.children,V,S.key):x!==null&&(x.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Hr&&e_(L)===x.type)?(V=s(x,S.props),V.ref=ga(E,x,S),V.return=E,V):(V=cc(S.type,S.key,S.props,null,E.mode,V),V.ref=ga(E,x,S),V.return=E,V)}function u(E,x,S,V){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=lh(S,E.mode,V),x.return=E,x):(x=s(x,S.children||[]),x.return=E,x)}function d(E,x,S,V,L){return x===null||x.tag!==7?(x=Ys(S,E.mode,V,L),x.return=E,x):(x=s(x,S),x.return=E,x)}function m(E,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=ah(""+x,E.mode,S),x.return=E,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Cu:return S=cc(x.type,x.key,x.props,null,E.mode,S),S.ref=ga(E,null,x),S.return=E,S;case Di:return x=lh(x,E.mode,S),x.return=E,x;case Hr:var V=x._init;return m(E,V(x._payload),S)}if(Ia(x)||da(x))return x=Ys(x,E.mode,S,null),x.return=E,x;Fu(E,x)}return null}function g(E,x,S,V){var L=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:a(E,x,""+S,V);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Cu:return S.key===L?l(E,x,S,V):null;case Di:return S.key===L?u(E,x,S,V):null;case Hr:return L=S._init,g(E,x,L(S._payload),V)}if(Ia(S)||da(S))return L!==null?null:d(E,x,S,V,null);Fu(E,S)}return null}function v(E,x,S,V,L){if(typeof V=="string"&&V!==""||typeof V=="number")return E=E.get(S)||null,a(x,E,""+V,L);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Cu:return E=E.get(V.key===null?S:V.key)||null,l(x,E,V,L);case Di:return E=E.get(V.key===null?S:V.key)||null,u(x,E,V,L);case Hr:var F=V._init;return v(E,x,S,F(V._payload),L)}if(Ia(V)||da(V))return E=E.get(S)||null,d(x,E,V,L,null);Fu(x,V)}return null}function w(E,x,S,V){for(var L=null,F=null,I=x,T=x=0,A=null;I!==null&&T<S.length;T++){I.index>T?(A=I,I=null):A=I.sibling;var P=g(E,I,S[T],V);if(P===null){I===null&&(I=A);break}t&&I&&P.alternate===null&&e(E,I),x=i(P,x,T),F===null?L=P:F.sibling=P,F=P,I=A}if(T===S.length)return n(E,I),Ve&&Us(E,T),L;if(I===null){for(;T<S.length;T++)I=m(E,S[T],V),I!==null&&(x=i(I,x,T),F===null?L=I:F.sibling=I,F=I);return Ve&&Us(E,T),L}for(I=r(E,I);T<S.length;T++)A=v(I,E,T,S[T],V),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?T:A.key),x=i(A,x,T),F===null?L=A:F.sibling=A,F=A);return t&&I.forEach(function(k){return e(E,k)}),Ve&&Us(E,T),L}function C(E,x,S,V){var L=da(S);if(typeof L!="function")throw Error($(150));if(S=L.call(S),S==null)throw Error($(151));for(var F=L=null,I=x,T=x=0,A=null,P=S.next();I!==null&&!P.done;T++,P=S.next()){I.index>T?(A=I,I=null):A=I.sibling;var k=g(E,I,P.value,V);if(k===null){I===null&&(I=A);break}t&&I&&k.alternate===null&&e(E,I),x=i(k,x,T),F===null?L=k:F.sibling=k,F=k,I=A}if(P.done)return n(E,I),Ve&&Us(E,T),L;if(I===null){for(;!P.done;T++,P=S.next())P=m(E,P.value,V),P!==null&&(x=i(P,x,T),F===null?L=P:F.sibling=P,F=P);return Ve&&Us(E,T),L}for(I=r(E,I);!P.done;T++,P=S.next())P=v(I,E,T,P.value,V),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?T:P.key),x=i(P,x,T),F===null?L=P:F.sibling=P,F=P);return t&&I.forEach(function(D){return e(E,D)}),Ve&&Us(E,T),L}function R(E,x,S,V){if(typeof S=="object"&&S!==null&&S.type===Mi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Cu:e:{for(var L=S.key,F=x;F!==null;){if(F.key===L){if(L=S.type,L===Mi){if(F.tag===7){n(E,F.sibling),x=s(F,S.props.children),x.return=E,E=x;break e}}else if(F.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Hr&&e_(L)===F.type){n(E,F.sibling),x=s(F,S.props),x.ref=ga(E,F,S),x.return=E,E=x;break e}n(E,F);break}else e(E,F);F=F.sibling}S.type===Mi?(x=Ys(S.props.children,E.mode,V,S.key),x.return=E,E=x):(V=cc(S.type,S.key,S.props,null,E.mode,V),V.ref=ga(E,x,S),V.return=E,E=V)}return o(E);case Di:e:{for(F=S.key;x!==null;){if(x.key===F)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(E,x.sibling),x=s(x,S.children||[]),x.return=E,E=x;break e}else{n(E,x);break}else e(E,x);x=x.sibling}x=lh(S,E.mode,V),x.return=E,E=x}return o(E);case Hr:return F=S._init,R(E,x,F(S._payload),V)}if(Ia(S))return w(E,x,S,V);if(da(S))return C(E,x,S,V);Fu(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(E,x.sibling),x=s(x,S),x.return=E,E=x):(n(E,x),x=ah(S,E.mode,V),x.return=E,E=x),o(E)):n(E,x)}return R}var go=sS(!0),iS=sS(!1),Oc=ws(null),qc=null,ji=null,mg=null;function gg(){mg=ji=qc=null}function yg(t){var e=Oc.current;De(Oc),t._currentValue=e}function Tp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function no(t,e){qc=t,mg=ji=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gt=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(mg!==t)if(t={context:t,memoizedValue:e,next:null},ji===null){if(qc===null)throw Error($(308));ji=t,qc.dependencies={lanes:0,firstContext:t}}else ji=ji.next=t;return e}var Gs=null;function vg(t){Gs===null?Gs=[t]:Gs.push(t)}function oS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Sr(t,r)}function Sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wr=!1;function _g(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function os(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Sr(t,n)}return s=r.interleaved,s===null?(e.next=e,vg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Sr(t,n)}function sc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sg(t,n)}}function t_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bc(t,e,n,r){var s=t.updateQueue;Wr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var m=s.baseState;o=0,d=u=l=null,a=i;do{var g=a.lane,v=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,C=a;switch(g=e,v=n,C.tag){case 1:if(w=C.payload,typeof w=="function"){m=w.call(v,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=C.payload,g=typeof w=="function"?w.call(v,m,g):w,g==null)break e;m=qe({},m,g);break e;case 2:Wr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=v,l=m):d=d.next=v,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(l=m),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ri|=o,t.lanes=o,t.memoizedState=m}}function n_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Gl={},Xn=ws(Gl),gl=ws(Gl),yl=ws(Gl);function $s(t){if(t===Gl)throw Error($(174));return t}function xg(t,e){switch(Ce(yl,e),Ce(gl,t),Ce(Xn,Gl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:np(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=np(e,t)}De(Xn),Ce(Xn,e)}function yo(){De(Xn),De(gl),De(yl)}function lS(t){$s(yl.current);var e=$s(Xn.current),n=np(e,t.type);e!==n&&(Ce(gl,t),Ce(Xn,n))}function wg(t){gl.current===t&&(De(Xn),De(gl))}var Fe=ws(0);function jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var th=[];function Tg(){for(var t=0;t<th.length;t++)th[t]._workInProgressVersionPrimary=null;th.length=0}var ic=Mr.ReactCurrentDispatcher,nh=Mr.ReactCurrentBatchConfig,ni=0,Oe=null,rt=null,at=null,Gc=!1,Ba=!1,vl=0,I1=0;function wt(){throw Error($(321))}function Eg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function Ig(t,e,n,r,s,i){if(ni=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ic.current=t===null||t.memoizedState===null?N1:P1,t=n(r,s),Ba){i=0;do{if(Ba=!1,vl=0,25<=i)throw Error($(301));i+=1,at=rt=null,e.updateQueue=null,ic.current=R1,t=n(r,s)}while(Ba)}if(ic.current=$c,e=rt!==null&&rt.next!==null,ni=0,at=rt=Oe=null,Gc=!1,e)throw Error($(300));return t}function Sg(){var t=vl!==0;return vl=0,t}function Kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Oe.memoizedState=at=t:at=at.next=t,at}function In(){if(rt===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var e=at===null?Oe.memoizedState:at.next;if(e!==null)at=e,rt=t;else{if(t===null)throw Error($(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},at===null?Oe.memoizedState=at=t:at=at.next=t}return at}function _l(t,e){return typeof e=="function"?e(t):e}function rh(t){var e=In(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=rt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((ni&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var m={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=m,o=r):l=l.next=m,Oe.lanes|=d,ri|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Un(r,e.memoizedState)||(Gt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,ri|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sh(t){var e=In(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Un(i,e.memoizedState)||(Gt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function uS(){}function cS(t,e){var n=Oe,r=In(),s=e(),i=!Un(r.memoizedState,s);if(i&&(r.memoizedState=s,Gt=!0),r=r.queue,Cg(hS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,xl(9,fS.bind(null,n,r,s,e),void 0,null),lt===null)throw Error($(349));ni&30||dS(n,e,s)}return s}function dS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fS(t,e,n,r){e.value=n,e.getSnapshot=r,pS(e)&&mS(t)}function hS(t,e,n){return n(function(){pS(e)&&mS(t)})}function pS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function mS(t){var e=Sr(t,1);e!==null&&Fn(e,t,1,-1)}function r_(t){var e=Kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_l,lastRenderedState:t},e.queue=t,t=t.dispatch=A1.bind(null,Oe,t),[e.memoizedState,t]}function xl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gS(){return In().memoizedState}function oc(t,e,n,r){var s=Kn();Oe.flags|=t,s.memoizedState=xl(1|e,n,void 0,r===void 0?null:r)}function Rd(t,e,n,r){var s=In();r=r===void 0?null:r;var i=void 0;if(rt!==null){var o=rt.memoizedState;if(i=o.destroy,r!==null&&Eg(r,o.deps)){s.memoizedState=xl(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=xl(1|e,n,i,r)}function s_(t,e){return oc(8390656,8,t,e)}function Cg(t,e){return Rd(2048,8,t,e)}function yS(t,e){return Rd(4,2,t,e)}function vS(t,e){return Rd(4,4,t,e)}function _S(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xS(t,e,n){return n=n!=null?n.concat([t]):null,Rd(4,4,_S.bind(null,e,t),n)}function Ag(){}function wS(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Eg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TS(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Eg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ES(t,e,n){return ni&21?(Un(n,e)||(n=NI(),Oe.lanes|=n,ri|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=n)}function S1(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=nh.transition;nh.transition={};try{t(!1),e()}finally{Ee=n,nh.transition=r}}function IS(){return In().memoizedState}function C1(t,e,n){var r=ls(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},SS(t))CS(e,n);else if(n=oS(t,e,n,r),n!==null){var s=Lt();Fn(n,t,r,s),AS(n,e,r)}}function A1(t,e,n){var r=ls(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(SS(t))CS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Un(a,o)){var l=e.interleaved;l===null?(s.next=s,vg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=oS(t,e,s,r),n!==null&&(s=Lt(),Fn(n,t,r,s),AS(n,e,r))}}function SS(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function CS(t,e){Ba=Gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function AS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sg(t,n)}}var $c={readContext:En,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},N1={readContext:En,useCallback:function(t,e){return Kn().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:s_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,oc(4194308,4,_S.bind(null,e,t),n)},useLayoutEffect:function(t,e){return oc(4194308,4,t,e)},useInsertionEffect:function(t,e){return oc(4,2,t,e)},useMemo:function(t,e){var n=Kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=C1.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Kn();return t={current:t},e.memoizedState=t},useState:r_,useDebugValue:Ag,useDeferredValue:function(t){return Kn().memoizedState=t},useTransition:function(){var t=r_(!1),e=t[0];return t=S1.bind(null,t[1]),Kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=Kn();if(Ve){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),lt===null)throw Error($(349));ni&30||dS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,s_(hS.bind(null,r,i,t),[t]),r.flags|=2048,xl(9,fS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Kn(),e=lt.identifierPrefix;if(Ve){var n=gr,r=mr;n=(r&~(1<<32-Ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=I1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},P1={readContext:En,useCallback:wS,useContext:En,useEffect:Cg,useImperativeHandle:xS,useInsertionEffect:yS,useLayoutEffect:vS,useMemo:TS,useReducer:rh,useRef:gS,useState:function(){return rh(_l)},useDebugValue:Ag,useDeferredValue:function(t){var e=In();return ES(e,rt.memoizedState,t)},useTransition:function(){var t=rh(_l)[0],e=In().memoizedState;return[t,e]},useMutableSource:uS,useSyncExternalStore:cS,useId:IS,unstable_isNewReconciler:!1},R1={readContext:En,useCallback:wS,useContext:En,useEffect:Cg,useImperativeHandle:xS,useInsertionEffect:yS,useLayoutEffect:vS,useMemo:TS,useReducer:sh,useRef:gS,useState:function(){return sh(_l)},useDebugValue:Ag,useDeferredValue:function(t){var e=In();return rt===null?e.memoizedState=t:ES(e,rt.memoizedState,t)},useTransition:function(){var t=sh(_l)[0],e=In().memoizedState;return[t,e]},useMutableSource:uS,useSyncExternalStore:cS,useId:IS,unstable_isNewReconciler:!1};function Dn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ep(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bd={isMounted:function(t){return(t=t._reactInternals)?pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Lt(),s=ls(t),i=xr(r,s);i.payload=e,n!=null&&(i.callback=n),e=os(t,i,s),e!==null&&(Fn(e,t,s,r),sc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Lt(),s=ls(t),i=xr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=os(t,i,s),e!==null&&(Fn(e,t,s,r),sc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Lt(),r=ls(t),s=xr(n,r);s.tag=2,e!=null&&(s.callback=e),e=os(t,s,r),e!==null&&(Fn(e,t,r,n),sc(e,t,r))}};function i_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fl(n,r)||!fl(s,i):!0}function NS(t,e,n){var r=!1,s=ps,i=e.contextType;return typeof i=="object"&&i!==null?i=En(i):(s=Kt(e)?ei:Rt.current,r=e.contextTypes,i=(r=r!=null)?po(t,s):ps),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function o_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bd.enqueueReplaceState(e,e.state,null)}function Ip(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_g(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=En(i):(i=Kt(e)?ei:Rt.current,s.context=po(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ep(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bd.enqueueReplaceState(s,s.state,null),Bc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function vo(t,e){try{var n="",r=e;do n+=sk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ih(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var b1=typeof WeakMap=="function"?WeakMap:Map;function PS(t,e,n){n=xr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hc||(Hc=!0,Vp=r),Sp(t,e)},n}function RS(t,e,n){n=xr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Sp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Sp(t,e),typeof r!="function"&&(as===null?as=new Set([this]):as.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function a_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new b1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=z1.bind(null,t,e,n),e.then(t,t))}function l_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function u_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xr(-1,1),e.tag=2,os(n,e,1))),n.lanes|=1),t)}var k1=Mr.ReactCurrentOwner,Gt=!1;function Mt(t,e,n,r){e.child=t===null?iS(e,null,n,r):go(e,t.child,n,r)}function c_(t,e,n,r,s){n=n.render;var i=e.ref;return no(e,s),r=Ig(t,e,n,r,i,s),n=Sg(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cr(t,e,s)):(Ve&&n&&fg(e),e.flags|=1,Mt(t,e,r,s),e.child)}function d_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Vg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,bS(t,e,i,r,s)):(t=cc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fl,n(o,r)&&t.ref===e.ref)return Cr(t,e,s)}return e.flags|=1,t=us(i,r),t.ref=e.ref,t.return=e,e.child=t}function bS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fl(i,r)&&t.ref===e.ref)if(Gt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Gt=!0);else return e.lanes=t.lanes,Cr(t,e,s)}return Cp(t,e,n,r,s)}function kS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce($i,tn),tn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce($i,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ce($i,tn),tn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ce($i,tn),tn|=r;return Mt(t,e,s,n),e.child}function DS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cp(t,e,n,r,s){var i=Kt(n)?ei:Rt.current;return i=po(e,i),no(e,s),n=Ig(t,e,n,r,i,s),r=Sg(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cr(t,e,s)):(Ve&&r&&fg(e),e.flags|=1,Mt(t,e,n,s),e.child)}function f_(t,e,n,r,s){if(Kt(n)){var i=!0;Lc(e)}else i=!1;if(no(e,s),e.stateNode===null)ac(t,e),NS(e,n,r),Ip(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=En(u):(u=Kt(n)?ei:Rt.current,u=po(e,u));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&o_(e,o,r,u),Wr=!1;var g=e.memoizedState;o.state=g,Bc(e,r,o,s),l=e.memoizedState,a!==r||g!==l||Wt.current||Wr?(typeof d=="function"&&(Ep(e,n,d,r),l=e.memoizedState),(a=Wr||i_(e,n,a,r,g,l,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,aS(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Dn(e.type,a),o.props=u,m=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=En(l):(l=Kt(n)?ei:Rt.current,l=po(e,l));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==l)&&o_(e,o,r,l),Wr=!1,g=e.memoizedState,o.state=g,Bc(e,r,o,s);var w=e.memoizedState;a!==m||g!==w||Wt.current||Wr?(typeof v=="function"&&(Ep(e,n,v,r),w=e.memoizedState),(u=Wr||i_(e,n,u,r,g,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ap(t,e,n,r,i,s)}function Ap(t,e,n,r,s,i){DS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Q0(e,n,!1),Cr(t,e,i);r=e.stateNode,k1.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=go(e,t.child,null,i),e.child=go(e,null,a,i)):Mt(t,e,a,i),e.memoizedState=r.state,s&&Q0(e,n,!0),e.child}function MS(t){var e=t.stateNode;e.pendingContext?Y0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Y0(t,e.context,!1),xg(t,e.containerInfo)}function h_(t,e,n,r,s){return mo(),pg(s),e.flags|=256,Mt(t,e,n,r),e.child}var Np={dehydrated:null,treeContext:null,retryLane:0};function Pp(t){return{baseLanes:t,cachePool:null,transitions:null}}function VS(t,e,n){var r=e.pendingProps,s=Fe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ce(Fe,s&1),t===null)return wp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Md(o,r,0,null),t=Ys(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Pp(n),e.memoizedState=Np,t):Ng(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return D1(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=us(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=us(a,i):(i=Ys(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Pp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Np,r}return i=t.child,t=i.sibling,r=us(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ng(t,e){return e=Md({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uu(t,e,n,r){return r!==null&&pg(r),go(e,t.child,null,n),t=Ng(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function D1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ih(Error($(422))),Uu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Md({mode:"visible",children:r.children},s,0,null),i=Ys(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&go(e,t.child,null,o),e.child.memoizedState=Pp(o),e.memoizedState=Np,i);if(!(e.mode&1))return Uu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error($(419)),r=ih(i,r,void 0),Uu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Gt||a){if(r=lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Sr(t,s),Fn(r,t,s,-1))}return Mg(),r=ih(Error($(421))),Uu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=H1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,nn=is(s.nextSibling),sn=e,Ve=!0,Vn=null,t!==null&&(hn[pn++]=mr,hn[pn++]=gr,hn[pn++]=ti,mr=t.id,gr=t.overflow,ti=e),e=Ng(e,r.children),e.flags|=4096,e)}function p_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tp(t.return,e,n)}function oh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function LS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Mt(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&p_(t,n,e);else if(t.tag===19)p_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&jc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),oh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&jc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}oh(e,!0,n,null,i);break;case"together":oh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ac(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ri|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=us(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=us(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function M1(t,e,n){switch(e.tag){case 3:MS(e),mo();break;case 5:lS(e);break;case 1:Kt(e.type)&&Lc(e);break;case 4:xg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ce(Oc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?VS(t,e,n):(Ce(Fe,Fe.current&1),t=Cr(t,e,n),t!==null?t.sibling:null);Ce(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return LS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,kS(t,e,n)}return Cr(t,e,n)}var FS,Rp,US,OS;FS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rp=function(){};US=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,$s(Xn.current);var i=null;switch(n){case"input":s=Xh(t,s),r=Xh(t,r),i=[];break;case"select":s=qe({},s,{value:void 0}),r=qe({},r,{value:void 0}),i=[];break;case"textarea":s=tp(t,s),r=tp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mc)}rp(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(il.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(il.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Pe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};OS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ya(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Tt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function V1(t,e,n){var r=e.pendingProps;switch(hg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(e),null;case 1:return Kt(e.type)&&Vc(),Tt(e),null;case 3:return r=e.stateNode,yo(),De(Wt),De(Rt),Tg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Lu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vn!==null&&(Up(Vn),Vn=null))),Rp(t,e),Tt(e),null;case 5:wg(e);var s=$s(yl.current);if(n=e.type,t!==null&&e.stateNode!=null)US(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Tt(e),null}if(t=$s(Xn.current),Lu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Jn]=e,r[ml]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<Ca.length;s++)Pe(Ca[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":E0(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":S0(r,i),Pe("invalid",r)}rp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Vu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Vu(r.textContent,a,t),s=["children",""+a]):il.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":Au(r),I0(r,i,!0);break;case"textarea":Au(r),C0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Mc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Jn]=e,t[ml]=r,FS(t,e,!1,!1),e.stateNode=t;e:{switch(o=sp(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ca.length;s++)Pe(Ca[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":E0(t,r),s=Xh(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=qe({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":S0(t,r),s=tp(t,r),Pe("invalid",t);break;default:s=r}rp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?gI(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pI(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ol(t,l):typeof l=="number"&&ol(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(il.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Pe("scroll",t):l!=null&&Xm(t,i,l,o))}switch(n){case"input":Au(t),I0(t,r,!1);break;case"textarea":Au(t),C0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Xi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Xi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Mc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tt(e),null;case 6:if(t&&e.stateNode!=null)OS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=$s(yl.current),$s(Xn.current),Lu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jn]=e,(i=r.nodeValue!==n)&&(t=sn,t!==null))switch(t.tag){case 3:Vu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jn]=e,e.stateNode=r}return Tt(e),null;case 13:if(De(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&nn!==null&&e.mode&1&&!(e.flags&128))rS(),mo(),e.flags|=98560,i=!1;else if(i=Lu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Jn]=e}else mo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tt(e),i=!1}else Vn!==null&&(Up(Vn),Vn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?st===0&&(st=3):Mg())),e.updateQueue!==null&&(e.flags|=4),Tt(e),null);case 4:return yo(),Rp(t,e),t===null&&hl(e.stateNode.containerInfo),Tt(e),null;case 10:return yg(e.type._context),Tt(e),null;case 17:return Kt(e.type)&&Vc(),Tt(e),null;case 19:if(De(Fe),i=e.memoizedState,i===null)return Tt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ya(i,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jc(t),o!==null){for(e.flags|=128,ya(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Fe,Fe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ke()>_o&&(e.flags|=128,r=!0,ya(i,!1),e.lanes=4194304)}else{if(!r)if(t=jc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ya(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ve)return Tt(e),null}else 2*Ke()-i.renderingStartTime>_o&&n!==1073741824&&(e.flags|=128,r=!0,ya(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ke(),e.sibling=null,n=Fe.current,Ce(Fe,r?n&1|2:n&1),e):(Tt(e),null);case 22:case 23:return Dg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tn&1073741824&&(Tt(e),e.subtreeFlags&6&&(e.flags|=8192)):Tt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function L1(t,e){switch(hg(e),e.tag){case 1:return Kt(e.type)&&Vc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yo(),De(Wt),De(Rt),Tg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wg(e),null;case 13:if(De(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));mo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(Fe),null;case 4:return yo(),null;case 10:return yg(e.type._context),null;case 22:case 23:return Dg(),null;case 24:return null;default:return null}}var Ou=!1,St=!1,F1=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Gi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function bp(t,e,n){try{n()}catch(r){He(t,e,r)}}var m_=!1;function U1(t,e){if(pp=bc,t=$I(),dg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,m=t,g=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(l=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===t)break t;if(g===n&&++u===s&&(a=o),g===i&&++d===r&&(l=o),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mp={focusedElem:t,selectionRange:n},bc=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var C=w.memoizedProps,R=w.memoizedState,E=e.stateNode,x=E.getSnapshotBeforeUpdate(e.elementType===e.type?C:Dn(e.type,C),R);E.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(V){He(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return w=m_,m_=!1,w}function ja(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&bp(e,n,i)}s=s.next}while(s!==r)}}function kd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qS(t){var e=t.alternate;e!==null&&(t.alternate=null,qS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[ml],delete e[vp],delete e[x1],delete e[w1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BS(t){return t.tag===5||t.tag===3||t.tag===4}function g_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mc));else if(r!==4&&(t=t.child,t!==null))for(Dp(t,e,n),t=t.sibling;t!==null;)Dp(t,e,n),t=t.sibling}function Mp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mp(t,e,n),t=t.sibling;t!==null;)Mp(t,e,n),t=t.sibling}var dt=null,Mn=!1;function Gr(t,e,n){for(n=n.child;n!==null;)jS(t,e,n),n=n.sibling}function jS(t,e,n){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(Id,n)}catch{}switch(n.tag){case 5:St||Gi(n,e);case 6:var r=dt,s=Mn;dt=null,Gr(t,e,n),dt=r,Mn=s,dt!==null&&(Mn?(t=dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(Mn?(t=dt,n=n.stateNode,t.nodeType===8?Zf(t.parentNode,n):t.nodeType===1&&Zf(t,n),cl(t)):Zf(dt,n.stateNode));break;case 4:r=dt,s=Mn,dt=n.stateNode.containerInfo,Mn=!0,Gr(t,e,n),dt=r,Mn=s;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&bp(n,e,o),s=s.next}while(s!==r)}Gr(t,e,n);break;case 1:if(!St&&(Gi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,e,a)}Gr(t,e,n);break;case 21:Gr(t,e,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,Gr(t,e,n),St=r):Gr(t,e,n);break;default:Gr(t,e,n)}}function y_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new F1),e.forEach(function(r){var s=W1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:dt=a.stateNode,Mn=!1;break e;case 3:dt=a.stateNode.containerInfo,Mn=!0;break e;case 4:dt=a.stateNode.containerInfo,Mn=!0;break e}a=a.return}if(dt===null)throw Error($(160));jS(i,o,s),dt=null,Mn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){He(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GS(e,t),e=e.sibling}function GS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rn(e,t),Wn(t),r&4){try{ja(3,t,t.return),kd(3,t)}catch(C){He(t,t.return,C)}try{ja(5,t,t.return)}catch(C){He(t,t.return,C)}}break;case 1:Rn(e,t),Wn(t),r&512&&n!==null&&Gi(n,n.return);break;case 5:if(Rn(e,t),Wn(t),r&512&&n!==null&&Gi(n,n.return),t.flags&32){var s=t.stateNode;try{ol(s,"")}catch(C){He(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&dI(s,i),sp(a,o);var u=sp(a,i);for(o=0;o<l.length;o+=2){var d=l[o],m=l[o+1];d==="style"?gI(s,m):d==="dangerouslySetInnerHTML"?pI(s,m):d==="children"?ol(s,m):Xm(s,d,m,u)}switch(a){case"input":Zh(s,i);break;case"textarea":fI(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Xi(s,!!i.multiple,v,!1):g!==!!i.multiple&&(i.defaultValue!=null?Xi(s,!!i.multiple,i.defaultValue,!0):Xi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ml]=i}catch(C){He(t,t.return,C)}}break;case 6:if(Rn(e,t),Wn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){He(t,t.return,C)}}break;case 3:if(Rn(e,t),Wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cl(e.containerInfo)}catch(C){He(t,t.return,C)}break;case 4:Rn(e,t),Wn(t);break;case 13:Rn(e,t),Wn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(bg=Ke())),r&4&&y_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(St=(u=St)||d,Rn(e,t),St=u):Rn(e,t),Wn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Q=t,d=t.child;d!==null;){for(m=Q=d;Q!==null;){switch(g=Q,v=g.child,g.tag){case 0:case 11:case 14:case 15:ja(4,g,g.return);break;case 1:Gi(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(C){He(r,n,C)}}break;case 5:Gi(g,g.return);break;case 22:if(g.memoizedState!==null){__(m);continue}}v!==null?(v.return=g,Q=v):__(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=mI("display",o))}catch(C){He(t,t.return,C)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(C){He(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Rn(e,t),Wn(t),r&4&&y_(t);break;case 21:break;default:Rn(e,t),Wn(t)}}function Wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BS(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ol(s,""),r.flags&=-33);var i=g_(t);Mp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=g_(t);Dp(t,a,o);break;default:throw Error($(161))}}catch(l){He(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function O1(t,e,n){Q=t,$S(t)}function $S(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ou;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||St;a=Ou;var u=St;if(Ou=o,(St=l)&&!u)for(Q=s;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?x_(s):l!==null?(l.return=o,Q=l):x_(s);for(;i!==null;)Q=i,$S(i),i=i.sibling;Q=s,Ou=a,St=u}v_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):v_(t)}}function v_(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:St||kd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!St)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Dn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&n_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}n_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&cl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}St||e.flags&512&&kp(e)}catch(g){He(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function __(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function x_(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kd(4,e)}catch(l){He(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){He(e,s,l)}}var i=e.return;try{kp(e)}catch(l){He(e,i,l)}break;case 5:var o=e.return;try{kp(e)}catch(l){He(e,o,l)}}}catch(l){He(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var q1=Math.ceil,zc=Mr.ReactCurrentDispatcher,Pg=Mr.ReactCurrentOwner,vn=Mr.ReactCurrentBatchConfig,ye=0,lt=null,Ze=null,mt=0,tn=0,$i=ws(0),st=0,wl=null,ri=0,Dd=0,Rg=0,Ga=null,Bt=null,bg=0,_o=1/0,fr=null,Hc=!1,Vp=null,as=null,qu=!1,es=null,Wc=0,$a=0,Lp=null,lc=-1,uc=0;function Lt(){return ye&6?Ke():lc!==-1?lc:lc=Ke()}function ls(t){return t.mode&1?ye&2&&mt!==0?mt&-mt:E1.transition!==null?(uc===0&&(uc=NI()),uc):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:VI(t.type)),t):1}function Fn(t,e,n,r){if(50<$a)throw $a=0,Lp=null,Error($(185));ql(t,n,r),(!(ye&2)||t!==lt)&&(t===lt&&(!(ye&2)&&(Dd|=n),st===4&&Jr(t,mt)),Jt(t,r),n===1&&ye===0&&!(e.mode&1)&&(_o=Ke()+500,Pd&&Ts()))}function Jt(t,e){var n=t.callbackNode;Ek(t,e);var r=Rc(t,t===lt?mt:0);if(r===0)n!==null&&P0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&P0(n),e===1)t.tag===0?T1(w_.bind(null,t)):eS(w_.bind(null,t)),v1(function(){!(ye&6)&&Ts()}),n=null;else{switch(PI(r)){case 1:n=rg;break;case 4:n=CI;break;case 16:n=Pc;break;case 536870912:n=AI;break;default:n=Pc}n=XS(n,zS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zS(t,e){if(lc=-1,uc=0,ye&6)throw Error($(327));var n=t.callbackNode;if(ro()&&t.callbackNode!==n)return null;var r=Rc(t,t===lt?mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kc(t,r);else{e=r;var s=ye;ye|=2;var i=WS();(lt!==t||mt!==e)&&(fr=null,_o=Ke()+500,Js(t,e));do try{G1();break}catch(a){HS(t,a)}while(!0);gg(),zc.current=i,ye=s,Ze!==null?e=0:(lt=null,mt=0,e=st)}if(e!==0){if(e===2&&(s=up(t),s!==0&&(r=s,e=Fp(t,s))),e===1)throw n=wl,Js(t,0),Jr(t,r),Jt(t,Ke()),n;if(e===6)Jr(t,r);else{if(s=t.current.alternate,!(r&30)&&!B1(s)&&(e=Kc(t,r),e===2&&(i=up(t),i!==0&&(r=i,e=Fp(t,i))),e===1))throw n=wl,Js(t,0),Jr(t,r),Jt(t,Ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Os(t,Bt,fr);break;case 3:if(Jr(t,r),(r&130023424)===r&&(e=bg+500-Ke(),10<e)){if(Rc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Lt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yp(Os.bind(null,t,Bt,fr),e);break}Os(t,Bt,fr);break;case 4:if(Jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ln(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*q1(r/1960))-r,10<r){t.timeoutHandle=yp(Os.bind(null,t,Bt,fr),r);break}Os(t,Bt,fr);break;case 5:Os(t,Bt,fr);break;default:throw Error($(329))}}}return Jt(t,Ke()),t.callbackNode===n?zS.bind(null,t):null}function Fp(t,e){var n=Ga;return t.current.memoizedState.isDehydrated&&(Js(t,e).flags|=256),t=Kc(t,e),t!==2&&(e=Bt,Bt=n,e!==null&&Up(e)),t}function Up(t){Bt===null?Bt=t:Bt.push.apply(Bt,t)}function B1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Un(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jr(t,e){for(e&=~Rg,e&=~Dd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),r=1<<n;t[n]=-1,e&=~r}}function w_(t){if(ye&6)throw Error($(327));ro();var e=Rc(t,0);if(!(e&1))return Jt(t,Ke()),null;var n=Kc(t,e);if(t.tag!==0&&n===2){var r=up(t);r!==0&&(e=r,n=Fp(t,r))}if(n===1)throw n=wl,Js(t,0),Jr(t,e),Jt(t,Ke()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Os(t,Bt,fr),Jt(t,Ke()),null}function kg(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(_o=Ke()+500,Pd&&Ts())}}function si(t){es!==null&&es.tag===0&&!(ye&6)&&ro();var e=ye;ye|=1;var n=vn.transition,r=Ee;try{if(vn.transition=null,Ee=1,t)return t()}finally{Ee=r,vn.transition=n,ye=e,!(ye&6)&&Ts()}}function Dg(){tn=$i.current,De($i)}function Js(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,y1(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(hg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vc();break;case 3:yo(),De(Wt),De(Rt),Tg();break;case 5:wg(r);break;case 4:yo();break;case 13:De(Fe);break;case 19:De(Fe);break;case 10:yg(r.type._context);break;case 22:case 23:Dg()}n=n.return}if(lt=t,Ze=t=us(t.current,null),mt=tn=e,st=0,wl=null,Rg=Dd=ri=0,Bt=Ga=null,Gs!==null){for(e=0;e<Gs.length;e++)if(n=Gs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Gs=null}return t}function HS(t,e){do{var n=Ze;try{if(gg(),ic.current=$c,Gc){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gc=!1}if(ni=0,at=rt=Oe=null,Ba=!1,vl=0,Pg.current=null,n===null||n.return===null){st=1,wl=e,Ze=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=mt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=l_(o);if(v!==null){v.flags&=-257,u_(v,o,a,i,e),v.mode&1&&a_(i,u,e),e=v,l=u;var w=e.updateQueue;if(w===null){var C=new Set;C.add(l),e.updateQueue=C}else w.add(l);break e}else{if(!(e&1)){a_(i,u,e),Mg();break e}l=Error($(426))}}else if(Ve&&a.mode&1){var R=l_(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),u_(R,o,a,i,e),pg(vo(l,a));break e}}i=l=vo(l,a),st!==4&&(st=2),Ga===null?Ga=[i]:Ga.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=PS(i,l,e);t_(i,E);break e;case 1:a=l;var x=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(as===null||!as.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=RS(i,a,e);t_(i,V);break e}}i=i.return}while(i!==null)}JS(n)}catch(L){e=L,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function WS(){var t=zc.current;return zc.current=$c,t===null?$c:t}function Mg(){(st===0||st===3||st===2)&&(st=4),lt===null||!(ri&268435455)&&!(Dd&268435455)||Jr(lt,mt)}function Kc(t,e){var n=ye;ye|=2;var r=WS();(lt!==t||mt!==e)&&(fr=null,Js(t,e));do try{j1();break}catch(s){HS(t,s)}while(!0);if(gg(),ye=n,zc.current=r,Ze!==null)throw Error($(261));return lt=null,mt=0,st}function j1(){for(;Ze!==null;)KS(Ze)}function G1(){for(;Ze!==null&&!pk();)KS(Ze)}function KS(t){var e=QS(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?JS(t):Ze=e,Pg.current=null}function JS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=L1(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,Ze=null;return}}else if(n=V1(n,e,tn),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);st===0&&(st=5)}function Os(t,e,n){var r=Ee,s=vn.transition;try{vn.transition=null,Ee=1,$1(t,e,n,r)}finally{vn.transition=s,Ee=r}return null}function $1(t,e,n,r){do ro();while(es!==null);if(ye&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Ik(t,i),t===lt&&(Ze=lt=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qu||(qu=!0,XS(Pc,function(){return ro(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vn.transition,vn.transition=null;var o=Ee;Ee=1;var a=ye;ye|=4,Pg.current=null,U1(t,n),GS(n,t),c1(mp),bc=!!pp,mp=pp=null,t.current=n,O1(n),mk(),ye=a,Ee=o,vn.transition=i}else t.current=n;if(qu&&(qu=!1,es=t,Wc=s),i=t.pendingLanes,i===0&&(as=null),vk(n.stateNode),Jt(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hc)throw Hc=!1,t=Vp,Vp=null,t;return Wc&1&&t.tag!==0&&ro(),i=t.pendingLanes,i&1?t===Lp?$a++:($a=0,Lp=t):$a=0,Ts(),null}function ro(){if(es!==null){var t=PI(Wc),e=vn.transition,n=Ee;try{if(vn.transition=null,Ee=16>t?16:t,es===null)var r=!1;else{if(t=es,es=null,Wc=0,ye&6)throw Error($(331));var s=ye;for(ye|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Q=u;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:ja(8,d,i)}var m=d.child;if(m!==null)m.return=d,Q=m;else for(;Q!==null;){d=Q;var g=d.sibling,v=d.return;if(qS(d),d===u){Q=null;break}if(g!==null){g.return=v,Q=g;break}Q=v}}}var w=i.alternate;if(w!==null){var C=w.child;if(C!==null){w.child=null;do{var R=C.sibling;C.sibling=null,C=R}while(C!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ja(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Q=E;break e}Q=i.return}}var x=t.current;for(Q=x;Q!==null;){o=Q;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Q=S;else e:for(o=x;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:kd(9,a)}}catch(L){He(a,a.return,L)}if(a===o){Q=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,Q=V;break e}Q=a.return}}if(ye=s,Ts(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(Id,t)}catch{}r=!0}return r}finally{Ee=n,vn.transition=e}}return!1}function T_(t,e,n){e=vo(n,e),e=PS(t,e,1),t=os(t,e,1),e=Lt(),t!==null&&(ql(t,1,e),Jt(t,e))}function He(t,e,n){if(t.tag===3)T_(t,t,n);else for(;e!==null;){if(e.tag===3){T_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(as===null||!as.has(r))){t=vo(n,t),t=RS(e,t,1),e=os(e,t,1),t=Lt(),e!==null&&(ql(e,1,t),Jt(e,t));break}}e=e.return}}function z1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Lt(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(mt&n)===n&&(st===4||st===3&&(mt&130023424)===mt&&500>Ke()-bg?Js(t,0):Rg|=n),Jt(t,e)}function YS(t,e){e===0&&(t.mode&1?(e=Ru,Ru<<=1,!(Ru&130023424)&&(Ru=4194304)):e=1);var n=Lt();t=Sr(t,e),t!==null&&(ql(t,e,n),Jt(t,n))}function H1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),YS(t,n)}function W1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),YS(t,n)}var QS;QS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wt.current)Gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Gt=!1,M1(t,e,n);Gt=!!(t.flags&131072)}else Gt=!1,Ve&&e.flags&1048576&&tS(e,Uc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ac(t,e),t=e.pendingProps;var s=po(e,Rt.current);no(e,n),s=Ig(null,e,r,t,s,n);var i=Sg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kt(r)?(i=!0,Lc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_g(e),s.updater=bd,e.stateNode=s,s._reactInternals=e,Ip(e,r,t,n),e=Ap(null,e,r,!0,i,n)):(e.tag=0,Ve&&i&&fg(e),Mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ac(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=J1(r),t=Dn(r,t),s){case 0:e=Cp(null,e,r,t,n);break e;case 1:e=f_(null,e,r,t,n);break e;case 11:e=c_(null,e,r,t,n);break e;case 14:e=d_(null,e,r,Dn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dn(r,s),Cp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dn(r,s),f_(t,e,r,s,n);case 3:e:{if(MS(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,aS(t,e),Bc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vo(Error($(423)),e),e=h_(t,e,r,n,s);break e}else if(r!==s){s=vo(Error($(424)),e),e=h_(t,e,r,n,s);break e}else for(nn=is(e.stateNode.containerInfo.firstChild),sn=e,Ve=!0,Vn=null,n=iS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mo(),r===s){e=Cr(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return lS(e),t===null&&wp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gp(r,s)?o=null:i!==null&&gp(r,i)&&(e.flags|=32),DS(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&wp(e),null;case 13:return VS(t,e,n);case 4:return xg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=go(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dn(r,s),c_(t,e,r,s,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ce(Oc,r._currentValue),r._currentValue=o,i!==null)if(Un(i.value,o)){if(i.children===s.children&&!Wt.current){e=Cr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=xr(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Tp(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Tp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,no(e,n),s=En(s),r=r(s),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,s=Dn(r,e.pendingProps),s=Dn(r.type,s),d_(t,e,r,s,n);case 15:return bS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dn(r,s),ac(t,e),e.tag=1,Kt(r)?(t=!0,Lc(e)):t=!1,no(e,n),NS(e,r,s),Ip(e,r,s,n),Ap(null,e,r,!0,t,n);case 19:return LS(t,e,n);case 22:return kS(t,e,n)}throw Error($(156,e.tag))};function XS(t,e){return SI(t,e)}function K1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,e,n,r){return new K1(t,e,n,r)}function Vg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function J1(t){if(typeof t=="function")return Vg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eg)return 11;if(t===tg)return 14}return 2}function us(t,e){var n=t.alternate;return n===null?(n=gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Vg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Mi:return Ys(n.children,s,i,e);case Zm:o=8,s|=8;break;case Kh:return t=gn(12,n,e,s|2),t.elementType=Kh,t.lanes=i,t;case Jh:return t=gn(13,n,e,s),t.elementType=Jh,t.lanes=i,t;case Yh:return t=gn(19,n,e,s),t.elementType=Yh,t.lanes=i,t;case lI:return Md(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oI:o=10;break e;case aI:o=9;break e;case eg:o=11;break e;case tg:o=14;break e;case Hr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=gn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ys(t,e,n,r){return t=gn(7,t,r,e),t.lanes=n,t}function Md(t,e,n,r){return t=gn(22,t,r,e),t.elementType=lI,t.lanes=n,t.stateNode={isHidden:!1},t}function ah(t,e,n){return t=gn(6,t,null,e),t.lanes=n,t}function lh(t,e,n){return e=gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Y1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jf(0),this.expirationTimes=jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lg(t,e,n,r,s,i,o,a,l){return t=new Y1(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=gn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_g(i),t}function Q1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ZS(t){if(!t)return ps;t=t._reactInternals;e:{if(pi(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Kt(n))return ZI(t,n,e)}return e}function eC(t,e,n,r,s,i,o,a,l){return t=Lg(n,r,!0,t,s,i,o,a,l),t.context=ZS(null),n=t.current,r=Lt(),s=ls(n),i=xr(r,s),i.callback=e??null,os(n,i,s),t.current.lanes=s,ql(t,s,r),Jt(t,r),t}function Vd(t,e,n,r){var s=e.current,i=Lt(),o=ls(s);return n=ZS(n),e.context===null?e.context=n:e.pendingContext=n,e=xr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=os(s,e,o),t!==null&&(Fn(t,s,o,i),sc(t,s,o)),o}function Jc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function E_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fg(t,e){E_(t,e),(t=t.alternate)&&E_(t,e)}function X1(){return null}var tC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ug(t){this._internalRoot=t}Ld.prototype.render=Ug.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Vd(t,e,null,null)};Ld.prototype.unmount=Ug.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;si(function(){Vd(null,t,null,null)}),e[Ir]=null}};function Ld(t){this._internalRoot=t}Ld.prototype.unstable_scheduleHydration=function(t){if(t){var e=kI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kr.length&&e!==0&&e<Kr[n].priority;n++);Kr.splice(n,0,t),n===0&&MI(t)}};function Og(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function I_(){}function Z1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Jc(o);i.call(u)}}var o=eC(e,r,t,0,null,!1,!1,"",I_);return t._reactRootContainer=o,t[Ir]=o.current,hl(t.nodeType===8?t.parentNode:t),si(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Jc(l);a.call(u)}}var l=Lg(t,0,!1,null,null,!1,!1,"",I_);return t._reactRootContainer=l,t[Ir]=l.current,hl(t.nodeType===8?t.parentNode:t),si(function(){Vd(e,l,n,r)}),l}function Ud(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Jc(o);a.call(l)}}Vd(e,o,t,s)}else o=Z1(n,e,t,s,r);return Jc(o)}RI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sa(e.pendingLanes);n!==0&&(sg(e,n|1),Jt(e,Ke()),!(ye&6)&&(_o=Ke()+500,Ts()))}break;case 13:si(function(){var r=Sr(t,1);if(r!==null){var s=Lt();Fn(r,t,1,s)}}),Fg(t,1)}};ig=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var n=Lt();Fn(e,t,134217728,n)}Fg(t,134217728)}};bI=function(t){if(t.tag===13){var e=ls(t),n=Sr(t,e);if(n!==null){var r=Lt();Fn(n,t,e,r)}Fg(t,e)}};kI=function(){return Ee};DI=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};op=function(t,e,n){switch(e){case"input":if(Zh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Nd(r);if(!s)throw Error($(90));cI(r),Zh(r,s)}}}break;case"textarea":fI(t,n);break;case"select":e=n.value,e!=null&&Xi(t,!!n.multiple,e,!1)}};_I=kg;xI=si;var eD={usingClientEntryPoint:!1,Events:[jl,Ui,Nd,yI,vI,kg]},va={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tD={bundleType:va.bundleType,version:va.version,rendererPackageName:va.rendererPackageName,rendererConfig:va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=EI(t),t===null?null:t.stateNode},findFiberByHostInstance:va.findFiberByHostInstance||X1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{Id=Bu.inject(tD),Qn=Bu}catch{}}ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eD;ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Og(e))throw Error($(200));return Q1(t,e,null,n)};ln.createRoot=function(t,e){if(!Og(t))throw Error($(299));var n=!1,r="",s=tC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lg(t,1,!1,null,null,n,!1,r,s),t[Ir]=e.current,hl(t.nodeType===8?t.parentNode:t),new Ug(e)};ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=EI(e),t=t===null?null:t.stateNode,t};ln.flushSync=function(t){return si(t)};ln.hydrate=function(t,e,n){if(!Fd(e))throw Error($(200));return Ud(null,t,e,!0,n)};ln.hydrateRoot=function(t,e,n){if(!Og(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=tC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=eC(e,null,t,1,n??null,s,!1,i,o),t[Ir]=e.current,hl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ld(e)};ln.render=function(t,e,n){if(!Fd(e))throw Error($(200));return Ud(null,t,e,!1,n)};ln.unmountComponentAtNode=function(t){if(!Fd(t))throw Error($(40));return t._reactRootContainer?(si(function(){Ud(null,null,t,!1,function(){t._reactRootContainer=null,t[Ir]=null})}),!0):!1};ln.unstable_batchedUpdates=kg;ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fd(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Ud(t,e,n,!1,r)};ln.version="18.3.1-next-f1338f8080-20240426";function nC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nC)}catch(t){console.error(t)}}nC(),nI.exports=ln;var rC=nI.exports;const nD=GE(rC);var S_=rC;Hh.createRoot=S_.createRoot,Hh.hydrateRoot=S_.hydrateRoot;var C_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},iC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|u>>6,v=u&63;l||(v=64,o||(g=64)),r.push(n[d],n[m],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||m==null)throw new sD;const g=i<<2|a>>4;if(r.push(g),u!==64){const v=a<<4&240|u>>2;if(r.push(v),m!==64){const w=u<<6&192|m;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iD=function(t){const e=sC(t);return iC.encodeByteArray(e,!0)},Yc=function(t){return iD(t).replace(/\./g,"")},oC=function(t){try{return iC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=()=>oD().__FIREBASE_DEFAULTS__,lD=()=>{if(typeof process>"u"||typeof C_>"u")return;const t=C_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&oC(t[1]);return e&&JSON.parse(e)},Od=()=>{try{return aD()||lD()||uD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aC=t=>{var e,n;return(n=(e=Od())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},cD=t=>{const e=aC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lC=()=>{var t;return(t=Od())===null||t===void 0?void 0:t.config},uC=t=>{var e;return(e=Od())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Yc(JSON.stringify(n)),Yc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function pD(){var t;const e=(t=Od())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gD(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yD(){return!pD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dC(){try{return typeof indexedDB=="object"}catch{return!1}}function fC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function vD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="FirebaseError";class jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_D,Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mi.prototype.create)}}class mi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?xD(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new jn(s,a,r)}}function xD(t,e){return t.replace(wD,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const wD=/\{\$([^}]+)}/g;function TD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(A_(i)&&A_(o)){if(!Tl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function A_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Aa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Na(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ED(t,e){const n=new ID(t,e);return n.subscribe.bind(n)}class ID{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=uh),s.error===void 0&&(s.error=uh),s.complete===void 0&&(s.complete=uh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function uh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=1e3,AD=2,ND=4*60*60*1e3,PD=.5;function N_(t,e=CD,n=AD){const r=e*Math.pow(n,t),s=Math.round(PD*r*(Math.random()-.5)*2);return Math.min(ND,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return t&&t._delegate?t._delegate:t}class On{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kD(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bD(t){return t===qs?void 0:t}function kD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const MD={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},VD=me.INFO,LD={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},FD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=LD[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qd{constructor(e){this.name=e,this._logLevel=VD,this._logHandler=FD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const UD=(t,e)=>e.some(n=>t instanceof n);let P_,R_;function OD(){return P_||(P_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qD(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hC=new WeakMap,Op=new WeakMap,pC=new WeakMap,ch=new WeakMap,qg=new WeakMap;function BD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(cs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hC.set(n,t)}).catch(()=>{}),qg.set(e,t),e}function jD(t){if(Op.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Op.set(t,e)}let qp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Op.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GD(t){qp=t(qp)}function $D(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dh(this),e,...n);return pC.set(r,e.sort?e.sort():[e]),cs(r)}:qD().includes(t)?function(...e){return t.apply(dh(this),e),cs(hC.get(this))}:function(...e){return cs(t.apply(dh(this),e))}}function zD(t){return typeof t=="function"?$D(t):(t instanceof IDBTransaction&&jD(t),UD(t,OD())?new Proxy(t,qp):t)}function cs(t){if(t instanceof IDBRequest)return BD(t);if(ch.has(t))return ch.get(t);const e=zD(t);return e!==t&&(ch.set(t,e),qg.set(e,t)),e}const dh=t=>qg.get(t);function mC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=cs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(cs(o.result),l.oldVersion,l.newVersion,cs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const HD=["get","getKey","getAll","getAllKeys","count"],WD=["put","add","delete","clear"],fh=new Map;function b_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fh.get(e))return fh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=WD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||HD.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return fh.set(e,i),i}GD(t=>({...t,get:(e,n,r)=>b_(e,n)||t.get(e,n,r),has:(e,n)=>!!b_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bp="@firebase/app",k_="0.10.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new qd("@firebase/app"),YD="@firebase/app-compat",QD="@firebase/analytics-compat",XD="@firebase/analytics",ZD="@firebase/app-check-compat",eM="@firebase/app-check",tM="@firebase/auth",nM="@firebase/auth-compat",rM="@firebase/database",sM="@firebase/database-compat",iM="@firebase/functions",oM="@firebase/functions-compat",aM="@firebase/installations",lM="@firebase/installations-compat",uM="@firebase/messaging",cM="@firebase/messaging-compat",dM="@firebase/performance",fM="@firebase/performance-compat",hM="@firebase/remote-config",pM="@firebase/remote-config-compat",mM="@firebase/storage",gM="@firebase/storage-compat",yM="@firebase/firestore",vM="@firebase/vertexai-preview",_M="@firebase/firestore-compat",xM="firebase",wM="10.12.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="[DEFAULT]",TM={[Bp]:"fire-core",[YD]:"fire-core-compat",[XD]:"fire-analytics",[QD]:"fire-analytics-compat",[eM]:"fire-app-check",[ZD]:"fire-app-check-compat",[tM]:"fire-auth",[nM]:"fire-auth-compat",[rM]:"fire-rtdb",[sM]:"fire-rtdb-compat",[iM]:"fire-fn",[oM]:"fire-fn-compat",[aM]:"fire-iid",[lM]:"fire-iid-compat",[uM]:"fire-fcm",[cM]:"fire-fcm-compat",[dM]:"fire-perf",[fM]:"fire-perf-compat",[hM]:"fire-rc",[pM]:"fire-rc-compat",[mM]:"fire-gcs",[gM]:"fire-gcs-compat",[yM]:"fire-fst",[_M]:"fire-fst-compat",[vM]:"fire-vertex","fire-js":"fire-js",[xM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new Map,Gp=new Map,$p=new Map;function D_(t,e){try{t.container.addComponent(e)}catch(n){ii.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ir(t){const e=t.name;if($p.has(e))return ii.debug(`There were multiple attempts to register component ${e}.`),!1;$p.set(e,t);for(const n of xo.values())D_(n,t);for(const n of Gp.values())D_(n,t);return!0}function gi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new mi("app","Firebase",EM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new On("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=wM;function Bg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ds.create("bad-app-name",{appName:String(s)});if(n||(n=lC()),!n)throw ds.create("no-options");const i=xo.get(s);if(i){if(Tl(n,i.options)&&Tl(r,i.config))return i;throw ds.create("duplicate-app",{appName:s})}const o=new DD(s);for(const l of $p.values())o.addComponent(l);const a=new IM(n,r,o);return xo.set(s,a),a}function jg(t=jp){const e=xo.get(t);if(!e&&t===jp&&lC())return Bg();if(!e)throw ds.create("no-app",{appName:t});return e}async function SM(t){let e=!1;const n=t.name;xo.has(n)?(e=!0,xo.delete(n)):Gp.has(n)&&t.decRefCount()<=0&&(Gp.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function _n(t,e,n){var r;let s=(r=TM[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ii.warn(a.join(" "));return}ir(new On(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="firebase-heartbeat-database",AM=1,El="firebase-heartbeat-store";let hh=null;function gC(){return hh||(hh=mC(CM,AM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(El)}catch(n){console.warn(n)}}}}).catch(t=>{throw ds.create("idb-open",{originalErrorMessage:t.message})})),hh}async function NM(t){try{const n=(await gC()).transaction(El),r=await n.objectStore(El).get(yC(t));return await n.done,r}catch(e){if(e instanceof jn)ii.warn(e.message);else{const n=ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ii.warn(n.message)}}}async function M_(t,e){try{const r=(await gC()).transaction(El,"readwrite");await r.objectStore(El).put(e,yC(t)),await r.done}catch(n){if(n instanceof jn)ii.warn(n.message);else{const r=ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ii.warn(r.message)}}}function yC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=1024,RM=30*24*60*60*1e3;class bM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=V_();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=RM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=V_(),{heartbeatsToSend:r,unsentEntries:s}=kM(this._heartbeatsCache.heartbeats),i=Yc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function V_(){return new Date().toISOString().substring(0,10)}function kM(t,e=PM){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),L_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),L_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dC()?fC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return M_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return M_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function L_(t){return Yc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(t){ir(new On("platform-logger",e=>new KD(e),"PRIVATE")),ir(new On("heartbeat",e=>new bM(e),"PRIVATE")),_n(Bp,k_,t),_n(Bp,k_,"esm2017"),_n("fire-js","")}MM("");var VM="firebase",LM="10.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n(VM,LM,"app");function Gg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function vC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FM=vC,_C=new mi("auth","Firebase",vC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new qd("@firebase/auth");function UM(t,...e){Qc.logLevel<=me.WARN&&Qc.warn(`Auth (${Fo}): ${t}`,...e)}function dc(t,...e){Qc.logLevel<=me.ERROR&&Qc.error(`Auth (${Fo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw $g(t,...e)}function Zn(t,...e){return $g(t,...e)}function xC(t,e,n){const r=Object.assign(Object.assign({},FM()),{[e]:n});return new mi("auth","Firebase",r).create(e,{appName:t.name})}function wr(t){return xC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $g(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _C.create(t,...e)}function le(t,e,...n){if(!t)throw $g(e,...n)}function yr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dc(e),new Error(e)}function Ar(t,e){t||yr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OM(){return F_()==="http:"||F_()==="https:"}function F_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OM()||cC()||"connection"in navigator)?navigator.onLine:!0}function BM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=hD()||mD()}get(){return qM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t,e){Ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=new zl(3e4,6e4);function Vr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ar(t,e,n,r,s={}){return TC(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=$l(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),wC.fetch()(EC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function TC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},jM),e);try{const s=new zM(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ju(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ju(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ju(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ju(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw xC(t,d,u);qn(t,d)}}catch(s){if(s instanceof jn)throw s;qn(t,"network-request-failed",{message:String(s)})}}async function Hl(t,e,n,r,s={}){const i=await ar(t,e,n,r,s);return"mfaPendingCredential"in i&&qn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function EC(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?zg(t.config,s):`${t.config.apiScheme}://${s}`}function $M(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zn(this.auth,"network-request-failed")),GM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ju(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Zn(t,e,r);return s.customData._tokenResponse=n,s}function U_(t){return t!==void 0&&t.enterprise!==void 0}class HM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $M(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function WM(t,e){return ar(t,"GET","/v2/recaptchaConfig",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){return ar(t,"POST","/v1/accounts:delete",e)}async function IC(t,e){return ar(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JM(t,e=!1){const n=We(t),r=await n.getIdToken(e),s=Hg(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:za(ph(s.auth_time)),issuedAtTime:za(ph(s.iat)),expirationTime:za(ph(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ph(t){return Number(t)*1e3}function Hg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dc("JWT malformed, contained fewer than 3 sections"),null;try{const s=oC(n);return s?JSON.parse(s):(dc("Failed to decode base64 JWT payload"),null)}catch(s){return dc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function O_(t){const e=Hg(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jn&&YM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=za(this.lastLoginAt),this.creationTime=za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await wo(t,IC(n,{idToken:r}));le(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?SC(i.providerUserInfo):[],a=ZM(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Hp(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function XM(t){const e=We(t);await Xc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZM(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function SC(t){return t.map(e=>{var{providerId:n}=e,r=Gg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV(t,e){const n=await TC(t,{},async()=>{const r=$l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=EC(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",wC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tV(t,e){return ar(t,"POST","/v2/accounts:revokeToken",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=O_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await eV(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new so;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new so,this.toJSON())}_performRefresh(){return yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Gg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await wo(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JM(this,e)}reload(){return XM(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(wr(this.auth));const e=await this.getIdToken();return await wo(this,KM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,d;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,v=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(u=n.createdAt)!==null&&u!==void 0?u:void 0,x=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:V,isAnonymous:L,providerData:F,stsTokenManager:I}=n;le(S&&I,e,"internal-error");const T=so.fromJSON(this.name,I);le(typeof S=="string",e,"internal-error"),$r(m,e.name),$r(g,e.name),le(typeof V=="boolean",e,"internal-error"),le(typeof L=="boolean",e,"internal-error"),$r(v,e.name),$r(w,e.name),$r(C,e.name),$r(R,e.name),$r(E,e.name),$r(x,e.name);const A=new vr({uid:S,auth:e,email:g,emailVerified:V,displayName:m,isAnonymous:L,photoURL:w,phoneNumber:v,tenantId:C,stsTokenManager:T,createdAt:E,lastLoginAt:x});return F&&Array.isArray(F)&&(A.providerData=F.map(P=>Object.assign({},P))),R&&(A._redirectEventId=R),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new so;s.updateFromServerResponse(n);const i=new vr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Xc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?SC(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new so;a.updateFromIdToken(r);const l=new vr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Hp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=new Map;function _r(t){Ar(t instanceof Function,"Expected a class definition");let e=q_.get(t);return e?(Ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,q_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}CC.type="NONE";const B_=CC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e,n){return`firebase:${t}:${e}:${n}`}class io{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=fc(this.userKey,s.apiKey,i),this.fullPersistenceKey=fc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new io(_r(B_),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||_r(B_);const o=fc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const m=vr._fromJSON(e,d);u!==i&&(a=m),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new io(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new io(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bC(e))return"Blackberry";if(kC(e))return"Webos";if(Wg(e))return"Safari";if((e.includes("chrome/")||NC(e))&&!e.includes("edge/"))return"Chrome";if(RC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function AC(t=vt()){return/firefox\//i.test(t)}function Wg(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NC(t=vt()){return/crios\//i.test(t)}function PC(t=vt()){return/iemobile/i.test(t)}function RC(t=vt()){return/android/i.test(t)}function bC(t=vt()){return/blackberry/i.test(t)}function kC(t=vt()){return/webos/i.test(t)}function Bd(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nV(t=vt()){var e;return Bd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rV(){return gD()&&document.documentMode===10}function DC(t=vt()){return Bd(t)||RC(t)||kC(t)||bC(t)||/windows phone/i.test(t)||PC(t)}function sV(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t,e=[]){let n;switch(t){case"Browser":n=j_(vt());break;case"Worker":n=`${j_(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oV(t,e={}){return ar(t,"GET","/v2/passwordPolicy",Vr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=6;class lV{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:aV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G_(this),this.idTokenSubscription=new G_(this),this.beforeStateQueue=new iV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_C,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_r(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await io.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await IC(this,{idToken:e}),r=await vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(wr(this));const n=e?We(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oV(this),n=new lV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await tV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_r(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[_r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&UM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Es(t){return We(t)}class G_{constructor(e){this.auth=e,this.observer=null,this.addObserver=ED(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cV(t){jd=t}function VC(t){return jd.loadJS(t)}function dV(){return jd.recaptchaEnterpriseScript}function fV(){return jd.gapiScript}function hV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const pV="recaptcha-enterprise",mV="NO_RECAPTCHA";class gV{constructor(e){this.type=pV,this.auth=Es(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{WM(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new HM(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;U_(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(mV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&U_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=dV();l.length!==0&&(l+=a),VC(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function $_(t,e,n,r=!1){const s=new gV(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Zc(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await $_(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await $_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(t,e){const n=gi(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Tl(i,e??{}))return s;qn(s,"already-initialized")}return n.initialize({options:e})}function vV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_r);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _V(t,e,n){const r=Es(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=LC(e),{host:o,port:a}=xV(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),wV()}function LC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xV(t){const e=LC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:z_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:z_(o)}}}function z_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yr("not implemented")}_getIdTokenResponse(e){return yr("not implemented")}_linkToIdToken(e,n){return yr("not implemented")}_getReauthenticationResolver(e){return yr("not implemented")}}async function TV(t,e){return ar(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EV(t,e){return Hl(t,"POST","/v1/accounts:signInWithPassword",Vr(t,e))}async function IV(t,e){return ar(t,"POST","/v1/accounts:sendOobCode",Vr(t,e))}async function SV(t,e){return IV(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(t,e){return Hl(t,"POST","/v1/accounts:signInWithEmailLink",Vr(t,e))}async function AV(t,e){return Hl(t,"POST","/v1/accounts:signInWithEmailLink",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends Kg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Il(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Il(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zc(e,n,"signInWithPassword",EV);case"emailLink":return CV(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zc(e,r,"signUpPassword",TV);case"emailLink":return AV(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(t,e){return Hl(t,"POST","/v1/accounts:signInWithIdp",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV="http://localhost";class oi extends Kg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Gg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new oi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return oo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,oo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oo(e,n)}buildRequest(){const e={requestUri:NV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$l(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RV(t){const e=Aa(Na(t)).link,n=e?Aa(Na(e)).deep_link_id:null,r=Aa(Na(t)).deep_link_id;return(r?Aa(Na(r)).link:null)||r||n||e||t}class Jg{constructor(e){var n,r,s,i,o,a;const l=Aa(Na(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,m=PV((s=l.mode)!==null&&s!==void 0?s:null);le(u&&d&&m,"argument-error"),this.apiKey=u,this.operation=m,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=RV(e);try{return new Jg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.providerId=Uo.PROVIDER_ID}static credential(e,n){return Il._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jg.parseLink(n);return le(r,"argument-error"),Il._fromEmailAndCode(e,r.code,r.tenantId)}}Uo.PROVIDER_ID="password";Uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends FC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Wl{constructor(){super("facebook.com")}static credential(e){return oi._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oi._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.GOOGLE_SIGN_IN_METHOD="google.com";pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Wl{constructor(){super("github.com")}static credential(e){return oi._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.GITHUB_SIGN_IN_METHOD="github.com";Qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Wl{constructor(){super("twitter.com")}static credential(e,n){return oi._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bV(t,e){return Hl(t,"POST","/v1/accounts:signUp",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await vr._fromIdTokenResponse(e,r,s),o=H_(r);return new ai({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=H_(r);return new ai({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function H_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends jn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ed.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ed(e,n,r,s)}}function UC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ed._fromErrorAndOperation(t,i,e,r):i})}async function kV(t,e,n=!1){const r=await wo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ai._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DV(t,e,n=!1){const{auth:r}=t;if(Yn(r.app))return Promise.reject(wr(r));const s="reauthenticate";try{const i=await wo(t,UC(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=Hg(i.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),ai._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&qn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(t,e,n=!1){if(Yn(t.app))return Promise.reject(wr(t));const r="signIn",s=await UC(t,r,e),i=await ai._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function MV(t,e){return OC(Es(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t){const e=Es(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VV(t,e,n){const r=Es(t);await Zc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",SV)}async function BC(t,e,n){if(Yn(t.app))return Promise.reject(wr(t));const r=Es(t),o=await Zc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bV).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&qC(t),l}),a=await ai._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function LV(t,e,n){return Yn(t.app)?Promise.reject(wr(t)):MV(We(t),Uo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FV(t,e){return ar(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=We(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await wo(r,FV(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function UV(t,e,n,r){return We(t).onIdTokenChanged(e,n,r)}function OV(t,e,n){return We(t).beforeAuthStateChanged(e,n)}function qV(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}function Yg(t){return We(t).signOut()}const td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(td,"1"),this.storage.removeItem(td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(){const t=vt();return Wg(t)||Bd(t)}const jV=1e3,GV=10;class $C extends GC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=BV()&&sV(),this.fallbackToPolling=DC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);rV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,GV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},jV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$C.type="LOCAL";const $V=$C;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC extends GC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zC.type="SESSION";const HC=zC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Gd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await zV(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Qg("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function WV(t){er().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function KV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YV(){return WC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="firebaseLocalStorageDb",QV=1,nd="firebaseLocalStorage",JC="fbase_key";class Kl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $d(t,e){return t.transaction([nd],e?"readwrite":"readonly").objectStore(nd)}function XV(){const t=indexedDB.deleteDatabase(KC);return new Kl(t).toPromise()}function Wp(){const t=indexedDB.open(KC,QV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nd,{keyPath:JC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nd)?e(r):(r.close(),await XV(),e(await Wp()))})})}async function W_(t,e,n){const r=$d(t,!0).put({[JC]:e,value:n});return new Kl(r).toPromise()}async function ZV(t,e){const n=$d(t,!1).get(e),r=await new Kl(n).toPromise();return r===void 0?null:r.value}function K_(t,e){const n=$d(t,!0).delete(e);return new Kl(n).toPromise()}const eL=800,tL=3;class YC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>tL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gd._getInstance(YV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await KV(),!this.activeServiceWorker)return;this.sender=new HV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wp();return await W_(e,td,"1"),await K_(e,td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>W_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>K_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=$d(s,!1).getAll();return new Kl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YC.type="LOCAL";const nL=YC;new zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t,e){return e?_r(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends Kg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sL(t){return OC(t.auth,new Xg(t),t.bypassAuthState)}function iL(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),DV(n,new Xg(t),t.bypassAuthState)}async function oL(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),kV(n,new Xg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sL;case"linkViaPopup":case"linkViaRedirect":return oL;case"reauthViaPopup":case"reauthViaRedirect":return iL;default:qn(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=new zl(2e3,1e4);class zi extends QC{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,zi.currentPopupAction&&zi.currentPopupAction.cancel(),zi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=Qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aL.get())};e()}}zi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL="pendingRedirect",hc=new Map;class uL extends QC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hc.get(this.auth._key());if(!e){try{const r=await cL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hc.set(this.auth._key(),e)}return this.bypassAuthState||hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cL(t,e){const n=hL(e),r=fL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function dL(t,e){hc.set(t._key(),e)}function fL(t){return _r(t._redirectPersistence)}function hL(t){return fc(lL,t.config.apiKey,t.name)}async function pL(t,e,n=!1){if(Yn(t.app))return Promise.reject(wr(t));const r=Es(t),s=rL(r,e),o=await new uL(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=10*60*1e3;class gL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mL&&this.cachedEventUids.clear(),this.cachedEventUids.has(J_(e))}saveEventToCache(e){this.cachedEventUids.add(J_(e)),this.lastProcessedEventTime=Date.now()}}function J_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vL(t,e={}){return ar(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xL=/^https?/;async function wL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vL(t);for(const n of e)try{if(TL(n))return}catch{}qn(t,"unauthorized-domain")}function TL(t){const e=zp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xL.test(n))return!1;if(_L.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new zl(3e4,6e4);function Y_(){const t=er().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IL(t){return new Promise((e,n)=>{var r,s,i;function o(){Y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y_(),n(Zn(t,"network-request-failed"))},timeout:EL.get()})}if(!((s=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=er().gapi)===null||i===void 0)&&i.load)o();else{const a=hV("iframefcb");return er()[a]=()=>{gapi.load?o():n(Zn(t,"network-request-failed"))},VC(`${fV()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw pc=null,e})}let pc=null;function SL(t){return pc=pc||IL(t),pc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=new zl(5e3,15e3),AL="__/auth/iframe",NL="emulator/auth/iframe",PL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bL(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zg(e,NL):`https://${t.config.authDomain}/${AL}`,r={apiKey:e.apiKey,appName:t.name,v:Fo},s=RL.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${$l(r).slice(1)}`}async function kL(t){const e=await SL(t),n=er().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:bL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Zn(t,"network-request-failed"),a=er().setTimeout(()=>{i(o)},CL.get());function l(){er().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ML=500,VL=600,LL="_blank",FL="http://localhost";class Q_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UL(t,e,n,r=ML,s=VL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},DL),{width:r.toString(),height:s.toString(),top:i,left:o}),u=vt().toLowerCase();n&&(a=NC(u)?LL:n),AC(u)&&(e=e||FL,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[v,w])=>`${g}${v}=${w},`,"");if(nV(u)&&a!=="_self")return OL(e||"",a),new Q_(null);const m=window.open(e||"",a,d);le(m,t,"popup-blocked");try{m.focus()}catch{}return new Q_(m)}function OL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL="__/auth/handler",BL="emulator/auth/handler",jL=encodeURIComponent("fac");async function X_(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fo,eventId:s};if(e instanceof FC){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",TD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof Wl){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${jL}=${encodeURIComponent(l)}`:"";return`${GL(t)}?${$l(a).slice(1)}${u}`}function GL({config:t}){return t.emulator?zg(t,BL):`https://${t.authDomain}/${qL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="webStorageSupport";class $L{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HC,this._completeRedirectFn=pL,this._overrideRedirectResult=dL}async _openPopup(e,n,r,s){var i;Ar((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await X_(e,n,r,zp(),s);return UL(e,o,Qg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await X_(e,n,r,zp(),s);return WV(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kL(e),r=new gL(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mh,{type:mh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[mh];o!==void 0&&n(!!o),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return DC()||Wg()||Bd()}}const zL=$L;var Z_="@firebase/auth",ex="1.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KL(t){ir(new On("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MC(t)},u=new uV(r,s,i,l);return vV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ir(new On("auth-internal",e=>{const n=Es(e.getProvider("auth").getImmediate());return(r=>new HL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_n(Z_,ex,WL(t)),_n(Z_,ex,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=5*60,YL=uC("authIdTokenMaxAge")||JL;let tx=null;const QL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YL)return;const s=n==null?void 0:n.token;tx!==s&&(tx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ZC(t=jg()){const e=gi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yV(t,{popupRedirectResolver:zL,persistence:[nL,$V,HC]}),r=uC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=QL(i.toString());OV(n,o,()=>o(n.currentUser)),UV(n,a=>o(a))}}const s=aC("auth");return s&&_V(n,`http://${s}`),n}function XL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Zn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",XL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KL("Browser");var nx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qs,eA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,T){function A(){}A.prototype=T.prototype,I.D=T.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(P,k,D){for(var b=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)b[Ie-2]=arguments[Ie];return T.prototype[k].apply(P,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,T,A){A||(A=0);var P=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)P[k]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(k=0;16>k;++k)P[k]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=I.g[0],A=I.g[1],k=I.g[2];var D=I.g[3],b=T+(D^A&(k^D))+P[0]+3614090360&4294967295;T=A+(b<<7&4294967295|b>>>25),b=D+(k^T&(A^k))+P[1]+3905402710&4294967295,D=T+(b<<12&4294967295|b>>>20),b=k+(A^D&(T^A))+P[2]+606105819&4294967295,k=D+(b<<17&4294967295|b>>>15),b=A+(T^k&(D^T))+P[3]+3250441966&4294967295,A=k+(b<<22&4294967295|b>>>10),b=T+(D^A&(k^D))+P[4]+4118548399&4294967295,T=A+(b<<7&4294967295|b>>>25),b=D+(k^T&(A^k))+P[5]+1200080426&4294967295,D=T+(b<<12&4294967295|b>>>20),b=k+(A^D&(T^A))+P[6]+2821735955&4294967295,k=D+(b<<17&4294967295|b>>>15),b=A+(T^k&(D^T))+P[7]+4249261313&4294967295,A=k+(b<<22&4294967295|b>>>10),b=T+(D^A&(k^D))+P[8]+1770035416&4294967295,T=A+(b<<7&4294967295|b>>>25),b=D+(k^T&(A^k))+P[9]+2336552879&4294967295,D=T+(b<<12&4294967295|b>>>20),b=k+(A^D&(T^A))+P[10]+4294925233&4294967295,k=D+(b<<17&4294967295|b>>>15),b=A+(T^k&(D^T))+P[11]+2304563134&4294967295,A=k+(b<<22&4294967295|b>>>10),b=T+(D^A&(k^D))+P[12]+1804603682&4294967295,T=A+(b<<7&4294967295|b>>>25),b=D+(k^T&(A^k))+P[13]+4254626195&4294967295,D=T+(b<<12&4294967295|b>>>20),b=k+(A^D&(T^A))+P[14]+2792965006&4294967295,k=D+(b<<17&4294967295|b>>>15),b=A+(T^k&(D^T))+P[15]+1236535329&4294967295,A=k+(b<<22&4294967295|b>>>10),b=T+(k^D&(A^k))+P[1]+4129170786&4294967295,T=A+(b<<5&4294967295|b>>>27),b=D+(A^k&(T^A))+P[6]+3225465664&4294967295,D=T+(b<<9&4294967295|b>>>23),b=k+(T^A&(D^T))+P[11]+643717713&4294967295,k=D+(b<<14&4294967295|b>>>18),b=A+(D^T&(k^D))+P[0]+3921069994&4294967295,A=k+(b<<20&4294967295|b>>>12),b=T+(k^D&(A^k))+P[5]+3593408605&4294967295,T=A+(b<<5&4294967295|b>>>27),b=D+(A^k&(T^A))+P[10]+38016083&4294967295,D=T+(b<<9&4294967295|b>>>23),b=k+(T^A&(D^T))+P[15]+3634488961&4294967295,k=D+(b<<14&4294967295|b>>>18),b=A+(D^T&(k^D))+P[4]+3889429448&4294967295,A=k+(b<<20&4294967295|b>>>12),b=T+(k^D&(A^k))+P[9]+568446438&4294967295,T=A+(b<<5&4294967295|b>>>27),b=D+(A^k&(T^A))+P[14]+3275163606&4294967295,D=T+(b<<9&4294967295|b>>>23),b=k+(T^A&(D^T))+P[3]+4107603335&4294967295,k=D+(b<<14&4294967295|b>>>18),b=A+(D^T&(k^D))+P[8]+1163531501&4294967295,A=k+(b<<20&4294967295|b>>>12),b=T+(k^D&(A^k))+P[13]+2850285829&4294967295,T=A+(b<<5&4294967295|b>>>27),b=D+(A^k&(T^A))+P[2]+4243563512&4294967295,D=T+(b<<9&4294967295|b>>>23),b=k+(T^A&(D^T))+P[7]+1735328473&4294967295,k=D+(b<<14&4294967295|b>>>18),b=A+(D^T&(k^D))+P[12]+2368359562&4294967295,A=k+(b<<20&4294967295|b>>>12),b=T+(A^k^D)+P[5]+4294588738&4294967295,T=A+(b<<4&4294967295|b>>>28),b=D+(T^A^k)+P[8]+2272392833&4294967295,D=T+(b<<11&4294967295|b>>>21),b=k+(D^T^A)+P[11]+1839030562&4294967295,k=D+(b<<16&4294967295|b>>>16),b=A+(k^D^T)+P[14]+4259657740&4294967295,A=k+(b<<23&4294967295|b>>>9),b=T+(A^k^D)+P[1]+2763975236&4294967295,T=A+(b<<4&4294967295|b>>>28),b=D+(T^A^k)+P[4]+1272893353&4294967295,D=T+(b<<11&4294967295|b>>>21),b=k+(D^T^A)+P[7]+4139469664&4294967295,k=D+(b<<16&4294967295|b>>>16),b=A+(k^D^T)+P[10]+3200236656&4294967295,A=k+(b<<23&4294967295|b>>>9),b=T+(A^k^D)+P[13]+681279174&4294967295,T=A+(b<<4&4294967295|b>>>28),b=D+(T^A^k)+P[0]+3936430074&4294967295,D=T+(b<<11&4294967295|b>>>21),b=k+(D^T^A)+P[3]+3572445317&4294967295,k=D+(b<<16&4294967295|b>>>16),b=A+(k^D^T)+P[6]+76029189&4294967295,A=k+(b<<23&4294967295|b>>>9),b=T+(A^k^D)+P[9]+3654602809&4294967295,T=A+(b<<4&4294967295|b>>>28),b=D+(T^A^k)+P[12]+3873151461&4294967295,D=T+(b<<11&4294967295|b>>>21),b=k+(D^T^A)+P[15]+530742520&4294967295,k=D+(b<<16&4294967295|b>>>16),b=A+(k^D^T)+P[2]+3299628645&4294967295,A=k+(b<<23&4294967295|b>>>9),b=T+(k^(A|~D))+P[0]+4096336452&4294967295,T=A+(b<<6&4294967295|b>>>26),b=D+(A^(T|~k))+P[7]+1126891415&4294967295,D=T+(b<<10&4294967295|b>>>22),b=k+(T^(D|~A))+P[14]+2878612391&4294967295,k=D+(b<<15&4294967295|b>>>17),b=A+(D^(k|~T))+P[5]+4237533241&4294967295,A=k+(b<<21&4294967295|b>>>11),b=T+(k^(A|~D))+P[12]+1700485571&4294967295,T=A+(b<<6&4294967295|b>>>26),b=D+(A^(T|~k))+P[3]+2399980690&4294967295,D=T+(b<<10&4294967295|b>>>22),b=k+(T^(D|~A))+P[10]+4293915773&4294967295,k=D+(b<<15&4294967295|b>>>17),b=A+(D^(k|~T))+P[1]+2240044497&4294967295,A=k+(b<<21&4294967295|b>>>11),b=T+(k^(A|~D))+P[8]+1873313359&4294967295,T=A+(b<<6&4294967295|b>>>26),b=D+(A^(T|~k))+P[15]+4264355552&4294967295,D=T+(b<<10&4294967295|b>>>22),b=k+(T^(D|~A))+P[6]+2734768916&4294967295,k=D+(b<<15&4294967295|b>>>17),b=A+(D^(k|~T))+P[13]+1309151649&4294967295,A=k+(b<<21&4294967295|b>>>11),b=T+(k^(A|~D))+P[4]+4149444226&4294967295,T=A+(b<<6&4294967295|b>>>26),b=D+(A^(T|~k))+P[11]+3174756917&4294967295,D=T+(b<<10&4294967295|b>>>22),b=k+(T^(D|~A))+P[2]+718787259&4294967295,k=D+(b<<15&4294967295|b>>>17),b=A+(D^(k|~T))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+T&4294967295,I.g[1]=I.g[1]+(k+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,T){T===void 0&&(T=I.length);for(var A=T-this.blockSize,P=this.B,k=this.h,D=0;D<T;){if(k==0)for(;D<=A;)s(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<T;)if(P[k++]=I.charCodeAt(D++),k==this.blockSize){s(this,P),k=0;break}}else for(;D<T;)if(P[k++]=I[D++],k==this.blockSize){s(this,P),k=0;break}}this.h=k,this.o+=T},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var T=1;T<I.length-8;++T)I[T]=0;var A=8*this.o;for(T=I.length-8;T<I.length;++T)I[T]=A&255,A/=256;for(this.u(I),I=Array(16),T=A=0;4>T;++T)for(var P=0;32>P;P+=8)I[A++]=this.g[T]>>>P&255;return I};function i(I,T){var A=a;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=T(I)}function o(I,T){this.h=T;for(var A=[],P=!0,k=I.length-1;0<=k;k--){var D=I[k]|0;P&&D==T||(A[k]=D,P=!1)}this.g=A}var a={};function l(I){return-128<=I&&128>I?i(I,function(T){return new o([T|0],0>T?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return R(u(-I));for(var T=[],A=1,P=0;I>=A;P++)T[P]=I/A|0,A*=4294967296;return new o(T,0)}function d(I,T){if(I.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(I.charAt(0)=="-")return R(d(I.substring(1),T));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(T,8)),P=m,k=0;k<I.length;k+=8){var D=Math.min(8,I.length-k),b=parseInt(I.substring(k,k+D),T);8>D?(D=u(Math.pow(T,D)),P=P.j(D).add(u(b))):(P=P.j(A),P=P.add(u(b)))}return P}var m=l(0),g=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(C(this))return-R(this).m();for(var I=0,T=1,A=0;A<this.g.length;A++){var P=this.i(A);I+=(0<=P?P:4294967296+P)*T,T*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(C(this))return"-"+R(this).toString(I);for(var T=u(Math.pow(I,6)),A=this,P="";;){var k=V(A,T).g;A=E(A,k.j(T));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=k,w(A))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var T=0;T<I.g.length;T++)if(I.g[T]!=0)return!1;return!0}function C(I){return I.h==-1}t.l=function(I){return I=E(this,I),C(I)?-1:w(I)?0:1};function R(I){for(var T=I.g.length,A=[],P=0;P<T;P++)A[P]=~I.g[P];return new o(A,~I.h).add(g)}t.abs=function(){return C(this)?R(this):this},t.add=function(I){for(var T=Math.max(this.g.length,I.g.length),A=[],P=0,k=0;k<=T;k++){var D=P+(this.i(k)&65535)+(I.i(k)&65535),b=(D>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);P=b>>>16,D&=65535,b&=65535,A[k]=b<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(I,T){return I.add(R(T))}t.j=function(I){if(w(this)||w(I))return m;if(C(this))return C(I)?R(this).j(R(I)):R(R(this).j(I));if(C(I))return R(this.j(R(I)));if(0>this.l(v)&&0>I.l(v))return u(this.m()*I.m());for(var T=this.g.length+I.g.length,A=[],P=0;P<2*T;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var k=0;k<I.g.length;k++){var D=this.i(P)>>>16,b=this.i(P)&65535,Ie=I.i(k)>>>16,Me=I.i(k)&65535;A[2*P+2*k]+=b*Me,x(A,2*P+2*k),A[2*P+2*k+1]+=D*Me,x(A,2*P+2*k+1),A[2*P+2*k+1]+=b*Ie,x(A,2*P+2*k+1),A[2*P+2*k+2]+=D*Ie,x(A,2*P+2*k+2)}for(P=0;P<T;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=T;P<2*T;P++)A[P]=0;return new o(A,0)};function x(I,T){for(;(I[T]&65535)!=I[T];)I[T+1]+=I[T]>>>16,I[T]&=65535,T++}function S(I,T){this.g=I,this.h=T}function V(I,T){if(w(T))throw Error("division by zero");if(w(I))return new S(m,m);if(C(I))return T=V(R(I),T),new S(R(T.g),R(T.h));if(C(T))return T=V(I,R(T)),new S(R(T.g),T.h);if(30<I.g.length){if(C(I)||C(T))throw Error("slowDivide_ only works with positive integers.");for(var A=g,P=T;0>=P.l(I);)A=L(A),P=L(P);var k=F(A,1),D=F(P,1);for(P=F(P,2),A=F(A,2);!w(P);){var b=D.add(P);0>=b.l(I)&&(k=k.add(A),D=b),P=F(P,1),A=F(A,1)}return T=E(I,k.j(T)),new S(k,T)}for(k=m;0<=I.l(T);){for(A=Math.max(1,Math.floor(I.m()/T.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=u(A),b=D.j(T);C(b)||0<b.l(I);)A-=P,D=u(A),b=D.j(T);w(D)&&(D=g),k=k.add(D),I=E(I,b)}return new S(k,I)}t.A=function(I){return V(this,I).h},t.and=function(I){for(var T=Math.max(this.g.length,I.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)&I.i(P);return new o(A,this.h&I.h)},t.or=function(I){for(var T=Math.max(this.g.length,I.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)|I.i(P);return new o(A,this.h|I.h)},t.xor=function(I){for(var T=Math.max(this.g.length,I.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)^I.i(P);return new o(A,this.h^I.h)};function L(I){for(var T=I.g.length+1,A=[],P=0;P<T;P++)A[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o(A,I.h)}function F(I,T){var A=T>>5;T%=32;for(var P=I.g.length-A,k=[],D=0;D<P;D++)k[D]=0<T?I.i(D+A)>>>T|I.i(D+A+1)<<32-T:I.i(D+A);return new o(k,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,eA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Qs=o}).apply(typeof nx<"u"?nx:typeof self<"u"?self:typeof window<"u"?window:{});var Gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tA,nA,Pa,rA,mc,Kp,sA,iA,oA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,_){return f==Array.prototype||f==Object.prototype||(f[y]=_.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gu=="object"&&Gu];for(var y=0;y<f.length;++y){var _=f[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(f,y){if(y)e:{var _=r;f=f.split(".");for(var N=0;N<f.length-1;N++){var U=f[N];if(!(U in _))break e;_=_[U]}f=f[f.length-1],N=_[f],y=y(N),y!=N&&y!=null&&e(_,f,{configurable:!0,writable:!0,value:y})}}function i(f,y){f instanceof String&&(f+="");var _=0,N=!1,U={next:function(){if(!N&&_<f.length){var q=_++;return{value:y(q,f[q]),done:!1}}return N=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}s("Array.prototype.values",function(f){return f||function(){return i(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function u(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function d(f,y,_){return f.call.apply(f.bind,arguments)}function m(f,y,_){if(!f)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,N),f.apply(y,U)}}return function(){return f.apply(y,arguments)}}function g(f,y,_){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,g.apply(null,arguments)}function v(f,y){var _=Array.prototype.slice.call(arguments,1);return function(){var N=_.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function w(f,y){function _(){}_.prototype=y.prototype,f.aa=y.prototype,f.prototype=new _,f.prototype.constructor=f,f.Qb=function(N,U,q){for(var H=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)H[Se-2]=arguments[Se];return y.prototype[U].apply(N,H)}}function C(f){const y=f.length;if(0<y){const _=Array(y);for(let N=0;N<y;N++)_[N]=f[N];return _}return[]}function R(f,y){for(let _=1;_<arguments.length;_++){const N=arguments[_];if(l(N)){const U=f.length||0,q=N.length||0;f.length=U+q;for(let H=0;H<q;H++)f[U+H]=N[H]}else f.push(N)}}class E{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function x(f){return/^[\s\xa0]*$/.test(f)}function S(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function V(f){return V[" "](f),f}V[" "]=function(){};var L=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function F(f,y,_){for(const N in f)y.call(_,f[N],N,f)}function I(f,y){for(const _ in f)y.call(void 0,f[_],_,f)}function T(f){const y={};for(const _ in f)y[_]=f[_];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(f,y){let _,N;for(let U=1;U<arguments.length;U++){N=arguments[U];for(_ in N)f[_]=N[_];for(let q=0;q<A.length;q++)_=A[q],Object.prototype.hasOwnProperty.call(N,_)&&(f[_]=N[_])}}function k(f){var y=1;f=f.split(":");const _=[];for(;0<y&&f.length;)_.push(f.shift()),y--;return f.length&&_.push(f.join(":")),_}function D(f){a.setTimeout(()=>{throw f},0)}function b(){var f=z;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class Ie{constructor(){this.h=this.g=null}add(y,_){const N=Me.get();N.set(y,_),this.h?this.h.next=N:this.g=N,this.h=N}}var Me=new E(()=>new te,f=>f.reset());class te{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let W,O=!1,z=new Ie,B=()=>{const f=a.Promise.resolve(void 0);W=()=>{f.then(Y)}};var Y=()=>{for(var f;f=b();){try{f.h.call(f.g)}catch(_){D(_)}var y=Me;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}O=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const _=()=>{};a.addEventListener("test",_,y),a.removeEventListener("test",_,y)}catch{}return f}();function je(f,y){if(re.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var _=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(L){e:{try{V(y.nodeName);var U=!0;break e}catch{}U=!1}U||(y=null)}}else _=="mouseover"?y=f.fromElement:_=="mouseout"&&(y=f.toElement);this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ge[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&je.aa.h.call(this)}}w(je,re);var Ge={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),cn=0;function Ur(f,y,_,N,U){this.listener=f,this.proxy=null,this.src=y,this.type=_,this.capture=!!N,this.ha=U,this.key=++cn,this.da=this.fa=!1}function Cn(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function kt(f){this.src=f,this.g={},this.h=0}kt.prototype.add=function(f,y,_,N,U){var q=f.toString();f=this.g[q],f||(f=this.g[q]=[],this.h++);var H=Dt(f,y,N,U);return-1<H?(y=f[H],_||(y.fa=!1)):(y=new Ur(y,this.src,q,!!N,U),y.fa=_,f.push(y)),y};function lr(f,y){var _=y.type;if(_ in f.g){var N=f.g[_],U=Array.prototype.indexOf.call(N,y,void 0),q;(q=0<=U)&&Array.prototype.splice.call(N,U,1),q&&(Cn(y),f.g[_].length==0&&(delete f.g[_],f.h--))}}function Dt(f,y,_,N){for(var U=0;U<f.length;++U){var q=f[U];if(!q.da&&q.listener==y&&q.capture==!!_&&q.ha==N)return U}return-1}var $n="closure_lm_"+(1e6*Math.random()|0),An={};function Ns(f,y,_,N,U){if(Array.isArray(y)){for(var q=0;q<y.length;q++)Ns(f,y[q],_,N,U);return null}return _=au(_),f&&f[ve]?f.K(y,_,u(N)?!!N.capture:!1,U):Ps(f,y,_,!1,N,U)}function Ps(f,y,_,N,U,q){if(!y)throw Error("Invalid event type");var H=u(U)?!!U.capture:!!U,Se=Qo(f);if(Se||(f[$n]=Se=new kt(f)),_=Se.add(y,_,N,H,q),_.proxy)return _;if(N=Xt(),_.proxy=N,N.src=f,N.listener=_,f.addEventListener)fe||(U=H),U===void 0&&(U=!1),f.addEventListener(y.toString(),N,U);else if(f.attachEvent)f.attachEvent(Nn(y.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Xt(){function f(_){return y.call(f.src,f.listener,_)}const y=Yo;return f}function ur(f,y,_,N,U){if(Array.isArray(y))for(var q=0;q<y.length;q++)ur(f,y[q],_,N,U);else N=u(N)?!!N.capture:!!N,_=au(_),f&&f[ve]?(f=f.i,y=String(y).toString(),y in f.g&&(q=f.g[y],_=Dt(q,_,N,U),-1<_&&(Cn(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete f.g[y],f.h--)))):f&&(f=Qo(f))&&(y=f.g[y.toString()],f=-1,y&&(f=Dt(y,_,N,U)),(_=-1<f?y[f]:null)&&zn(_))}function zn(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[ve])lr(y.i,f);else{var _=f.type,N=f.proxy;y.removeEventListener?y.removeEventListener(_,N,f.capture):y.detachEvent?y.detachEvent(Nn(_),N):y.addListener&&y.removeListener&&y.removeListener(N),(_=Qo(y))?(lr(_,f),_.h==0&&(_.src=null,y[$n]=null)):Cn(f)}}}function Nn(f){return f in An?An[f]:An[f]="on"+f}function Yo(f,y){if(f.da)f=!0;else{y=new je(y,this);var _=f.listener,N=f.ha||f.src;f.fa&&zn(f),f=_.call(N,y)}return f}function Qo(f){return f=f[$n],f instanceof kt?f:null}var wi="__closure_events_fn_"+(1e9*Math.random()>>>0);function au(f){return typeof f=="function"?f:(f[wi]||(f[wi]=function(y){return f.handleEvent(y)}),f[wi])}function tt(){ee.call(this),this.i=new kt(this),this.M=this,this.F=null}w(tt,ee),tt.prototype[ve]=!0,tt.prototype.removeEventListener=function(f,y,_,N){ur(this,f,y,_,N)};function ut(f,y){var _,N=f.F;if(N)for(_=[];N;N=N.F)_.push(N);if(f=f.M,N=y.type||y,typeof y=="string")y=new re(y,f);else if(y instanceof re)y.target=y.target||f;else{var U=y;y=new re(N,f),P(y,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var H=y.g=_[q];U=Rs(H,N,!0,y)&&U}if(H=y.g=f,U=Rs(H,N,!0,y)&&U,U=Rs(H,N,!1,y)&&U,_)for(q=0;q<_.length;q++)H=y.g=_[q],U=Rs(H,N,!1,y)&&U}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var _=f.g[y],N=0;N<_.length;N++)Cn(_[N]);delete f.g[y],f.h--}}this.F=null},tt.prototype.K=function(f,y,_,N){return this.i.add(String(f),y,!1,_,N)},tt.prototype.L=function(f,y,_,N){return this.i.add(String(f),y,!0,_,N)};function Rs(f,y,_,N){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var U=!0,q=0;q<y.length;++q){var H=y[q];if(H&&!H.da&&H.capture==_){var Se=H.listener,ct=H.ha||H.src;H.fa&&lr(f.i,H),U=Se.call(ct,N)!==!1&&U}}return U&&!N.defaultPrevented}function lu(f,y,_){if(typeof f=="function")_&&(f=g(f,_));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function uu(f){f.g=lu(()=>{f.g=null,f.i&&(f.i=!1,uu(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class cu extends ee{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:uu(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Or(f){ee.call(this),this.h=f,this.g={}}w(Or,ee);var Ti=[];function Ei(f){F(f.g,function(y,_){this.g.hasOwnProperty(_)&&zn(y)},f),f.g={}}Or.prototype.N=function(){Or.aa.N.call(this),Ei(this)},Or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ot=a.JSON.stringify,Rv=a.JSON.parse,If=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function ie(){}ie.prototype.h=null;function oe(f){return f.h||(f.h=f.i())}function _e(){}var Zt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qt(){re.call(this,"d")}w(qt,re);function dn(){re.call(this,"c")}w(dn,re);var Hn={},Xo=null;function bs(){return Xo=Xo||new tt}Hn.La="serverreachability";function du(f){re.call(this,Hn.La,f)}w(du,re);function ks(f){const y=bs();ut(y,new du(y))}Hn.STAT_EVENT="statevent";function Zo(f,y){re.call(this,Hn.STAT_EVENT,f),this.stat=y}w(Zo,re);function Je(f){const y=bs();ut(y,new Zo(y,f))}Hn.Ma="timingevent";function bv(f,y){re.call(this,Hn.Ma,f),this.size=y}w(bv,re);function ea(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function ta(){this.g=!0}ta.prototype.xa=function(){this.g=!1};function lb(f,y,_,N,U,q){f.info(function(){if(f.g)if(q)for(var H="",Se=q.split("&"),ct=0;ct<Se.length;ct++){var xe=Se[ct].split("=");if(1<xe.length){var _t=xe[0];xe=xe[1];var xt=_t.split("_");H=2<=xt.length&&xt[1]=="type"?H+(_t+"="+xe+"&"):H+(_t+"=redacted&")}}else H=null;else H=q;return"XMLHTTP REQ ("+N+") [attempt "+U+"]: "+y+`
`+_+`
`+H})}function ub(f,y,_,N,U,q,H){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+U+"]: "+y+`
`+_+`
`+q+" "+H})}function Ii(f,y,_,N){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+db(f,_)+(N?" "+N:"")})}function cb(f,y){f.info(function(){return"TIMEOUT: "+y})}ta.prototype.info=function(){};function db(f,y){if(!f.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(f=0;f<_.length;f++)if(Array.isArray(_[f])){var N=_[f];if(!(2>N.length)){var U=N[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var H=1;H<U.length;H++)U[H]=""}}}}return Ot(_)}catch{return y}}var fu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sf;function hu(){}w(hu,ie),hu.prototype.g=function(){return new XMLHttpRequest},hu.prototype.i=function(){return{}},Sf=new hu;function qr(f,y,_,N){this.j=f,this.i=y,this.l=_,this.R=N||1,this.U=new Or(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dv}function Dv(){this.i=null,this.g="",this.h=!1}var Mv={},Cf={};function Af(f,y,_){f.L=1,f.v=yu(cr(y)),f.m=_,f.P=!0,Vv(f,null)}function Vv(f,y){f.F=Date.now(),pu(f),f.A=cr(f.v);var _=f.A,N=f.R;Array.isArray(N)||(N=[String(N)]),Jv(_.i,"t",N),f.C=0,_=f.j.J,f.h=new Dv,f.g=h0(f.j,_?y:null,!f.m),0<f.O&&(f.M=new cu(g(f.Y,f,f.g),f.O)),y=f.U,_=f.g,N=f.ca;var U="readystatechange";Array.isArray(U)||(U&&(Ti[0]=U.toString()),U=Ti);for(var q=0;q<U.length;q++){var H=Ns(_,U[q],N||y.handleEvent,!1,y.h||y);if(!H)break;y.g[H.key]=H}y=f.H?T(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),ks(),lb(f.i,f.u,f.A,f.l,f.R,f.m)}qr.prototype.ca=function(f){f=f.target;const y=this.M;y&&dr(f)==3?y.j():this.Y(f)},qr.prototype.Y=function(f){try{if(f==this.g)e:{const xt=dr(this.g);var y=this.g.Ba();const Ai=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||n0(this.g)))){this.J||xt!=4||y==7||(y==8||0>=Ai?ks(3):ks(2)),Nf(this);var _=this.g.Z();this.X=_;t:if(Lv(this)){var N=n0(this.g);f="";var U=N.length,q=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ds(this),na(this);var H="";break t}this.h.i=new a.TextDecoder}for(y=0;y<U;y++)this.h.h=!0,f+=this.h.i.decode(N[y],{stream:!(q&&y==U-1)});N.length=0,this.h.g+=f,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=_==200,ub(this.i,this.u,this.A,this.l,this.R,xt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ct=this.g;if((Se=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Se)){var xe=Se;break t}}xe=null}if(_=xe)Ii(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pf(this,_);else{this.o=!1,this.s=3,Je(12),Ds(this),na(this);break e}}if(this.P){_=!0;let Pn;for(;!this.J&&this.C<H.length;)if(Pn=fb(this,H),Pn==Cf){xt==4&&(this.s=4,Je(14),_=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==Mv){this.s=4,Je(15),Ii(this.i,this.l,H,"[Invalid Chunk]"),_=!1;break}else Ii(this.i,this.l,Pn,null),Pf(this,Pn);if(Lv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||H.length!=0||this.h.h||(this.s=1,Je(16),_=!1),this.o=this.o&&_,!_)Ii(this.i,this.l,H,"[Invalid Chunked Response]"),Ds(this),na(this);else if(0<H.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Vf(_t),_t.M=!0,Je(11))}}else Ii(this.i,this.l,H,null),Pf(this,H);xt==4&&Ds(this),this.o&&!this.J&&(xt==4?u0(this.j,this):(this.o=!1,pu(this)))}else Pb(this.g),_==400&&0<H.indexOf("Unknown SID")?(this.s=3,Je(12)):(this.s=0,Je(13)),Ds(this),na(this)}}}catch{}finally{}};function Lv(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function fb(f,y){var _=f.C,N=y.indexOf(`
`,_);return N==-1?Cf:(_=Number(y.substring(_,N)),isNaN(_)?Mv:(N+=1,N+_>y.length?Cf:(y=y.slice(N,N+_),f.C=N+_,y)))}qr.prototype.cancel=function(){this.J=!0,Ds(this)};function pu(f){f.S=Date.now()+f.I,Fv(f,f.I)}function Fv(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ea(g(f.ba,f),y)}function Nf(f){f.B&&(a.clearTimeout(f.B),f.B=null)}qr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(cb(this.i,this.A),this.L!=2&&(ks(),Je(17)),Ds(this),this.s=2,na(this)):Fv(this,this.S-f)};function na(f){f.j.G==0||f.J||u0(f.j,f)}function Ds(f){Nf(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,Ei(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function Pf(f,y){try{var _=f.j;if(_.G!=0&&(_.g==f||Rf(_.h,f))){if(!f.K&&Rf(_.h,f)&&_.G==3){try{var N=_.Da.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var U=N;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<f.F)Tu(_),xu(_);else break e;Mf(_),Je(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=ea(g(_.Za,_),6e3));if(1>=qv(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Vs(_,11)}else if((f.K||_.g==f)&&Tu(_),!x(y))for(U=_.Da.g.parse(y),y=0;y<U.length;y++){let xe=U[y];if(_.T=xe[0],xe=xe[1],_.G==2)if(xe[0]=="c"){_.K=xe[1],_.ia=xe[2];const _t=xe[3];_t!=null&&(_.la=_t,_.j.info("VER="+_.la));const xt=xe[4];xt!=null&&(_.Aa=xt,_.j.info("SVER="+_.Aa));const Ai=xe[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(N=1.5*Ai,_.L=N,_.j.info("backChannelRequestTimeoutMs_="+N)),N=_;const Pn=f.g;if(Pn){const Iu=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Iu){var q=N.h;q.g||Iu.indexOf("spdy")==-1&&Iu.indexOf("quic")==-1&&Iu.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(bf(q,q.h),q.h=null))}if(N.D){const Lf=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Lf&&(N.ya=Lf,Ne(N.I,N.D,Lf))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-f.F,_.j.info("Handshake RTT: "+_.R+"ms")),N=_;var H=f;if(N.qa=f0(N,N.J?N.ia:null,N.W),H.K){Bv(N.h,H);var Se=H,ct=N.L;ct&&(Se.I=ct),Se.B&&(Nf(Se),pu(Se)),N.g=H}else a0(N);0<_.i.length&&wu(_)}else xe[0]!="stop"&&xe[0]!="close"||Vs(_,7);else _.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Vs(_,7):Df(_):xe[0]!="noop"&&_.l&&_.l.ta(xe),_.v=0)}}ks(4)}catch{}}var hb=class{constructor(f,y){this.g=f,this.map=y}};function Uv(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ov(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function qv(f){return f.h?1:f.g?f.g.size:0}function Rf(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function bf(f,y){f.g?f.g.add(y):f.h=y}function Bv(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}Uv.prototype.cancel=function(){if(this.i=jv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function jv(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const _ of f.g.values())y=y.concat(_.D);return y}return C(f.i)}function pb(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var y=[],_=f.length,N=0;N<_;N++)y.push(f[N]);return y}y=[],_=0;for(N in f)y[_++]=f[N];return y}function mb(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var y=[];f=f.length;for(var _=0;_<f;_++)y.push(_);return y}y=[],_=0;for(const N in f)y[_++]=N;return y}}}function Gv(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var _=mb(f),N=pb(f),U=N.length,q=0;q<U;q++)y.call(void 0,N[q],_&&_[q],f)}var $v=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gb(f,y){if(f){f=f.split("&");for(var _=0;_<f.length;_++){var N=f[_].indexOf("="),U=null;if(0<=N){var q=f[_].substring(0,N);U=f[_].substring(N+1)}else q=f[_];y(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ms(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ms){this.h=f.h,mu(this,f.j),this.o=f.o,this.g=f.g,gu(this,f.s),this.l=f.l;var y=f.i,_=new ia;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),zv(this,_),this.m=f.m}else f&&(y=String(f).match($v))?(this.h=!1,mu(this,y[1]||"",!0),this.o=ra(y[2]||""),this.g=ra(y[3]||"",!0),gu(this,y[4]),this.l=ra(y[5]||"",!0),zv(this,y[6]||"",!0),this.m=ra(y[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}Ms.prototype.toString=function(){var f=[],y=this.j;y&&f.push(sa(y,Hv,!0),":");var _=this.g;return(_||y=="file")&&(f.push("//"),(y=this.o)&&f.push(sa(y,Hv,!0),"@"),f.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&f.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&f.push("/"),f.push(sa(_,_.charAt(0)=="/"?_b:vb,!0))),(_=this.i.toString())&&f.push("?",_),(_=this.m)&&f.push("#",sa(_,wb)),f.join("")};function cr(f){return new Ms(f)}function mu(f,y,_){f.j=_?ra(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function gu(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function zv(f,y,_){y instanceof ia?(f.i=y,Tb(f.i,f.h)):(_||(y=sa(y,xb)),f.i=new ia(y,f.h))}function Ne(f,y,_){f.i.set(y,_)}function yu(f){return Ne(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ra(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function sa(f,y,_){return typeof f=="string"?(f=encodeURI(f).replace(y,yb),_&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function yb(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Hv=/[#\/\?@]/g,vb=/[#\?:]/g,_b=/[#\?]/g,xb=/[#\?@]/g,wb=/#/g;function ia(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Br(f){f.g||(f.g=new Map,f.h=0,f.i&&gb(f.i,function(y,_){f.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}t=ia.prototype,t.add=function(f,y){Br(this),this.i=null,f=Si(this,f);var _=this.g.get(f);return _||this.g.set(f,_=[]),_.push(y),this.h+=1,this};function Wv(f,y){Br(f),y=Si(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Kv(f,y){return Br(f),y=Si(f,y),f.g.has(y)}t.forEach=function(f,y){Br(this),this.g.forEach(function(_,N){_.forEach(function(U){f.call(y,U,N,this)},this)},this)},t.na=function(){Br(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let N=0;N<y.length;N++){const U=f[N];for(let q=0;q<U.length;q++)_.push(y[N])}return _},t.V=function(f){Br(this);let y=[];if(typeof f=="string")Kv(this,f)&&(y=y.concat(this.g.get(Si(this,f))));else{f=Array.from(this.g.values());for(let _=0;_<f.length;_++)y=y.concat(f[_])}return y},t.set=function(f,y){return Br(this),this.i=null,f=Si(this,f),Kv(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},t.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function Jv(f,y,_){Wv(f,y),0<_.length&&(f.i=null,f.g.set(Si(f,y),C(_)),f.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var N=y[_];const q=encodeURIComponent(String(N)),H=this.V(N);for(N=0;N<H.length;N++){var U=q;H[N]!==""&&(U+="="+encodeURIComponent(String(H[N]))),f.push(U)}}return this.i=f.join("&")};function Si(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function Tb(f,y){y&&!f.j&&(Br(f),f.i=null,f.g.forEach(function(_,N){var U=N.toLowerCase();N!=U&&(Wv(this,N),Jv(this,U,_))},f)),f.j=y}function Eb(f,y){const _=new ta;if(a.Image){const N=new Image;N.onload=v(jr,_,"TestLoadImage: loaded",!0,y,N),N.onerror=v(jr,_,"TestLoadImage: error",!1,y,N),N.onabort=v(jr,_,"TestLoadImage: abort",!1,y,N),N.ontimeout=v(jr,_,"TestLoadImage: timeout",!1,y,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else y(!1)}function Ib(f,y){const _=new ta,N=new AbortController,U=setTimeout(()=>{N.abort(),jr(_,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:N.signal}).then(q=>{clearTimeout(U),q.ok?jr(_,"TestPingServer: ok",!0,y):jr(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),jr(_,"TestPingServer: error",!1,y)})}function jr(f,y,_,N,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),N(_)}catch{}}function Sb(){this.g=new If}function Cb(f,y,_){const N=_||"";try{Gv(f,function(U,q){let H=U;u(U)&&(H=Ot(U)),y.push(N+q+"="+encodeURIComponent(H))})}catch(U){throw y.push(N+"type="+encodeURIComponent("_badmap")),U}}function oa(f){this.l=f.Ub||null,this.j=f.eb||!1}w(oa,ie),oa.prototype.g=function(){return new vu(this.l,this.j)},oa.prototype.i=function(f){return function(){return f}}({});function vu(f,y){tt.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(vu,tt),t=vu.prototype,t.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,la(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,aa(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yv(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yv(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?aa(this):la(this),this.readyState==3&&Yv(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,aa(this))},t.Qa=function(f){this.g&&(this.response=f,aa(this))},t.ga=function(){this.g&&aa(this)};function aa(f){f.readyState=4,f.l=null,f.j=null,f.v=null,la(f)}t.setRequestHeader=function(f,y){this.u.append(f,y)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,f.push(_[0]+": "+_[1]),_=y.next();return f.join(`\r
`)};function la(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(vu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Qv(f){let y="";return F(f,function(_,N){y+=N,y+=":",y+=_,y+=`\r
`}),y}function kf(f,y,_){e:{for(N in _){var N=!1;break e}N=!0}N||(_=Qv(_),typeof f=="string"?_!=null&&encodeURIComponent(String(_)):Ne(f,y,_))}function $e(f){tt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w($e,tt);var Ab=/^https?$/i,Nb=["POST","PUT"];t=$e.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,y,_,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sf.g(),this.v=this.o?oe(this.o):oe(Sf),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(q){Xv(this,q);return}if(f=_||"",_=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var U in N)_.set(U,N[U]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const q of N.keys())_.set(q,N.get(q));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Nb,y,void 0))||N||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,H]of _)this.g.setRequestHeader(q,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{t0(this),this.u=!0,this.g.send(f),this.u=!1}catch(q){Xv(this,q)}};function Xv(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,Zv(f),_u(f)}function Zv(f){f.A||(f.A=!0,ut(f,"complete"),ut(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ut(this,"complete"),ut(this,"abort"),_u(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_u(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?e0(this):this.bb())},t.bb=function(){e0(this)};function e0(f){if(f.h&&typeof o<"u"&&(!f.v[1]||dr(f)!=4||f.Z()!=2)){if(f.u&&dr(f)==4)lu(f.Ea,0,f);else if(ut(f,"readystatechange"),dr(f)==4){f.h=!1;try{const H=f.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var N;if(N=H===0){var U=String(f.D).match($v)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),N=!Ab.test(U?U.toLowerCase():"")}_=N}if(_)ut(f,"complete"),ut(f,"success");else{f.m=6;try{var q=2<dr(f)?f.g.statusText:""}catch{q=""}f.l=q+" ["+f.Z()+"]",Zv(f)}}finally{_u(f)}}}}function _u(f,y){if(f.g){t0(f);const _=f.g,N=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||ut(f,"ready");try{_.onreadystatechange=N}catch{}}}function t0(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function dr(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),Rv(y)}};function n0(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Pb(f){const y={};f=(f.g&&2<=dr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(x(f[N]))continue;var _=k(f[N]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=y[U]||[];y[U]=q,q.push(_)}I(y,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(f,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[f]||y}function r0(f){this.Aa=0,this.i=[],this.j=new ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,f),this.cb=ua("retryDelaySeedMs",1e4,f),this.Wa=ua("forwardChannelMaxRetries",2,f),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Uv(f&&f.concurrentRequestLimit),this.Da=new Sb,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=r0.prototype,t.la=8,t.G=1,t.connect=function(f,y,_,N){Je(0),this.W=f,this.H=y||{},_&&N!==void 0&&(this.H.OSID=_,this.H.OAID=N),this.F=this.X,this.I=f0(this,null,this.W),wu(this)};function Df(f){if(s0(f),f.G==3){var y=f.U++,_=cr(f.I);if(Ne(_,"SID",f.K),Ne(_,"RID",y),Ne(_,"TYPE","terminate"),ca(f,_),y=new qr(f,f.j,y),y.L=2,y.v=yu(cr(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=y.v,_=!0),_||(y.g=h0(y.j,null),y.g.ea(y.v)),y.F=Date.now(),pu(y)}d0(f)}function xu(f){f.g&&(Vf(f),f.g.cancel(),f.g=null)}function s0(f){xu(f),f.u&&(a.clearTimeout(f.u),f.u=null),Tu(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function wu(f){if(!Ov(f.h)&&!f.s){f.s=!0;var y=f.Ga;W||B(),O||(W(),O=!0),z.add(y,f),f.B=0}}function Rb(f,y){return qv(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ea(g(f.Ga,f,y),c0(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const U=new qr(this,this.j,f);let q=this.o;if(this.S&&(q?(q=T(q),P(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var N=this.i[_];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=o0(this,U,y),_=cr(this.I),Ne(_,"RID",f),Ne(_,"CVER",22),this.D&&Ne(_,"X-HTTP-Session-Id",this.D),ca(this,_),q&&(this.O?y="headers="+encodeURIComponent(String(Qv(q)))+"&"+y:this.m&&kf(_,this.m,q)),bf(this.h,U),this.Ua&&Ne(_,"TYPE","init"),this.P?(Ne(_,"$req",y),Ne(_,"SID","null"),U.T=!0,Af(U,_,null)):Af(U,_,y),this.G=2}}else this.G==3&&(f?i0(this,f):this.i.length==0||Ov(this.h)||i0(this))};function i0(f,y){var _;y?_=y.l:_=f.U++;const N=cr(f.I);Ne(N,"SID",f.K),Ne(N,"RID",_),Ne(N,"AID",f.T),ca(f,N),f.m&&f.o&&kf(N,f.m,f.o),_=new qr(f,f.j,_,f.B+1),f.m===null&&(_.H=f.o),y&&(f.i=y.D.concat(f.i)),y=o0(f,_,1e3),_.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),bf(f.h,_),Af(_,N,y)}function ca(f,y){f.H&&F(f.H,function(_,N){Ne(y,N,_)}),f.l&&Gv({},function(_,N){Ne(y,N,_)})}function o0(f,y,_){_=Math.min(f.i.length,_);var N=f.l?g(f.l.Na,f.l,f):null;e:{var U=f.i;let q=-1;for(;;){const H=["count="+_];q==-1?0<_?(q=U[0].g,H.push("ofs="+q)):q=0:H.push("ofs="+q);let Se=!0;for(let ct=0;ct<_;ct++){let xe=U[ct].g;const _t=U[ct].map;if(xe-=q,0>xe)q=Math.max(0,U[ct].g-100),Se=!1;else try{Cb(_t,H,"req"+xe+"_")}catch{N&&N(_t)}}if(Se){N=H.join("&");break e}}}return f=f.i.splice(0,_),y.D=f,N}function a0(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;W||B(),O||(W(),O=!0),z.add(y,f),f.v=0}}function Mf(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ea(g(f.Fa,f),c0(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,l0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ea(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Je(10),xu(this),l0(this))};function Vf(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function l0(f){f.g=new qr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=cr(f.qa);Ne(y,"RID","rpc"),Ne(y,"SID",f.K),Ne(y,"AID",f.T),Ne(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ne(y,"TO",f.ja),Ne(y,"TYPE","xmlhttp"),ca(f,y),f.m&&f.o&&kf(y,f.m,f.o),f.L&&(f.g.I=f.L);var _=f.g;f=f.ia,_.L=1,_.v=yu(cr(y)),_.m=null,_.P=!0,Vv(_,f)}t.Za=function(){this.C!=null&&(this.C=null,xu(this),Mf(this),Je(19))};function Tu(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function u0(f,y){var _=null;if(f.g==y){Tu(f),Vf(f),f.g=null;var N=2}else if(Rf(f.h,y))_=y.D,Bv(f.h,y),N=1;else return;if(f.G!=0){if(y.o)if(N==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var U=f.B;N=bs(),ut(N,new bv(N,_)),wu(f)}else a0(f);else if(U=y.s,U==3||U==0&&0<y.X||!(N==1&&Rb(f,y)||N==2&&Mf(f)))switch(_&&0<_.length&&(y=f.h,y.i=y.i.concat(_)),U){case 1:Vs(f,5);break;case 4:Vs(f,10);break;case 3:Vs(f,6);break;default:Vs(f,2)}}}function c0(f,y){let _=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(_*=2),_*y}function Vs(f,y){if(f.j.info("Error code "+y),y==2){var _=g(f.fb,f),N=f.Xa;const U=!N;N=new Ms(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mu(N,"https"),yu(N),U?Eb(N.toString(),_):Ib(N.toString(),_)}else Je(2);f.G=0,f.l&&f.l.sa(y),d0(f),s0(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function d0(f){if(f.G=0,f.ka=[],f.l){const y=jv(f.h);(y.length!=0||f.i.length!=0)&&(R(f.ka,y),R(f.ka,f.i),f.h.i.length=0,C(f.i),f.i.length=0),f.l.ra()}}function f0(f,y,_){var N=_ instanceof Ms?cr(_):new Ms(_);if(N.g!="")y&&(N.g=y+"."+N.g),gu(N,N.s);else{var U=a.location;N=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;var q=new Ms(null);N&&mu(q,N),y&&(q.g=y),U&&gu(q,U),_&&(q.l=_),N=q}return _=f.D,y=f.ya,_&&y&&Ne(N,_,y),Ne(N,"VER",f.la),ca(f,N),N}function h0(f,y,_){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new $e(new oa({eb:_})):new $e(f.pa),y.Ha(f.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function p0(){}t=p0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Eu(){}Eu.prototype.g=function(f,y){return new en(f,y)};function en(f,y){tt.call(this),this.g=new r0(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!x(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new Ci(this)}w(en,tt),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Df(this.g)},en.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var _={};_.__data__=f,f=_}else this.u&&(_={},_.__data__=Ot(f),f=_);y.i.push(new hb(y.Ya++,f)),y.G==3&&wu(y)},en.prototype.N=function(){this.g.l=null,delete this.j,Df(this.g),delete this.g,en.aa.N.call(this)};function m0(f){qt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const _ in y){f=_;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}w(m0,qt);function g0(){dn.call(this),this.status=1}w(g0,dn);function Ci(f){this.g=f}w(Ci,p0),Ci.prototype.ua=function(){ut(this.g,"a")},Ci.prototype.ta=function(f){ut(this.g,new m0(f))},Ci.prototype.sa=function(f){ut(this.g,new g0)},Ci.prototype.ra=function(){ut(this.g,"b")},Eu.prototype.createWebChannel=Eu.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,oA=function(){return new Eu},iA=function(){return bs()},sA=Hn,Kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fu.NO_ERROR=0,fu.TIMEOUT=8,fu.HTTP_ERROR=6,mc=fu,kv.COMPLETE="complete",rA=kv,_e.EventType=Zt,Zt.OPEN="a",Zt.CLOSE="b",Zt.ERROR="c",Zt.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Pa=_e,nA=oa,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,tA=$e}).apply(typeof Gu<"u"?Gu:typeof self<"u"?self:typeof window<"u"?window:{});const rx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="10.12.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new qd("@firebase/firestore");function _a(){return li.logLevel}function Z(t,...e){if(li.logLevel<=me.DEBUG){const n=e.map(Zg);li.debug(`Firestore (${Oo}): ${t}`,...n)}}function Nr(t,...e){if(li.logLevel<=me.ERROR){const n=e.map(Zg);li.error(`Firestore (${Oo}): ${t}`,...n)}}function To(t,...e){if(li.logLevel<=me.WARN){const n=e.map(Zg);li.warn(`Firestore (${Oo}): ${t}`,...n)}}function Zg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t="Unexpected state"){const e=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: `+t;throw Nr(e),new Error(e)}function Ae(t,e){t||ue()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class e2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class t2{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new aA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new It(e)}}class n2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class r2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new n2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new s2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=o2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function Eo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new it(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new it(0,0))}static max(){return new ce(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Sl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ke extends Sl{construct(e,n,r){return new ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const a2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends Sl{construct(e,n,r){return new pt(e,n,r)}static isValidIdentifier(e){return a2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new J(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new J(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(n)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(ke.fromString(e))}static fromName(e){return new ne(ke.fromString(e).popFirst(5))}static empty(){return new ne(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new ke(e.slice()))}}function l2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new ms(s,ne.empty(),e)}function u2(t){return new ms(t.readTime,t.key,-1)}class ms{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ms(ce.min(),ne.empty(),-1)}static max(){return new ms(ce.max(),ne.empty(),-1)}}function c2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==d2)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function h2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ey.oe=-1;function zd(t){return t==null}function rd(t){return t===0&&1/t==-1/0}function p2(t){return typeof t=="number"&&Number.isInteger(t)&&!rd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $u(this.root,e,this.comparator,!1)}getReverseIterator(){return new $u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $u(this.root,e,this.comparator,!0)}}class $u{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ht.RED,this.left=s??ht.EMPTY,this.right=i??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ht(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ht.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ix(this.data.getIterator())}getIteratorFrom(e){return new ix(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class ix{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new rn([])}unionWith(e){let n=new gt(pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new cA("Invalid base64 string: "+i):i}}(e);return new bt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const m2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gs(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=m2.exec(t);if(Ae(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ui(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ny(t){const e=t.mapValue.fields.__previous_value__;return ty(e)?ny(e):e}function Cl(t){const e=gs(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Al{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Al("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu={mapValue:{}};function ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ty(t)?4:y2(t)?9007199254740991:10:ue()}function or(t,e){if(t===e)return!0;const n=ci(t);if(n!==ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cl(t).isEqual(Cl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=gs(s.timestampValue),a=gs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ui(s.bytesValue).isEqual(ui(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Xe(s.geoPointValue.latitude)===Xe(i.geoPointValue.latitude)&&Xe(s.geoPointValue.longitude)===Xe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Xe(s.integerValue)===Xe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Xe(s.doubleValue),a=Xe(i.doubleValue);return o===a?rd(o)===rd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Eo(t.arrayValue.values||[],e.arrayValue.values||[],or);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(sx(o)!==sx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!or(o[l],a[l])))return!1;return!0}(t,e);default:return ue()}}function Nl(t,e){return(t.values||[]).find(n=>or(n,e))!==void 0}function Io(t,e){if(t===e)return 0;const n=ci(t),r=ci(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Xe(i.integerValue||i.doubleValue),l=Xe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return ox(t.timestampValue,e.timestampValue);case 4:return ox(Cl(t),Cl(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ui(i),l=ui(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Te(a[u],l[u]);if(d!==0)return d}return Te(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Te(Xe(i.latitude),Xe(o.latitude));return a!==0?a:Te(Xe(i.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const d=Io(a[u],l[u]);if(d)return d}return Te(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===zu.mapValue&&o===zu.mapValue)return 0;if(i===zu.mapValue)return 1;if(o===zu.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let m=0;m<l.length&&m<d.length;++m){const g=Te(l[m],d[m]);if(g!==0)return g;const v=Io(a[l[m]],u[d[m]]);if(v!==0)return v}return Te(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ue()}}function ox(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=gs(t),r=gs(e),s=Te(n.seconds,r.seconds);return s!==0?s:Te(n.nanos,r.nanos)}function So(t){return Jp(t)}function Jp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ui(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Jp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Jp(n.fields[o])}`;return s+"}"}(t.mapValue):ue()}function ax(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yp(t){return!!t&&"integerValue"in t}function ry(t){return!!t&&"arrayValue"in t}function lx(t){return!!t&&"nullValue"in t}function ux(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gc(t){return!!t&&"mapValue"in t}function Ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return yi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function y2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(n)}setAll(e){let n=pt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ha(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());gc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){yi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new jt(Ha(this.value))}}function dA(t){const e=[];return yi(t.fields,(n,r)=>{const s=new pt([n]);if(gc(r)){const i=dA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ct(e,0,ce.min(),ce.min(),ce.min(),jt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ct(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Ct(e,2,n,ce.min(),ce.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new Ct(e,3,n,ce.min(),ce.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n){this.position=e,this.inclusive=n}}function cx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=Io(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function dx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!or(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n="asc"){this.field=e,this.dir=n}}function v2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{}class et extends fA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new x2(e,n,r):n==="array-contains"?new E2(e,r):n==="in"?new I2(e,r):n==="not-in"?new S2(e,r):n==="array-contains-any"?new C2(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new w2(e,r):new T2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Io(n,this.value)):n!==null&&ci(this.value)===ci(n)&&this.matchesComparison(Io(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends fA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Bn(e,n)}matches(e){return hA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function hA(t){return t.op==="and"}function pA(t){return _2(t)&&hA(t)}function _2(t){for(const e of t.filters)if(e instanceof Bn)return!1;return!0}function Qp(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+So(t.value);if(pA(t))return t.filters.map(e=>Qp(e)).join(",");{const e=t.filters.map(n=>Qp(n)).join(",");return`${t.op}(${e})`}}function mA(t,e){return t instanceof et?function(r,s){return s instanceof et&&r.op===s.op&&r.field.isEqual(s.field)&&or(r.value,s.value)}(t,e):t instanceof Bn?function(r,s){return s instanceof Bn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&mA(o,s.filters[a]),!0):!1}(t,e):void ue()}function gA(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${So(n.value)}`}(t):t instanceof Bn?function(n){return n.op.toString()+" {"+n.getFilters().map(gA).join(" ,")+"}"}(t):"Filter"}class x2 extends et{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class w2 extends et{constructor(e,n){super(e,"in",n),this.keys=yA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class T2 extends et{constructor(e,n){super(e,"not-in",n),this.keys=yA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class E2 extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ry(n)&&Nl(n.arrayValue,this.value)}}class I2 extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nl(this.value.arrayValue,n)}}class S2 extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Nl(this.value.arrayValue,n)}}class C2 extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ry(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Nl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function fx(t,e=null,n=[],r=[],s=null,i=null,o=null){return new A2(t,e,n,r,s,i,o)}function sy(t){const e=de(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),zd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>So(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>So(r)).join(",")),e.ue=n}return e.ue}function iy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!v2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dx(t.startAt,e.startAt)&&dx(t.endAt,e.endAt)}function Xp(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function N2(t,e,n,r,s,i,o,a){return new qo(t,e,n,r,s,i,o,a)}function Hd(t){return new qo(t)}function hx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vA(t){return t.collectionGroup!==null}function Wa(t){const e=de(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new gt(pt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Pl(i,r))}),n.has(pt.keyField().canonicalString())||e.ce.push(new Pl(pt.keyField(),r))}return e.ce}function tr(t){const e=de(t);return e.le||(e.le=P2(e,Wa(t))),e.le}function P2(t,e){if(t.limitType==="F")return fx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Pl(s.field,i)});const n=t.endAt?new sd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new sd(t.startAt.position,t.startAt.inclusive):null;return fx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zp(t,e){const n=t.filters.concat([e]);return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function em(t,e,n){return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wd(t,e){return iy(tr(t),tr(e))&&t.limitType===e.limitType}function _A(t){return`${sy(tr(t))}|lt:${t.limitType}`}function Pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>gA(s)).join(", ")}]`),zd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>So(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>So(s)).join(",")),`Target(${r})`}(tr(t))}; limitType=${t.limitType})`}function Kd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Wa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=cx(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Wa(r),s)||r.endAt&&!function(o,a,l){const u=cx(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Wa(r),s))}(t,e)}function R2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xA(t){return(e,n)=>{let r=!1;for(const s of Wa(t)){const i=b2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function b2(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Io(l,u):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){yi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return uA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=new Be(ne.comparator);function Pr(){return k2}const wA=new Be(ne.comparator);function Ra(...t){let e=wA;for(const n of t)e=e.insert(n.key,n);return e}function TA(t){let e=wA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zs(){return Ka()}function EA(){return Ka()}function Ka(){return new Bo(t=>t.toString(),(t,e)=>t.isEqual(e))}const D2=new Be(ne.comparator),M2=new gt(ne.comparator);function pe(...t){let e=M2;for(const n of t)e=e.add(n);return e}const V2=new gt(Te);function L2(){return V2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rd(e)?"-0":e}}function SA(t){return{integerValue:""+t}}function CA(t,e){return p2(e)?SA(e):IA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(){this._=void 0}}function F2(t,e,n){return t instanceof Rl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ty(i)&&(i=ny(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof bl?NA(t,e):t instanceof kl?PA(t,e):function(s,i){const o=AA(s,i),a=px(o)+px(s.Pe);return Yp(o)&&Yp(s.Pe)?SA(a):IA(s.serializer,a)}(t,e)}function U2(t,e,n){return t instanceof bl?NA(t,e):t instanceof kl?PA(t,e):n}function AA(t,e){return t instanceof Dl?function(r){return Yp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Rl extends Jd{}class bl extends Jd{constructor(e){super(),this.elements=e}}function NA(t,e){const n=RA(e);for(const r of t.elements)n.some(s=>or(s,r))||n.push(r);return{arrayValue:{values:n}}}class kl extends Jd{constructor(e){super(),this.elements=e}}function PA(t,e){let n=RA(e);for(const r of t.elements)n=n.filter(s=>!or(s,r));return{arrayValue:{values:n}}}class Dl extends Jd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function px(t){return Xe(t.integerValue||t.doubleValue)}function RA(t){return ry(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n){this.field=e,this.transform=n}}function O2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof bl&&s instanceof bl||r instanceof kl&&s instanceof kl?Eo(r.elements,s.elements,or):r instanceof Dl&&s instanceof Dl?or(r.Pe,s.Pe):r instanceof Rl&&s instanceof Rl}(t.transform,e.transform)}class q2{constructor(e,n){this.version=e,this.transformResults=n}}class xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yd{}function kA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new oy(t.key,xn.none()):new Ql(t.key,t.data,xn.none());{const n=t.data,r=jt.empty();let s=new gt(pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Is(t.key,r,new rn(s.toArray()),xn.none())}}function B2(t,e,n){t instanceof Ql?function(s,i,o){const a=s.value.clone(),l=gx(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Is?function(s,i,o){if(!yc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=gx(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(DA(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ja(t,e,n,r){return t instanceof Ql?function(i,o,a,l){if(!yc(i.precondition,o))return a;const u=i.value.clone(),d=yx(i.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Is?function(i,o,a,l){if(!yc(i.precondition,o))return a;const u=yx(i.fieldTransforms,l,o),d=o.data;return d.setAll(DA(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,a){return yc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function j2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=AA(r.transform,s||null);i!=null&&(n===null&&(n=jt.empty()),n.set(r.field,i))}return n||null}function mx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Eo(r,s,(i,o)=>O2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ql extends Yd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Is extends Yd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function DA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gx(t,e,n){const r=new Map;Ae(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,U2(o,a,n[s]))}return r}function yx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,F2(i,o,e))}return r}class oy extends Yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G2 extends Yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&B2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=EA();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=kA(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(n,r)=>mx(n,r))&&Eo(this.baseMutations,e.baseMutations,(n,r)=>mx(n,r))}}class ay{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ae(e.mutations.length===r.length);let s=function(){return D2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ay(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,ge;function W2(t){switch(t){default:return ue();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function MA(t){if(t===void 0)return Nr("GRPC error has no .code"),j.UNKNOWN;switch(t){case Ye.OK:return j.OK;case Ye.CANCELLED:return j.CANCELLED;case Ye.UNKNOWN:return j.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return j.INTERNAL;case Ye.UNAVAILABLE:return j.UNAVAILABLE;case Ye.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Ye.NOT_FOUND:return j.NOT_FOUND;case Ye.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Ye.ABORTED:return j.ABORTED;case Ye.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Ye.DATA_LOSS:return j.DATA_LOSS;default:return ue()}}(ge=Ye||(Ye={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new Qs([4294967295,4294967295],0);function vx(t){const e=K2().encode(t),n=new eA;return n.update(e),new Uint8Array(n.digest())}function _x(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qs([n,r],0),new Qs([s,i],0)]}class ly{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ba(`Invalid padding: ${n}`);if(r<0)throw new ba(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ba(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ba(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Qs.fromNumber(r)));return s.compare(J2)===1&&(s=new Qs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=vx(e),[r,s]=_x(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ly(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=vx(e),[r,s]=_x(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qd(ce.min(),s,new Be(Te),Pr(),pe())}}class Xl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xl(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class VA{constructor(e,n){this.targetId=e,this.me=n}}class LA{constructor(e,n,r=bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class xx{constructor(){this.fe=0,this.ge=Tx(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue()}}),new Xl(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=Tx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Y2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pr(),this.qe=wx(),this.Qe=new Be(Te)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Xp(i))if(r===0){const o=new ne(i.path);this.Ue(n,o,Ct.newNoDocument(o,ce.min()))}else Ae(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ui(r).toUint8Array()}catch(l){if(l instanceof cA)return To("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ly(o,s,i)}catch(l){return To(l instanceof ba?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Xp(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ct.newNoDocument(l,e))}i.be&&(n.set(o,i.Ce()),i.ve())}});let r=pe();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Qd(e,n,this.Qe,this.ke,r);return this.ke=Pr(),this.qe=wx(),this.Qe=new Be(Te),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new xx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new gt(Te),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function wx(){return new Be(ne.comparator)}function Tx(){return new Be(ne.comparator)}const Q2={asc:"ASCENDING",desc:"DESCENDING"},X2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z2={and:"AND",or:"OR"};class eF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tm(t,e){return t.useProto3Json||zd(e)?e:{value:e}}function id(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tF(t,e){return id(t,e.toTimestamp())}function nr(t){return Ae(!!t),ce.fromTimestamp(function(n){const r=gs(n);return new it(r.seconds,r.nanos)}(t))}function uy(t,e){return nm(t,e).canonicalString()}function nm(t,e){const n=function(s){return new ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function UA(t){const e=ke.fromString(t);return Ae(GA(e)),e}function rm(t,e){return uy(t.databaseId,e.path)}function gh(t,e){const n=UA(e);if(n.get(1)!==t.databaseId.projectId)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(qA(n))}function OA(t,e){return uy(t.databaseId,e)}function nF(t){const e=UA(t);return e.length===4?ke.emptyPath():qA(e)}function sm(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qA(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ex(t,e,n){return{name:rm(t,e),fields:n.value.mapValue.fields}}function rF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(Ae(d===void 0||typeof d=="string"),bt.fromBase64String(d||"")):(Ae(d===void 0||d instanceof Buffer||d instanceof Uint8Array),bt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?j.UNKNOWN:MA(u.code);return new J(d,u.message||"")}(o);n=new LA(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=gh(t,r.document.name),i=nr(r.document.updateTime),o=r.document.createTime?nr(r.document.createTime):ce.min(),a=new jt({mapValue:{fields:r.document.fields}}),l=Ct.newFoundDocument(s,i,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new vc(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=gh(t,r.document),i=r.readTime?nr(r.readTime):ce.min(),o=Ct.newNoDocument(s,i),a=r.removedTargetIds||[];n=new vc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=gh(t,r.document),i=r.removedTargetIds||[];n=new vc([],i,s,null)}else{if(!("filter"in e))return ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new H2(s,i),a=r.targetId;n=new VA(a,o)}}return n}function sF(t,e){let n;if(e instanceof Ql)n={update:Ex(t,e.key,e.value)};else if(e instanceof oy)n={delete:rm(t,e.key)};else if(e instanceof Is)n={update:Ex(t,e.key,e.data),updateMask:hF(e.fieldMask)};else{if(!(e instanceof G2))return ue();n={verify:rm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Rl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof kl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Dl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:tF(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue()}(t,e.precondition)),n}function iF(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?nr(s.updateTime):nr(i);return o.isEqual(ce.min())&&(o=nr(i)),new q2(o,s.transformResults||[])}(n,e))):[]}function oF(t,e){return{documents:[OA(t,e.path)]}}function aF(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OA(t,s);const i=function(u){if(u.length!==0)return jA(Bn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:Ri(g.field),direction:cF(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=tm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function lF(t){let e=nF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ae(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(m){const g=BA(m);return g instanceof Bn&&pA(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(w){return new Pl(bi(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,zd(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(m){const g=!!m.before,v=m.values||[];return new sd(v,g)}(n.startAt));let u=null;return n.endAt&&(u=function(m){const g=!m.before,v=m.values||[];return new sd(v,g)}(n.endAt)),N2(e,s,o,i,a,"F",l,u)}function uF(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bi(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=bi(n.unaryFilter.field);return et.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bi(n.unaryFilter.field);return et.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bi(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return et.create(bi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bn.create(n.compositeFilter.filters.map(r=>BA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function cF(t){return Q2[t]}function dF(t){return X2[t]}function fF(t){return Z2[t]}function Ri(t){return{fieldPath:t.canonicalString()}}function bi(t){return pt.fromServerFormat(t.fieldPath)}function jA(t){return t instanceof et?function(n){if(n.op==="=="){if(ux(n.value))return{unaryFilter:{field:Ri(n.field),op:"IS_NAN"}};if(lx(n.value))return{unaryFilter:{field:Ri(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ux(n.value))return{unaryFilter:{field:Ri(n.field),op:"IS_NOT_NAN"}};if(lx(n.value))return{unaryFilter:{field:Ri(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ri(n.field),op:dF(n.op),value:n.value}}}(t):t instanceof Bn?function(n){const r=n.getFilters().map(s=>jA(s));return r.length===1?r[0]:{compositeFilter:{op:fF(n.op),filters:r}}}(t):ue()}function hF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.ct=e}}function mF(t){const e=lF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?em(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(){this._n=new yF}addToCollectionParentIndex(e,n){return this._n.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(ms.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class yF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new gt(ke.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new gt(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Co(0)}static Ln(){return new Co(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(){this.changes=new Bo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ja(r.mutation,s,rn.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=zs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ra();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Pr();const o=Ka(),a=function(){return Ka()}();return n.forEach((l,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Is)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Ja(d.mutation,u,d.mutation.getFieldMask(),it.now())):o.set(u.key,rn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var m;return a.set(u,new _F(d,(m=o.get(u))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ka();let s=new Be((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||rn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const m=(s.get(a.batchId)||pe()).add(l);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,m=EA();d.forEach(g=>{if(!i.has(g)){const v=kA(n.get(g),r.get(g));v!==null&&m.set(g,v),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(zs());let a=-1,l=i;return o.next(u=>G.forEach(u,(d,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(d)?G.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,pe())).next(d=>({batchId:a,changes:TA(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=Ra();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ra();return this.indexManager.getCollectionParents(e,i).next(a=>G.forEach(a,l=>{const u=function(m,g){return new qo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ct.newInvalidDocument(d)))});let a=Ra();return o.forEach((l,u)=>{const d=i.get(l);d!==void 0&&Ja(d.mutation,u,rn.empty(),it.now()),Kd(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return G.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nr(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:mF(s.bundledQuery),readTime:nr(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(){this.overlays=new Be(ne.comparator),this.hr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=zs();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=zs(),i=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Be((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=zs(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=zs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=s)););return G.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new z2(n,r));let i=this.hr.get(n);i===void 0&&(i=pe(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(){this.Pr=new gt(ot.Ir),this.Tr=new gt(ot.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new ot(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ot(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ne(new ke([])),r=new ot(n,e),s=new ot(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ne(new ke([])),r=new ot(n,e),s=new ot(n,e+1);let i=pe();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ot(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ot{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ne.comparator(e.key,n.key)||Te(e.pr,n.pr)}static Er(e,n){return Te(e.pr,n.pr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new gt(ot.Ir)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $2(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new ot(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ot(n,0),s=new ot(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gt(Te);return n.forEach(s=>{const i=new ot(s,0),o=new ot(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),G.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new ot(new ne(i),0);let a=new gt(Te);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.pr)),!0)},o),G.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ae(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return G.forEach(n.mutations,s=>{const i=new ot(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new ot(n,0),s=this.wr.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e){this.vr=e,this.docs=function(){return new Be(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Ct.newInvalidDocument(n))}getEntries(e,n){let r=Pr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ct.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Pr();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||c2(u2(d),r)<=0||(s.has(d.key)||Kd(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue()}Fr(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new SF(this)}getSize(e){return G.resolve(this.size)}}class SF extends vF{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e){this.persistence=e,this.Mr=new Bo(n=>sy(n),iy),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Or=0,this.Nr=new cy,this.targetCount=0,this.Lr=Co.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),G.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Co(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.qn(n),G.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,n){this.Br={},this.overlays={},this.kr=new ey(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new CF(this),this.indexManager=new gF,this.remoteDocumentCache=function(s){return new IF(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new pF(n),this.$r=new wF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new EF(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new NF(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return G.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class NF extends f2{constructor(e){super(),this.currentSequenceNumber=e}}class dy{constructor(e){this.persistence=e,this.zr=new cy,this.jr=null}static Hr(e){return new dy(e)}get Jr(){if(this.jr)return this.jr;throw ue()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),G.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Jr,r=>{const s=ne.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return G.or([()=>G.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new fy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return yD()?8:h2(vt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new PF;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(_a()<=me.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),G.resolve()):(_a()<=me.DEBUG&&Z("QueryEngine","Query:",Pi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(_a()<=me.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(n))):G.resolve())}ji(e,n){if(hx(n))return G.resolve(null);let r=tr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=em(n,null,"F"),r=tr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Zi(n,a);return this.Xi(n,u,o,l.readTime)?this.ji(e,em(n,null,"F")):this.es(e,u,n,l)}))})))}Hi(e,n,r,s){return hx(n)||s.isEqual(ce.min())?G.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?G.resolve(null):(_a()<=me.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pi(n)),this.es(e,o,n,l2(s,-1)).next(a=>a))})}Zi(e,n){let r=new gt(xA(e));return n.forEach((s,i)=>{Kd(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return _a()<=me.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Pi(n)),this.zi.getDocumentsMatchingQuery(e,n,ms.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new Be(Te),this.rs=new Bo(i=>sy(i),iy),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function kF(t,e,n,r){return new bF(t,e,n,r)}async function $A(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=pe();for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of i){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})}function DF(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const m=u.batch,g=m.keys();let v=G.resolve();return g.forEach(w=>{v=v.next(()=>d.getEntry(l,w)).next(C=>{const R=u.docVersions.get(w);Ae(R!==null),C.version.compareTo(R)<0&&(m.applyToRemoteDocument(C,u),C.isValidDocument()&&(C.setReadTime(u.commitVersion),d.addEntry(C)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function zA(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function MF(t,e){const n=de(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((d,m)=>{const g=s.get(m);if(!g)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,m)));let v=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(bt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),s=s.insert(m,v),function(C,R,E){return C.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,v,d)&&a.push(n.Qr.updateTargetData(i,v))});let l=Pr(),u=pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(VF(i,o,e.documentUpdates).next(d=>{l=d.cs,u=d.ls})),!r.isEqual(ce.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(m=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return G.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.ns=s,i))}function VF(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Pr();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:s}})}function LF(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FF(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new ts(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function im(t,e,n){const r=de(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Yl(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function Ix(t,e,n){const r=de(t);let s=ce.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const m=de(l),g=m.rs.get(d);return g!==void 0?G.resolve(m.ns.get(g)):m.Qr.getTargetData(u,d)}(r,o,tr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:pe())).next(a=>(UF(r,R2(e),a),{documents:a,hs:i})))}function UF(t,e,n){let r=t.ss.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class Sx{constructor(){this.activeTargetIds=L2()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OF{constructor(){this.no=new Sx,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Sx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu=null;function yh(){return Hu===null?Hu=function(){return 268435456+Math.round(2147483648*Math.random())}():Hu++,"0x"+Hu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class GF extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${s}/databases/${i}`,this.bo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Do(){return!1}Co(n,r,s,i,o){const a=yh(),l=this.vo(n,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,i,o),this.Mo(n,l,u,s).then(d=>(Z("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw To("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}xo(n,r,s,i,o,a){return this.Co(n,r,s,i,o)}Fo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}vo(n,r){const s=BF[n];return`${this.wo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,s){const i=yh();return new Promise((o,a)=>{const l=new tA;l.setWithCredentials(!0),l.listenOnce(rA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case mc.NO_ERROR:const d=l.getResponseJson();Z(Et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case mc.TIMEOUT:Z(Et,`RPC '${e}' ${i} timed out`),a(new J(j.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const m=l.getStatus();if(Z(Et,`RPC '${e}' ${i} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const w=function(R){const E=R.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(E)>=0?E:j.UNKNOWN}(v.status);a(new J(w,v.message))}else a(new J(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new J(j.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{Z(Et,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);Z(Et,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Oo(e,n,r){const s=yh(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oA(),a=iA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new nA({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Z(Et,`Creating RPC '${e}' stream ${s}: ${d}`,l);const m=o.createWebChannel(d,l);let g=!1,v=!1;const w=new jF({lo:R=>{v?Z(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(Z(Et,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Z(Et,`RPC '${e}' stream ${s} sending:`,R),m.send(R))},ho:()=>m.close()}),C=(R,E,x)=>{R.listen(E,S=>{try{x(S)}catch(V){setTimeout(()=>{throw V},0)}})};return C(m,Pa.EventType.OPEN,()=>{v||(Z(Et,`RPC '${e}' stream ${s} transport opened.`),w.mo())}),C(m,Pa.EventType.CLOSE,()=>{v||(v=!0,Z(Et,`RPC '${e}' stream ${s} transport closed`),w.po())}),C(m,Pa.EventType.ERROR,R=>{v||(v=!0,To(Et,`RPC '${e}' stream ${s} transport errored:`,R),w.po(new J(j.UNAVAILABLE,"The operation could not be completed")))}),C(m,Pa.EventType.MESSAGE,R=>{var E;if(!v){const x=R.data[0];Ae(!!x);const S=x,V=S.error||((E=S[0])===null||E===void 0?void 0:E.error);if(V){Z(Et,`RPC '${e}' stream ${s} received error:`,V);const L=V.status;let F=function(A){const P=Ye[A];if(P!==void 0)return MA(P)}(L),I=V.message;F===void 0&&(F=j.INTERNAL,I="Unknown error status: "+L+" with message "+V.message),v=!0,w.po(new J(F,I)),m.close()}else Z(Et,`RPC '${e}' stream ${s} received:`,x),w.yo(x)}}),C(a,sA.STAT_EVENT,R=>{R.stat===Kp.PROXY?Z(Et,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Kp.NOPROXY&&Z(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.fo()},0),w}}function vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t){return new eF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=s,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.Go=r,this.zo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new HA(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Nr(n.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.jo===n&&this.u_(r,s)},r=>{e(()=>{const s=new J(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(s)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(s=>{r(()=>this.c_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $F extends WA{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=rF(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?nr(o.readTime):ce.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=sm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Xp(l)?{documents:oF(i,l)}:{query:aF(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FA(i,o.resumeToken);const u=tm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=id(i,o.snapshotVersion.toTimestamp());const u=tm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=uF(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=sm(this.serializer),n.removeTarget=e,this.i_(n)}}class zF extends WA{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=iF(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.A_(r,n)}return Ae(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=sm(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sF(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.m_=!1}f_(){if(this.m_)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(e,nm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(j.UNKNOWN,i.toString())})}xo(e,n,r,s,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,nm(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(j.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class WF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Nr(n),this.y_=!1):Z("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io(o=>{r.enqueueAndForget(async()=>{vi(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=de(l);u.M_.add(4),await Zl(u),u.N_.set("Unknown"),u.M_.delete(4),await Zd(u)}(this))})}),this.N_=new WF(r,s)}}async function Zd(t){if(vi(t))for(const e of t.x_)await e(!0)}async function Zl(t){for(const e of t.x_)await e(!1)}function KA(t,e){const n=de(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),gy(n)?my(n):jo(n).Xo()&&py(n,e))}function hy(t,e){const n=de(t),r=jo(n);n.F_.delete(e),r.Xo()&&JA(n,e),n.F_.size===0&&(r.Xo()?r.n_():vi(n)&&n.N_.set("Unknown"))}function py(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jo(t).P_(e)}function JA(t,e){t.L_.xe(e),jo(t).I_(e)}function my(t){t.L_=new Y2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),jo(t).start(),t.N_.w_()}function gy(t){return vi(t)&&!jo(t).Zo()&&t.F_.size>0}function vi(t){return de(t).M_.size===0}function YA(t){t.L_=void 0}async function JF(t){t.N_.set("Online")}async function YF(t){t.F_.forEach((e,n)=>{py(t,e)})}async function QF(t,e){YA(t),gy(t)?(t.N_.D_(e),my(t)):t.N_.set("Unknown")}async function XF(t,e,n){if(t.N_.set("Online"),e instanceof LA&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.F_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.F_.delete(a),s.L_.removeTarget(a))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await od(t,r)}else if(e instanceof vc?t.L_.Ke(e):e instanceof VA?t.L_.He(e):t.L_.We(e),!n.isEqual(ce.min()))try{const r=await zA(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.L_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.F_.get(u);d&&i.F_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=i.F_.get(l);if(!d)return;i.F_.set(l,d.withResumeToken(bt.EMPTY_BYTE_STRING,d.snapshotVersion)),JA(i,l);const m=new ts(d.target,l,u,d.sequenceNumber);py(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await od(t,r)}}async function od(t,e,n){if(!Yl(e))throw e;t.M_.add(1),await Zl(t),t.N_.set("Offline"),n||(n=()=>zA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Zd(t)})}function QA(t,e){return e().catch(n=>od(t,n,e))}async function ef(t){const e=de(t),n=ys(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;ZF(e);)try{const s=await LF(e.localStore,r);if(s===null){e.v_.length===0&&n.n_();break}r=s.batchId,eU(e,s)}catch(s){await od(e,s)}XA(e)&&ZA(e)}function ZF(t){return vi(t)&&t.v_.length<10}function eU(t,e){t.v_.push(e);const n=ys(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function XA(t){return vi(t)&&!ys(t).Zo()&&t.v_.length>0}function ZA(t){ys(t).start()}async function tU(t){ys(t).V_()}async function nU(t){const e=ys(t);for(const n of t.v_)e.d_(n.mutations)}async function rU(t,e,n){const r=t.v_.shift(),s=ay.from(r,e,n);await QA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ef(t)}async function sU(t,e){e&&ys(t).E_&&await async function(r,s){if(function(o){return W2(o)&&o!==j.ABORTED}(s.code)){const i=r.v_.shift();ys(r).t_(),await QA(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ef(r)}}(t,e),XA(t)&&ZA(t)}async function Ax(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=vi(n);n.M_.add(3),await Zl(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Zd(n)}async function iU(t,e){const n=de(t);e?(n.M_.delete(2),await Zd(n)):e||(n.M_.add(2),await Zl(n),n.N_.set("Unknown"))}function jo(t){return t.B_||(t.B_=function(n,r,s){const i=de(n);return i.f_(),new $F(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:JF.bind(null,t),To:YF.bind(null,t),Ao:QF.bind(null,t),h_:XF.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),gy(t)?my(t):t.N_.set("Unknown")):(await t.B_.stop(),YA(t))})),t.B_}function ys(t){return t.k_||(t.k_=function(n,r,s){const i=de(n);return i.f_(),new zF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:tU.bind(null,t),Ao:sU.bind(null,t),R_:nU.bind(null,t),A_:rU.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await ef(t)):(await t.k_.stop(),t.v_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new yy(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vy(t,e){if(Nr("AsyncQueue",`${e}: ${t}`),Yl(t))return new J(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Ra(),this.sortedSet=new Be(this.comparator)}static emptySet(e){return new ao(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ao;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this.q_=new Be(ne.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ue():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ao{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ao(e,n,ao.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class aU{constructor(){this.queries=new Bo(e=>_A(e),Wd),this.onlineState="Unknown",this.z_=new Set}}async function _y(t,e){const n=de(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.W_()&&e.G_()&&(r=2):(i=new oU,r=e.G_()?0:1);try{switch(r){case 0:i.K_=await n.onListen(s,!0);break;case 1:i.K_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=vy(o,`Initialization of query '${Pi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.U_.push(e),e.j_(n.onlineState),i.K_&&e.H_(i.K_)&&wy(n)}async function xy(t,e){const n=de(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.U_.indexOf(e);o>=0&&(i.U_.splice(o,1),i.U_.length===0?s=e.G_()?0:1:!i.W_()&&e.G_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lU(t,e){const n=de(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.U_)a.H_(s)&&(r=!0);o.K_=s}}r&&wy(n)}function uU(t,e,n){const r=de(t),s=r.queries.get(e);if(s)for(const i of s.U_)i.onError(n);r.queries.delete(e)}function wy(t){t.z_.forEach(e=>{e.next()})}var om,Px;(Px=om||(om={})).J_="default",Px.Cache="cache";class Ty{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.key=e}}class tN{constructor(e){this.key=e}}class cU{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=pe(),this.mutatedKeys=pe(),this.Ia=xA(e),this.Ta=new ao(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new Nx,s=n?n.Ta:this.Ta;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const g=s.get(d),v=Kd(this.query,m)?m:null,w=!!g&&this.mutatedKeys.has(g.key),C=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let R=!1;g&&v?g.data.isEqual(v.data)?w!==C&&(r.track({type:3,doc:v}),R=!0):this.Ra(g,v)||(r.track({type:2,doc:v}),R=!0,(l&&this.Ia(v,l)>0||u&&this.Ia(v,u)<0)&&(a=!0)):!g&&v?(r.track({type:0,doc:v}),R=!0):g&&!v&&(r.track({type:1,doc:g}),R=!0,(l||u)&&(a=!0)),R&&(v?(o=o.add(v),i=C?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:i}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((d,m)=>function(v,w){const C=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return C(v)-C(w)}(d.type,m.type)||this.Ia(d.doc,m.doc)),this.Va(r),s=s!=null&&s;const a=n&&!s?this.ma():[],l=this.Pa.size===0&&this.current&&!s?1:0,u=l!==this.ha;return this.ha=l,o.length!==0||u?{snapshot:new Ao(this.query,e.Ta,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Nx,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=pe(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new tN(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new eN(r))}),n}pa(e){this.la=e.hs,this.Pa=pe();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Ao.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class dU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fU{constructor(e){this.key=e,this.wa=!1}}class hU{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Bo(a=>_A(a),Wd),this.Da=new Map,this.Ca=new Set,this.va=new Be(ne.comparator),this.Fa=new Map,this.Ma=new cy,this.xa={},this.Oa=new Map,this.Na=Co.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function pU(t,e,n=!0){const r=aN(t);let s;const i=r.ba.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ya()):s=await nN(r,e,n,!0),s}async function mU(t,e){const n=aN(t);await nN(n,e,!0,!1)}async function nN(t,e,n,r){const s=await FF(t.localStore,tr(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await gU(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&KA(t.remoteStore,s),a}async function gU(t,e,n,r,s){t.Ba=(m,g,v)=>async function(C,R,E,x){let S=R.view.da(E);S.Xi&&(S=await Ix(C.localStore,R.query,!1).then(({documents:I})=>R.view.da(I,S)));const V=x&&x.targetChanges.get(R.targetId),L=x&&x.targetMismatches.get(R.targetId)!=null,F=R.view.applyChanges(S,C.isPrimaryClient,V,L);return bx(C,R.targetId,F.fa),F.snapshot}(t,m,g,v);const i=await Ix(t.localStore,e,!0),o=new cU(e,i.hs),a=o.da(i.documents),l=Xl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);bx(t,n,u.fa);const d=new dU(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot}async function yU(t,e,n){const r=de(t),s=r.ba.get(e),i=r.Da.get(s.targetId);if(i.length>1)return r.Da.set(s.targetId,i.filter(o=>!Wd(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await im(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&hy(r.remoteStore,s.targetId),am(r,s.targetId)}).catch(Jl)):(am(r,s.targetId),await im(r.localStore,s.targetId,!0))}async function vU(t,e){const n=de(t),r=n.ba.get(e),s=n.Da.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hy(n.remoteStore,r.targetId))}async function _U(t,e,n){const r=CU(t);try{const s=await function(o,a){const l=de(o),u=it.now(),d=a.reduce((v,w)=>v.add(w.key),pe());let m,g;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=Pr(),C=pe();return l.os.getEntries(v,d).next(R=>{w=R,w.forEach((E,x)=>{x.isValidDocument()||(C=C.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,w)).next(R=>{m=R;const E=[];for(const x of a){const S=j2(x,m.get(x.key).overlayedDocument);S!=null&&E.push(new Is(x.key,S,dA(S.value.mapValue),xn.exists(!0)))}return l.mutationQueue.addMutationBatch(v,u,E,a)}).next(R=>{g=R;const E=R.applyToLocalDocumentSet(m,C);return l.documentOverlayCache.saveOverlays(v,R.batchId,E)})}).then(()=>({batchId:g.batchId,changes:TA(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.xa[o.currentUser.toKey()];u||(u=new Be(Te)),u=u.insert(a,l),o.xa[o.currentUser.toKey()]=u}(r,s.batchId,n),await eu(r,s.changes),await ef(r.remoteStore)}catch(s){const i=vy(s,"Failed to persist write");n.reject(i)}}async function rN(t,e){const n=de(t);try{const r=await MF(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Fa.get(i);o&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.wa=!0:s.modifiedDocuments.size>0?Ae(o.wa):s.removedDocuments.size>0&&(Ae(o.wa),o.wa=!1))}),await eu(n,r,e)}catch(r){await Jl(r)}}function Rx(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ba.forEach((i,o)=>{const a=o.view.j_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=de(o);l.onlineState=a;let u=!1;l.queries.forEach((d,m)=>{for(const g of m.U_)g.j_(a)&&(u=!0)}),u&&wy(l)}(r.eventManager,e),s.length&&r.Sa.h_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xU(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Fa.get(e),i=s&&s.key;if(i){let o=new Be(ne.comparator);o=o.insert(i,Ct.newNoDocument(i,ce.min()));const a=pe().add(i),l=new Qd(ce.min(),new Map,new Be(Te),o,a);await rN(r,l),r.va=r.va.remove(i),r.Fa.delete(e),Ey(r)}else await im(r.localStore,e,!1).then(()=>am(r,e,n)).catch(Jl)}async function wU(t,e){const n=de(t),r=e.batch.batchId;try{const s=await DF(n.localStore,e);iN(n,r,null),sN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await eu(n,s)}catch(s){await Jl(s)}}async function TU(t,e,n){const r=de(t);try{const s=await function(o,a){const l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(m=>(Ae(m!==null),d=m.keys(),l.mutationQueue.removeMutationBatch(u,m))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);iN(r,e,n),sN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await eu(r,s)}catch(s){await Jl(s)}}function sN(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function iN(t,e,n){const r=de(t);let s=r.xa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.xa[r.currentUser.toKey()]=s}}function am(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||oN(t,r)})}function oN(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(hy(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Ey(t))}function bx(t,e,n){for(const r of n)r instanceof eN?(t.Ma.addReference(r.key,e),EU(t,r)):r instanceof tN?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||oN(t,r.key)):ue()}function EU(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Ey(t))}function Ey(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new ne(ke.fromString(e)),r=t.Na.next();t.Fa.set(r,new fU(n)),t.va=t.va.insert(n,r),KA(t.remoteStore,new ts(tr(Hd(n.path)),r,"TargetPurposeLimboResolution",ey.oe))}}async function eu(t,e,n){const r=de(t),s=[],i=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){s.push(u);const d=fy.Ki(l.targetId,u);i.push(d)}}))}),await Promise.all(o),r.Sa.h_(s),await async function(l,u){const d=de(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>G.forEach(u,g=>G.forEach(g.qi,v=>d.persistence.referenceDelegate.addReference(m,g.targetId,v)).next(()=>G.forEach(g.Qi,v=>d.persistence.referenceDelegate.removeReference(m,g.targetId,v)))))}catch(m){if(!Yl(m))throw m;Z("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const g=m.targetId;if(!m.fromCache){const v=d.ns.get(g),w=v.snapshotVersion,C=v.withLastLimboFreeSnapshotVersion(w);d.ns=d.ns.insert(g,C)}}}(r.localStore,i))}async function IU(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await $A(n.localStore,e);n.currentUser=e,function(i,o){i.Oa.forEach(a=>{a.forEach(l=>{l.reject(new J(j.CANCELLED,o))})}),i.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await eu(n,r.us)}}function SU(t,e){const n=de(t),r=n.Fa.get(e);if(r&&r.wa)return pe().add(r.key);{let s=pe();const i=n.Da.get(e);if(!i)return s;for(const o of i){const a=n.ba.get(o);s=s.unionWith(a.view.Ea)}return s}}function aN(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xU.bind(null,e),e.Sa.h_=lU.bind(null,e.eventManager),e.Sa.ka=uU.bind(null,e.eventManager),e}function CU(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TU.bind(null,e),e}class kx{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Xd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return kF(this.persistence,new RF,e.initialUser,this.serializer)}createPersistence(e){return new AF(dy.Hr,this.serializer)}createSharedClientState(e){return new OF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class AU{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IU.bind(null,this.syncEngine),await iU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aU}()}createDatastore(e){const n=Xd(e.databaseInfo.databaseId),r=function(i){return new GF(i)}(e.databaseInfo);return function(i,o,a,l){return new HF(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new KF(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Rx(this.syncEngine,n,0),function(){return Cx.D()?new Cx:new qF}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,d){const m=new hU(s,i,o,a,l,u);return d&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=de(r);Z("RemoteStore","RemoteStore shutting down."),s.M_.add(5),await Zl(s),s.O_.shutdown(),s.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=It.UNAUTHENTICATED,this.clientId=lA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{Z("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Z("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _h(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $A(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Dx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RU(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ax(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ax(e.remoteStore,s)),t._onlineComponents=e}function PU(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function RU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await _h(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!PU(n))throw n;To("Error using user provided cache. Falling back to memory cache: "+n),await _h(t,new kx)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await _h(t,new kx);return t._offlineComponents}async function lN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Dx(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Dx(t,new AU))),t._onlineComponents}function bU(t){return lN(t).then(e=>e.syncEngine)}async function ad(t){const e=await lN(t),n=e.eventManager;return n.onListen=pU.bind(null,e.syncEngine),n.onUnlisten=yU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vU.bind(null,e.syncEngine),n}function kU(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const d=new Iy({next:g=>{o.enqueueAndForget(()=>xy(i,m));const v=g.docs.has(a);!v&&g.fromCache?u.reject(new J(j.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&l&&l.source==="server"?u.reject(new J(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),m=new Ty(Hd(a.path),d,{includeMetadataChanges:!0,ra:!0});return _y(i,m)}(await ad(t),t.asyncQueue,e,n,r)),r.promise}function DU(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const d=new Iy({next:g=>{o.enqueueAndForget(()=>xy(i,m)),g.fromCache&&l.source==="server"?u.reject(new J(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),m=new Ty(a,d,{includeMetadataChanges:!0,ra:!0});return _y(i,m)}(await ad(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t,e,n){if(!n)throw new J(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MU(t,e,n,r){if(e===!0&&r===!0)throw new J(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vx(t){if(!ne.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Lx(t){if(ne.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function Yt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tf(t);throw new J(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZL;switch(r.type){case"firstParty":return new r2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mx.get(n);r&&(Z("ComponentProvider","Removing Datastore"),Mx.delete(n),r.terminate())}(this),Promise.resolve()}}function VU(t,e,n,r={}){var s;const i=(t=Yt(t,nf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=It.MOCK_USER;else{a=fD(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new J(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new It(u)}t._authCredentials=new e2(new aA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class Pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}}class fs extends Ss{constructor(e,n,r){super(e,n,Hd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new ne(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function LU(t,e,...n){if(t=We(t),cN("collection","path",e),t instanceof nf){const r=ke.fromString(e,...n);return Lx(r),new fs(t,null,r)}{if(!(t instanceof Pt||t instanceof fs))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return Lx(r),new fs(t.firestore,null,r)}}function $t(t,e,...n){if(t=We(t),arguments.length===1&&(e=lA.newId()),cN("doc","path",e),t instanceof nf){const r=ke.fromString(e,...n);return Vx(r),new Pt(t,null,new ne(r))}{if(!(t instanceof Pt||t instanceof fs))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return Vx(r),new Pt(t.firestore,t instanceof fs?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new HA(this,"async_queue_retry"),this.hu=()=>{const n=vh();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=vh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=vh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Tr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Yl(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Nr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const s=yy.createAndSchedule(this,e,n,r,i=>this.Eu(i));return this._u.push(s),s}Pu(){this.au&&ue()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function Ux(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Rr extends nf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new FU}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||dN(this),this._firestoreClient.terminate()}}function UU(t,e){const n=typeof t=="object"?t:jg(),r=typeof t=="string"?t:"(default)",s=gi(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=cD("firestore");i&&VU(s,...i)}return s}function rf(t){return t._firestoreClient||dN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function dN(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,d){return new g2(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,uN(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new NU(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this._byteString=e}static fromBase64String(e){try{return new No(bt.fromBase64String(e))}catch(n){throw new J(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new No(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=/^__.*__$/;class qU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(e,this.data,n,this.fieldTransforms)}}class fN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Is(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function hN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class Cy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Cy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.gu({path:r,yu:!1});return s.wu(e),s}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.gu({path:r,yu:!1});return s.mu(),s}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return ld(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(hN(this.fu)&&OU.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class BU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xd(e)}Fu(e,n,r,s=!1){return new Cy({fu:e,methodName:n,vu:r,path:pt.emptyPath(),yu:!1,Cu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function of(t){const e=t._freezeSettings(),n=Xd(t._databaseId);return new BU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pN(t,e,n,r,s,i={}){const o=t.Fu(i.merge||i.mergeFields?2:0,e,n,s);Py("Data must be an object, but it was:",o,r);const a=mN(r,o);let l,u;if(i.merge)l=new rn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const g=lm(e,m,n);if(!o.contains(g))throw new J(j.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);yN(d,g)||d.push(g)}l=new rn(d),u=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,u=o.fieldTransforms;return new qU(new jt(a),l,u)}class af extends tu{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof af}}class Ay extends tu{_toFieldTransform(e){return new bA(e.path,new Rl)}isEqual(e){return e instanceof Ay}}class Ny extends tu{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){const n=new Dl(e.serializer,CA(e.serializer,this.xu));return new bA(e.path,n)}isEqual(e){return e instanceof Ny&&this.xu===e.xu}}function jU(t,e,n,r){const s=t.Fu(1,e,n);Py("Data must be an object, but it was:",s,r);const i=[],o=jt.empty();yi(r,(l,u)=>{const d=Ry(e,l,n);u=We(u);const m=s.Su(d);if(u instanceof af)i.push(d);else{const g=nu(u,m);g!=null&&(i.push(d),o.set(d,g))}});const a=new rn(i);return new fN(o,a,s.fieldTransforms)}function GU(t,e,n,r,s,i){const o=t.Fu(1,e,n),a=[lm(e,r,n)],l=[s];if(i.length%2!=0)throw new J(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(lm(e,i[g])),l.push(i[g+1]);const u=[],d=jt.empty();for(let g=a.length-1;g>=0;--g)if(!yN(u,a[g])){const v=a[g];let w=l[g];w=We(w);const C=o.Su(v);if(w instanceof af)u.push(v);else{const R=nu(w,C);R!=null&&(u.push(v),d.set(v,R))}}const m=new rn(u);return new fN(d,m,o.fieldTransforms)}function $U(t,e,n,r=!1){return nu(n,t.Fu(r?4:3,e))}function nu(t,e){if(gN(t=We(t)))return Py("Unsupported field value:",e,t),mN(t,e);if(t instanceof tu)return function(r,s){if(!hN(s.fu))throw s.Du(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Du(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=nu(a,s.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=it.fromDate(r);return{timestampValue:id(s.serializer,i)}}if(r instanceof it){const i=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:id(s.serializer,i)}}if(r instanceof Sy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof No)return{bytesValue:FA(s.serializer,r._byteString)};if(r instanceof Pt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:uy(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Du(`Unsupported field value: ${tf(r)}`)}(t,e)}function mN(t,e){const n={};return uA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yi(t,(r,s)=>{const i=nu(s,e.pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function gN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof Sy||t instanceof No||t instanceof Pt||t instanceof tu)}function Py(t,e,n){if(!gN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=tf(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function lm(t,e,n){if((e=We(e))instanceof sf)return e._internalPath;if(typeof e=="string")return Ry(t,e);throw ld("Field path arguments must be of type string or ",t,!1,void 0,n)}const zU=new RegExp("[~\\*/\\[\\]]");function Ry(t,e,n){if(e.search(zU)>=0)throw ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sf(...e.split("."))._internalPath}catch{throw ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ld(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new J(j.INVALID_ARGUMENT,a+t+l)}function yN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HU extends vN{data(){return super.data()}}function lf(t,e){return typeof e=="string"?Ry(t,e):e instanceof sf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class by{}class xN extends by{}function WU(t,e,...n){let r=[];e instanceof by&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof ky).length,a=i.filter(l=>l instanceof uf).length;if(o>1||o>0&&a>0)throw new J(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class uf extends xN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uf(e,n,r)}_apply(e){const n=this._parse(e);return wN(e._query,n),new Ss(e.firestore,e.converter,Zp(e._query,n))}_parse(e){const n=of(e.firestore);return function(i,o,a,l,u,d,m){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new J(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){qx(m,d);const v=[];for(const w of m)v.push(Ox(l,i,w));g={arrayValue:{values:v}}}else g=Ox(l,i,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||qx(m,d),g=$U(a,o,m,d==="in"||d==="not-in");return et.create(u,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function KU(t,e,n){const r=e,s=lf("where",t);return uf._create(s,r,n)}class ky extends by{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ky(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)wN(o,l),o=Zp(o,l)}(e._query,n),new Ss(e.firestore,e.converter,Zp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dy extends xN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dy(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new J(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new J(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pl(i,o)}(e._query,this._field,this._direction);return new Ss(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new qo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ka(t,e="asc"){const n=e,r=lf("orderBy",t);return Dy._create(r,n)}function Ox(t,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new J(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vA(e)&&n.indexOf("/")!==-1)throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ke.fromString(n));if(!ne.isDocumentKey(r))throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ax(t,new ne(r))}if(n instanceof Pt)return ax(t,n._key);throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tf(n)}.`)}function qx(t,e){if(!Array.isArray(t)||t.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wN(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class JU{convertValue(e,n="none"){switch(ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return yi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Sy(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ny(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cl(e));default:return null}}convertTimestamp(e){const n=gs(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ke.fromString(e);Ae(GA(r));const s=new Al(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||Nr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class EN extends vN{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _c extends EN{data(e={}){return super.data(e)}}class IN{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Da(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _c(this._firestore,this._userDataWriter,r.key,r,new Da(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new _c(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new _c(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:YU(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t){t=Yt(t,Pt);const e=Yt(t.firestore,Rr);return kU(rf(e),t._key).then(n=>SN(e,t,n))}class My extends JU{constructor(e){super(),this.firestore=e}convertBytes(e){return new No(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function V8(t){t=Yt(t,Ss);const e=Yt(t.firestore,Rr),n=rf(e),r=new My(e);return _N(t._query),DU(n,t._query).then(s=>new IN(e,r,t,s))}function Po(t,e,n){t=Yt(t,Pt);const r=Yt(t.firestore,Rr),s=TN(t.converter,e,n);return df(r,[pN(of(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xn.none())])}function Ya(t,e,n,...r){t=Yt(t,Pt);const s=Yt(t.firestore,Rr),i=of(s);let o;return o=typeof(e=We(e))=="string"||e instanceof sf?GU(i,"updateDoc",t._key,e,n,r):jU(i,"updateDoc",t._key,e),df(s,[o.toMutation(t._key,xn.exists(!0))])}function QU(t){return df(Yt(t.firestore,Rr),[new oy(t._key,xn.none())])}function XU(t,e){const n=Yt(t.firestore,Rr),r=$t(t),s=TN(t.converter,e);return df(n,[pN(of(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}function Vy(t,...e){var n,r,s;t=We(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ux(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Ux(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let l,u,d;if(t instanceof Pt)u=Yt(t.firestore,Rr),d=Hd(t._key.path),l={next:m=>{e[o]&&e[o](SN(u,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Yt(t,Ss);u=Yt(m.firestore,Rr),d=m._query;const g=new My(u);l={next:v=>{e[o]&&e[o](new IN(u,g,m,v))},error:e[o+1],complete:e[o+2]},_N(t._query)}return function(g,v,w,C){const R=new Iy(C),E=new Ty(v,R,w);return g.asyncQueue.enqueueAndForget(async()=>_y(await ad(g),E)),()=>{R.$a(),g.asyncQueue.enqueueAndForget(async()=>xy(await ad(g),E))}}(rf(u),d,a,l)}function df(t,e){return function(r,s){const i=new Tr;return r.asyncQueue.enqueueAndForget(async()=>_U(await bU(r),s,i)),i.promise}(rf(t),e)}function SN(t,e,n){const r=n.docs.get(e._key),s=new My(t);return new EN(t,s,e._key,r,new Da(n.hasPendingWrites,n.fromCache),e.converter)}function Bx(){return new Ay("serverTimestamp")}function um(t){return new Ny("increment",t)}(function(e,n=!0){(function(s){Oo=s})(Fo),ir(new On("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Rr(new t2(r.getProvider("auth-internal")),new i2(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new J(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(u.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),_n(rx,"4.6.2",e),_n(rx,"4.6.2","esm2017")})();const CN="@firebase/installations",Ly="0.6.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=1e4,NN=`w:${Ly}`,PN="FIS_v2",ZU="https://firebaseinstallations.googleapis.com/v1",eO=60*60*1e3,tO="installations",nO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},di=new mi(tO,nO,rO);function RN(t){return t instanceof jn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN({projectId:t}){return`${ZU}/projects/${t}/installations`}function kN(t){return{token:t.token,requestStatus:2,expiresIn:iO(t.expiresIn),creationTime:Date.now()}}async function DN(t,e){const r=(await e.json()).error;return di.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function MN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function sO(t,{refreshToken:e}){const n=MN(t);return n.append("Authorization",oO(e)),n}async function VN(t){const e=await t();return e.status>=500&&e.status<600?t():e}function iO(t){return Number(t.replace("s","000"))}function oO(t){return`${PN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=bN(t),s=MN(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:PN,appId:t.appId,sdkVersion:NN},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await VN(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:kN(u.authToken)}}else throw await DN("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=/^[cdef][\w-]{21}$/,cm="";function cO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=dO(t);return uO.test(n)?n:cm}catch{return cm}}function dO(t){return lO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new Map;function UN(t,e){const n=ff(t);ON(n,e),fO(n,e)}function ON(t,e){const n=FN.get(t);if(n)for(const r of n)r(e)}function fO(t,e){const n=hO();n&&n.postMessage({key:t,fid:e}),pO()}let Hs=null;function hO(){return!Hs&&"BroadcastChannel"in self&&(Hs=new BroadcastChannel("[Firebase] FID Change"),Hs.onmessage=t=>{ON(t.data.key,t.data.fid)}),Hs}function pO(){FN.size===0&&Hs&&(Hs.close(),Hs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="firebase-installations-database",gO=1,fi="firebase-installations-store";let xh=null;function Fy(){return xh||(xh=mC(mO,gO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(fi)}}})),xh}async function ud(t,e){const n=ff(t),s=(await Fy()).transaction(fi,"readwrite"),i=s.objectStore(fi),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&UN(t,e.fid),e}async function qN(t){const e=ff(t),r=(await Fy()).transaction(fi,"readwrite");await r.objectStore(fi).delete(e),await r.done}async function hf(t,e){const n=ff(t),s=(await Fy()).transaction(fi,"readwrite"),i=s.objectStore(fi),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&UN(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uy(t){let e;const n=await hf(t.appConfig,r=>{const s=yO(r),i=vO(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===cm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function yO(t){const e=t||{fid:cO(),registrationStatus:0};return BN(e)}function vO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(di.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=_O(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:xO(t)}:{installationEntry:e}}async function _O(t,e){try{const n=await aO(t,e);return ud(t.appConfig,n)}catch(n){throw RN(n)&&n.customData.serverCode===409?await qN(t.appConfig):await ud(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function xO(t){let e=await jx(t.appConfig);for(;e.registrationStatus===1;)await LN(100),e=await jx(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Uy(t);return r||n}return e}function jx(t){return hf(t,e=>{if(!e)throw di.create("installation-not-found");return BN(e)})}function BN(t){return wO(t)?{fid:t.fid,registrationStatus:0}:t}function wO(t){return t.registrationStatus===1&&t.registrationTime+AN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO({appConfig:t,heartbeatServiceProvider:e},n){const r=EO(t,n),s=sO(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:NN,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await VN(()=>fetch(r,a));if(l.ok){const u=await l.json();return kN(u)}else throw await DN("Generate Auth Token",l)}function EO(t,{fid:e}){return`${bN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oy(t,e=!1){let n;const r=await hf(t.appConfig,i=>{if(!jN(i))throw di.create("not-registered");const o=i.authToken;if(!e&&CO(o))return i;if(o.requestStatus===1)return n=IO(t,e),i;{if(!navigator.onLine)throw di.create("app-offline");const a=NO(i);return n=SO(t,a),a}});return n?await n:r.authToken}async function IO(t,e){let n=await Gx(t.appConfig);for(;n.authToken.requestStatus===1;)await LN(100),n=await Gx(t.appConfig);const r=n.authToken;return r.requestStatus===0?Oy(t,e):r}function Gx(t){return hf(t,e=>{if(!jN(e))throw di.create("not-registered");const n=e.authToken;return PO(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function SO(t,e){try{const n=await TO(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await ud(t.appConfig,r),n}catch(n){if(RN(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await qN(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ud(t.appConfig,r)}throw n}}function jN(t){return t!==void 0&&t.registrationStatus===2}function CO(t){return t.requestStatus===2&&!AO(t)}function AO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+eO}function NO(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function PO(t){return t.requestStatus===1&&t.requestTime+AN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO(t){const e=t,{installationEntry:n,registrationPromise:r}=await Uy(e);return r?r.catch(console.error):Oy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e=!1){const n=t;return await kO(n),(await Oy(n,e)).token}async function kO(t){const{registrationPromise:e}=await Uy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){if(!t||!t.options)throw wh("App Configuration");if(!t.name)throw wh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw wh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function wh(t){return di.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="installations",MO="installations-internal",VO=t=>{const e=t.getProvider("app").getImmediate(),n=DO(e),r=gi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},LO=t=>{const e=t.getProvider("app").getImmediate(),n=gi(e,GN).getImmediate();return{getId:()=>RO(n),getToken:s=>bO(n,s)}};function FO(){ir(new On(GN,VO,"PUBLIC")),ir(new On(MO,LO,"PRIVATE"))}FO();_n(CN,Ly);_n(CN,Ly,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="analytics",UO="firebase_id",OO="origin",qO=60*1e3,BO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt=new qd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},on=new mi("analytics","Analytics",jO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t){if(!t.startsWith(qy)){const e=on.create("invalid-gtag-resource",{gtagURL:t});return Qt.warn(e.message),""}return t}function $N(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function $O(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function zO(t,e){const n=$O("firebase-js-sdk-policy",{createScriptURL:GO}),r=document.createElement("script"),s=`${qy}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function HO(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function WO(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await $N(n)).find(u=>u.measurementId===s);l&&await e[l.appId]}}catch(a){Qt.error(a)}t("config",s,i)}async function KO(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await $N(n);for(const l of o){const u=a.find(m=>m.measurementId===l),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Qt.error(i)}}function JO(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await KO(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await WO(t,e,n,r,a,l)}else if(i==="consent"){const[a]=o;t("consent","update",a)}else if(i==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Qt.error(a)}}return s}function YO(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=JO(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function QO(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(qy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=30,ZO=1e3;class e4{constructor(e={},n=ZO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const zN=new e4;function t4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function n4(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:t4(r)},i=BO.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw on.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function r4(t,e=zN,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw on.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw on.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new o4;return setTimeout(async()=>{a.abort()},qO),HN({appId:r,apiKey:s,measurementId:i},o,a,e)}async function HN(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=zN){var i;const{appId:o,measurementId:a}=t;try{await s4(r,e)}catch(l){if(a)return Qt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await n4(t);return s.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!i4(u)){if(s.deleteThrottleMetadata(o),a)return Qt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?N_(n,s.intervalMillis,XO):N_(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,m),Qt.debug(`Calling attemptFetch again in ${d} millis`),HN(t,m,r,s)}}function s4(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(on.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function i4(t){if(!(t instanceof jn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class o4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function a4(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l4(){if(dC())try{await fC()}catch(t){return Qt.warn(on.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Qt.warn(on.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function u4(t,e,n,r,s,i,o){var a;const l=r4(t);l.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&Qt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Qt.error(v)),e.push(l);const u=l4().then(v=>{if(v)return r.getId()}),[d,m]=await Promise.all([l,u]);QO(i)||zO(i,d.measurementId),s("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[OO]="firebase",g.update=!0,m!=null&&(g[UO]=m),s("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.app=e}_delete(){return delete Qa[this.app.options.appId],Promise.resolve()}}let Qa={},$x=[];const zx={};let Th="dataLayer",d4="gtag",Hx,WN,Wx=!1;function f4(){const t=[];if(cC()&&t.push("This is a browser extension environment."),vD()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=on.create("invalid-analytics-context",{errorInfo:e});Qt.warn(n.message)}}function h4(t,e,n){f4();const r=t.options.appId;if(!r)throw on.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Qt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw on.create("no-api-key");if(Qa[r]!=null)throw on.create("already-exists",{id:r});if(!Wx){HO(Th);const{wrappedGtag:i,gtagCore:o}=YO(Qa,$x,zx,Th,d4);WN=i,Hx=o,Wx=!0}return Qa[r]=u4(t,$x,zx,e,Hx,Th,n),new c4(t)}function p4(t=jg()){t=We(t);const e=gi(t,cd);return e.isInitialized()?e.getImmediate():m4(t)}function m4(t,e={}){const n=gi(t,cd);if(n.isInitialized()){const s=n.getImmediate();if(Tl(e,n.getOptions()))return s;throw on.create("already-initialized")}return n.initialize({options:e})}function g4(t,e,n,r){t=We(t),a4(WN,Qa[t.app.options.appId],e,n,r).catch(s=>Qt.error(s))}const Kx="@firebase/analytics",Jx="0.10.3";function y4(){ir(new On(cd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return h4(r,s,n)},"PUBLIC")),ir(new On("analytics-internal",t,"PRIVATE")),_n(Kx,Jx),_n(Kx,Jx,"esm2017");function t(e){try{const n=e.getProvider(cd).getImmediate();return{logEvent:(r,s,i)=>g4(n,r,s,i)}}catch(n){throw on.create("interop-component-reg-failed",{reason:n})}}}y4();const Eh={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Ih={};const Ls=(t,e)=>{try{if(typeof process<"u"&&Ih&&Ih[t])return Ih[t];if(typeof import.meta<"u"&&Eh&&Eh[t])return Eh[t]}catch{}return e},dm={apiKey:Ls("VITE_FIREBASE_API_KEY","AIzaSyCxoflM16AOIdWq7ej3B9wkNNXaEXRwQUE"),authDomain:Ls("VITE_FIREBASE_AUTH_DOMAIN","meugasto-e6f64.firebaseapp.com"),projectId:Ls("VITE_FIREBASE_PROJECT_ID","meugasto-e6f64"),storageBucket:Ls("VITE_FIREBASE_STORAGE_BUCKET","meugasto-e6f64.firebasestorage.app"),messagingSenderId:Ls("VITE_FIREBASE_MESSAGING_SENDER_ID","658960757092"),appId:Ls("VITE_FIREBASE_APP_ID","1:658960757092:web:a71bb2185941271f15ca71"),measurementId:Ls("VITE_FIREBASE_MEASUREMENT_ID","G-NC93789KE9")};let xa,mn,zt,v4=null;new pr;let fm=!1,KN=null;try{if(dm.apiKey==="AIzaSyCxoflM16AOIdWq7ej3B9wkNNXaEXRwQUE"&&window.location.hostname==="localhost"&&console.warn(" AVISO: Voc parece estar usando as chaves de API padro/fallback. Para desenvolvimento local, crie um arquivo .env na raiz do projeto com suas credenciais reais (VITE_FIREBASE_...)."),xa=Bg(dm),zt=UU(xa),mn=ZC(xa),typeof window<"u")try{v4=p4(xa)}catch(t){console.warn("Analytics initialization failed:",t)}fm=!0,console.log("Firebase initialized successfully")}catch(t){console.error("Erro crtico ao inicializar Firebase:",t),KN=t,xa={},mn={},zt={}}const ki={Alimentao:["Supermercado","Restaurante","Cafeteria","Delivery / Fast Food","Padaria","Aougue","Feira / Hortifruti","Convenincia","Mercearia","Outros - Alimentao"],Moradia:["Aluguel / Financiamento","Condomnio","Contas (gua, Luz, Gs)","Internet / TV / Telefone","Manuteno / Reparos","Mveis / Decorao","IPTU","Seguro Residencial","Limpeza","Jardinagem","Consertos Domsticos","Outros - Moradia"],Transporte:["Combustvel","Transporte Pblico","Aplicativos (Uber, 99)","Manuteno do Veculo","Estacionamento","Pedgio","Seguro / IPVA","Multas","Lavagem","Txi","Aluguel de Carro","Outros - Transporte"],Lazer:["Cinema / Teatro / Shows","Streaming (Netflix, Spotify)","Bares / Festas","Passeios / Viagens","Livros / Revistas","Jogos","Hobbies","Parques","Eventos Esportivos","Shows / Festivais","Jantares Especiais","Baladas","Outros - Lazer"],Sade:["Farmcia / Medicamentos","Plano de Sade","Consultas / Exames","Academia / Esportes","Terapia","Dentista","culos / Lentes","Massagem","Fisioterapia","Exames Laboratoriais","Outros - Sade"],"Cuidados Pessoais":["Salo / Barbearia","Cosmticos / Perfumes","Massagens","Esttica","Manicure / Pedicure","Produtos de Higiene","Outros - Cuidados Pessoais"],Vesturio:["Roupas","Calados","Acessrios","Lavanderia","Alfaiataria","Joias","Outros - Vesturio"],Educao:["Cursos / Faculdade","Material Escolar","Livros Tcnicos","Idiomas","Ps-Graduao","Workshops","Aulas Particulares","Outros - Educao"],Compras:["Eletrnicos","Presentes","Casa / Jardim","Eletrodomsticos","Roupas de Cama / Banho","Brinquedos","Aparelhos Celulares","Computadores","Outros - Compras"],Servios:["Servios Financeiros / Taxas","Assinaturas","Servios Profissionais","Advogado","Contador","Consultoria","Limpeza Domstica","Conserto de Eletrnicos","Outros - Servios"],"Impostos e Taxas":["Imposto de Renda","IPVA","IPTU","Taxas Bancrias","Licenciamento de Veculo","Outros - Impostos e Taxas"],Investimentos:["Aes","Fundos","Renda Fixa","Criptomoedas","Previdncia Privada","Tesouro Direto","Outros - Investimentos"],"Dvidas e Emprstimos":["Emprstimo Pessoal","Financiamento de Carro","Financiamento Imobilirio","Carto de Crdito (Pagamento Fatura)","Cheque Especial","Consrcio","Outros - Dvidas"],Outros:["Doaes","Pets","Despesa no categorizada","Diversos","Multas / Juros","Seguros (Outros)"]},_4={Salrio:["Mensal","Adiantamento","13 Salrio","Frias"],Empreendedorismo:["Vendas de Produtos","Prestao de Servios","Pr-labore","Lucros"],Investimentos:["Dividendos","Juros sobre Capital","Rendimento Poupana","Aluguis (FIIs)","Criptomoedas"],Extra:["Freelance","Venda de Bens","Cashback","Reembolso","Presente"],Outros:["Outras Receitas"]},JN=ki,Yx=["Carto de Crdito","Carto de Dbito","Dinheiro","Pix","Boleto","Transferncia Bancria","Outro"],Xa={isEnabled:!1,time:"20:00"},Za="https://gravatar.com/avatar/?d=mp",Qx={monthlyPrice:24.9,annualPrice:149.88},Sh=[{level:1,title:"Novato Financeiro",minXp:0,maxXp:500,iconColor:"text-gray-500"},{level:2,title:"Aprendiz da Economia",minXp:501,maxXp:1200,iconColor:"text-green-500"},{level:3,title:"Organizado",minXp:1201,maxXp:2500,iconColor:"text-blue-500"},{level:4,title:"Estrategista",minXp:2501,maxXp:5e3,iconColor:"text-purple-500"},{level:5,title:"Mestre das Finanas",minXp:5001,maxXp:1e4,iconColor:"text-yellow-500"},{level:6,title:"Magnata",minXp:10001,maxXp:1/0,iconColor:"text-indigo-500"}],L8=(t=0)=>Sh.find(e=>t>=e.minXp&&t<=e.maxXp)||Sh[Sh.length-1],x4=async(t,e,n,r)=>{try{if(!t||!e||!n||!r)return{success:!1,message:"Nome, email, senha e celular so obrigatrios."};if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return{success:!1,message:"Formato de email invlido."};if(!/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/.test(n))return{success:!1,message:"A senha deve ter no mnimo 8 caracteres, contendo letras, nmeros e caracteres especiais (@$!%*#?&)."};const i=r.replace(/\D/g,"");if(i.length<10||i.length>11)return{success:!1,message:"Nmero de celular invlido."};const a=(await BC(mn,e,n)).user;await jC(a,{displayName:t});const l=$t(zt,"users",a.uid),u={uid:a.uid,name:t,email:e,phone:`+55${i}`,profileImage:Za,reminderSettings:Xa,role:"user",status:"active",createdAt:new Date().toISOString(),subscriptionExpiresAt:null};return await Po(l,u,{merge:!0}),{success:!0,message:"Cadastro realizado com sucesso!",user:u}}catch(s){console.error("Firebase registration error:",s);let i="Ocorreu um erro durante o cadastro. Tente novamente.";return s.code==="auth/email-already-in-use"?i="Este email j est em uso.":s.code==="auth/invalid-email"?i="Endereo de e-mail invlido.":s.code==="auth/weak-password"&&(i="A senha  muito fraca."),{success:!1,message:i}}},F8=async(t,e,n,r)=>{let s=null;try{s=Bg(dm,"SecondaryApp");const i=ZC(s),a=(await BC(i,e,n)).user;await jC(a,{displayName:t});const l=$t(zt,"users",a.uid),u={uid:a.uid,name:t,email:e,phone:"",profileImage:Za,reminderSettings:Xa,role:r,status:"active",createdAt:new Date().toISOString(),subscriptionExpiresAt:null};return await Po(l,u),await Yg(i),{success:!0,message:"Usurio criado com sucesso!"}}catch(i){console.error("Admin create user error:",i);let o="Erro ao criar usurio.";return i.code==="auth/email-already-in-use"&&(o="Email j est em uso."),i.code==="auth/weak-password"&&(o="Senha muito fraca."),{success:!1,message:o}}finally{s&&await SM(s)}},w4=async(t,e)=>{var n;try{if(!t||!e)return{success:!1,message:"Email e senha so obrigatrios."};const s=(await LV(mn,t,e)).user,i=$t(zt,"users",s.uid),o=await cf(i);let a;if(o.exists()){if(a=o.data(),a.status==="blocked")return await Yg(mn),{success:!1,message:"Sua conta foi bloqueada pelo administrador."}}else a={uid:s.uid,name:s.displayName||((n=s.email)==null?void 0:n.split("@")[0])||"Usurio",email:s.email||"",phone:"",role:"user",status:"active"};return{success:!0,user:a,message:"Login bem-sucedido!"}}catch(r){console.error("Firebase login error:",r);let s="Ocorreu um erro durante o login. Tente novamente.";return r.code==="auth/user-not-found"||r.code==="auth/wrong-password"||r.code==="auth/invalid-credential"?s="Email ou senha invlidos.":r.code==="auth/invalid-email"?s="Endereo de e-mail invlida.":r.code==="auth/network-request-failed"?s="Problema de conexo. Verifique sua internet e tente novamente.":r.code==="auth/too-many-requests"&&(s="Muitas tentativas de login. Tente novamente mais tarde."),{success:!1,message:s}}},hm=async()=>{try{return await Yg(mn),{success:!0,message:"Logout realizado com sucesso!"}}catch(t){return console.error("Firebase logout error:",t),{success:!1,message:"Ocorreu um erro durante o logout. Tente novamente."}}},T4=async t=>{try{return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?(await VV(mn,t),{success:!0,message:"Link de redefinio de senha enviado para o seu e-mail!"}):{success:!1,message:"Formato de e-mail invlido."}:{success:!1,message:"Por favor, insira seu e-mail."}}catch(e){console.error("Firebase password reset error:",e);let n="Ocorreu um erro ao enviar o e-mail de redefinio.";return e.code==="auth/invalid-email"?n="Endereo de e-mail invlido.":e.code==="auth/user-not-found"?n="Nenhum usurio encontrado com este e-mail.":e.code==="auth/network-request-failed"&&(n="Problema de conexo. Verifique sua internet e tente novamente."),{success:!1,message:n}}},se=({iconName:t,className:e})=>p.jsx("span",{className:`material-symbols-outlined ${e}`,children:t}),E4=({className:t})=>p.jsx(se,{iconName:"space_dashboard",className:t}),By=({className:t})=>p.jsx(se,{iconName:"receipt_long",className:t}),I4=({className:t})=>p.jsx(se,{iconName:"bar_chart",className:t}),S4=({className:t})=>p.jsx(se,{iconName:"account_circle",className:t}),jy=({className:t})=>p.jsx(se,{iconName:"add",className:t}),dd=({className:t})=>p.jsx(se,{iconName:"photo_camera",className:t}),Sn=({className:t})=>p.jsx(se,{iconName:"close",className:t}),Xx=({className:t})=>p.jsx(se,{iconName:"delete",className:t}),fd=({className:t})=>p.jsx(se,{iconName:"wallet",className:t}),U8=({className:t})=>p.jsx(se,{iconName:"receipt",className:t}),O8=({className:t})=>p.jsx(se,{iconName:"category",className:t}),Ro=({className:t})=>p.jsx(se,{iconName:"check",className:t}),C4=({className:t})=>p.jsx(se,{iconName:"calculate",className:t}),A4=({className:t})=>p.jsx(se,{iconName:"show_chart",className:t}),q8=({className:t})=>p.jsx(se,{iconName:"calendar_today",className:t}),B8=({className:t})=>p.jsx(se,{iconName:"workspace_premium",className:t}),Zx=({className:t})=>p.jsx(se,{iconName:"notifications",className:t}),YN=({className:t})=>p.jsx(se,{iconName:"chevron_right",className:t}),pm=({className:t})=>p.jsx(se,{iconName:"check_circle",className:t}),N4=({className:t})=>p.jsx(se,{iconName:"logout",className:t}),P4=({className:t})=>p.jsx(se,{iconName:"verified_user",className:t}),pf=({className:t})=>p.jsx(se,{iconName:"auto_awesome",className:t}),j8=({className:t})=>p.jsx(se,{iconName:"trending_up",className:t}),QN=({className:t})=>p.jsx(se,{iconName:"track_changes",className:t}),G8=({className:t})=>p.jsx(se,{iconName:"filter_list",className:t}),$8=({className:t})=>p.jsx(se,{iconName:"search",className:t}),z8=({className:t})=>p.jsx(se,{iconName:"edit",className:t}),H8=({className:t})=>p.jsx(se,{iconName:"attach_money",className:t}),W8=({className:t})=>p.jsx(se,{iconName:"download",className:t}),K8=({className:t})=>p.jsx(se,{iconName:"more_vert",className:t}),J8=({className:t})=>p.jsx(se,{iconName:"policy",className:t}),Y8=({className:t})=>p.jsx(se,{iconName:"description",className:t}),Q8=({className:t})=>p.jsx(se,{iconName:"support_agent",className:t}),X8=({className:t})=>p.jsx(se,{iconName:"admin_panel_settings",className:t}),Z8=({className:t})=>p.jsx(se,{iconName:"group",className:t}),R4=({className:t})=>p.jsx(se,{iconName:"lock",className:t}),eW=({className:t})=>p.jsx(se,{iconName:"lock_open",className:t}),b4=({className:t})=>p.jsx(se,{iconName:"calendar_clock",className:t}),tW=({className:t})=>p.jsx(se,{iconName:"mail",className:t}),nW=({className:t})=>p.jsx(se,{iconName:"key",className:t}),rW=({className:t})=>p.jsx(se,{iconName:"history",className:t}),sW=({className:t})=>p.jsx(se,{iconName:"ios_share",className:t}),iW=({className:t})=>p.jsx(se,{iconName:"install_mobile",className:t}),oW=({className:t})=>p.jsx(se,{iconName:"visibility",className:t}),k4=({className:t})=>p.jsx(se,{iconName:"visibility_off",className:t}),aW=({className:t})=>p.jsx(se,{iconName:"arrow_forward",className:t}),D4=({className:t})=>p.jsx(se,{iconName:"emoji_events",className:t}),lW=({className:t})=>p.jsx(se,{iconName:"star",className:t}),uW=({className:t})=>p.jsx(se,{iconName:"bolt",className:t}),M4=({className:t})=>p.jsx(se,{iconName:"chat_bubble",className:t}),V4=({className:t})=>p.jsx(se,{iconName:"send",className:t}),L4=({id:t,message:e,type:n,onClose:r})=>{const[s,i]=M.useState(!1);M.useEffect(()=>{i(!0)},[]);const o=()=>{i(!1),setTimeout(()=>r(t),300)};let a="bg-blue-500",l="border-blue-700",u="text-white";switch(n){case"success":a="bg-green-500",l="border-green-700";break;case"error":a="bg-red-500",l="border-red-700";break;case"info":default:a="bg-blue-500",l="border-blue-700";break}return p.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-out 
                  ${a} ${l} ${u}
                  ${s?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,role:"alert",children:[p.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),p.jsx("button",{onClick:o,className:"ml-3 text-white opacity-75 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-white rounded-full","aria-label":"Fechar notificao",children:p.jsx(Sn,{className:"text-2xl"})})]})},XN=M.createContext(void 0),F4=({children:t})=>{const[e,n]=M.useState([]),r=5e3,s=M.useCallback((o,a="info")=>{const l=Date.now().toString(),u={id:l,message:o,type:a};n(d=>[...d,u]),setTimeout(()=>{n(d=>d.filter(m=>m.id!==l))},r)},[]),i=M.useCallback(o=>{n(a=>a.filter(l=>l.id!==o))},[]);return p.jsxs(XN.Provider,{value:{showToast:s},children:[t,p.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] space-y-3 max-w-xs w-full",children:e.map(o=>p.jsx(L4,{id:o.id,message:o.message,type:o.type,onClose:i},o.id))})]})},_i=()=>{const t=M.useContext(XN);if(t===void 0)throw new Error("useToast must be used within a ToastProvider");return t},U4=({onLoginSuccess:t,onBack:e,initialView:n})=>{const[r,s]=M.useState(n==="login"),[i,o]=M.useState(!1),[a,l]=M.useState(""),[u,d]=M.useState(""),[m,g]=M.useState(""),[v,w]=M.useState(""),[C,R]=M.useState(""),[E,x]=M.useState(""),[S,V]=M.useState(""),[L,F]=M.useState(!1),[I,T]=M.useState(!1),A=M.useRef(null),{showToast:P}=_i();M.useEffect(()=>{s(n==="login"),o(!1),k()},[n]);const k=()=>{l(""),d(""),g(""),w(""),R(""),x(""),V("")},D=()=>{s(!r),o(!1),k()},b=W=>{const O=W.target.value.replace(/\D/g,"").slice(0,11);let z=O;O.length>7?z=`(${O.slice(0,2)}) ${O.slice(2,7)}-${O.slice(7)}`:O.length>2&&(z=`(${O.slice(0,2)}) ${O.slice(2)}`),R(z)},Ie=()=>{if(x(""),!u||!m&&!i)return x("Email e senha so obrigatrios."),!1;if(!r&&!i){if(!a)return x("Nome  obrigatrio."),!1;if(!C)return x("Celular  obrigatrio."),!1;if(m!==v)return x("As senhas no coincidem."),!1}return!0},Me=async W=>{if(W.preventDefault(),x(""),V(""),F(!0),A.current=setTimeout(()=>{T(!0)},250),!Ie()){F(!1),A.current&&clearTimeout(A.current),T(!1);return}try{if(r&&!i){const O=await w4(u,m);O.success&&O.user?(t(O.user),P("Login realizado com sucesso!","success")):(x(O.message),P(O.message,"error"))}else if(!r&&!i){const O=await x4(a,u,m,C);O.success?(V(O.message+" Por favor, faa o login."),P(O.message+" Agora, faa o login.","success"),s(!0),g(""),w("")):(x(O.message),P(O.message,"error"))}else if(i){const O=await T4(u);O.success?(V(O.message),P(O.message,"success"),d("")):(x(O.message),P(O.message,"error"))}}catch(O){x("Ocorreu um erro. Tente novamente."),P("Ocorreu um erro. Tente novamente.","error"),console.error(O)}finally{A.current&&clearTimeout(A.current),F(!1),T(!1)}},te="w-full px-4 py-3 bg-gray-100 text-gray-800 rounded-lg border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-colors duration-200";return p.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center p-4 relative",children:[p.jsx("div",{className:"absolute top-4 left-4",children:p.jsxs("button",{onClick:e,className:"text-sm text-gray-600 hover:text-blue-600 flex items-center","aria-label":"Voltar para a pgina inicial",children:[p.jsx("span",{className:"material-symbols-outlined mr-1","aria-hidden":"true",children:"arrow_back"}),"Voltar"]})}),p.jsxs("div",{className:"w-full max-w-sm",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-cyan-400 text-transparent bg-clip-text",children:"MeuGasto"}),p.jsx("p",{className:"text-gray-500 mt-1",children:"Seu assistente financeiro pessoal."})]}),p.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center mb-1",children:i?"Redefinir Senha":r?"Login":"Cadastro"}),p.jsx("p",{className:"text-center text-gray-500 mb-6 text-sm",children:i?"Enviaremos um link de redefinio para seu e-mail.":r?"Bem-vindo de volta!":"Crie sua conta para comear."}),E&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-4 text-sm",role:"alert","aria-live":"polite",children:E}),S&&p.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg relative mb-4 text-sm",role:"alert","aria-live":"polite",children:S}),p.jsxs("form",{onSubmit:Me,className:"space-y-4","aria-label":i?"Formulrio de Redefinio de Senha":r?"Formulrio de Login":"Formulrio de Cadastro",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-gray-600 mb-1 block",htmlFor:"email",children:"Email"}),p.jsx("input",{type:"email",id:"email",value:u,onChange:W=>d(W.target.value),className:te,required:!0,autoComplete:"email","aria-required":"true"})]}),!i&&p.jsxs(p.Fragment,{children:[!r&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-gray-600 mb-1 block",htmlFor:"name",children:"Nome"}),p.jsx("input",{type:"text",id:"name",value:a,onChange:W=>l(W.target.value),className:te,required:!0,autoComplete:"name","aria-required":"true"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-gray-600 mb-1 block",htmlFor:"phone",children:"Celular"}),p.jsx("input",{type:"tel",id:"phone",value:C,onChange:b,className:te,required:!0,autoComplete:"tel",placeholder:"(99) 99999-9999",maxLength:15,"aria-required":"true"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-gray-600 mb-1 block",htmlFor:"password",children:"Senha"}),p.jsx("input",{type:"password",id:"password",value:m,onChange:W=>g(W.target.value),className:te,required:!0,autoComplete:r?"current-password":"new-password","aria-required":"true"})]}),!r&&p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-gray-600 mb-1 block",htmlFor:"confirm-password",children:"Confirmar Senha"}),p.jsx("input",{type:"password",id:"confirm-password",value:v,onChange:W=>w(W.target.value),className:te,required:!0,autoComplete:"new-password","aria-required":"true"})]})]}),r&&!i&&p.jsx("div",{className:"text-right",children:p.jsx("button",{type:"button",onClick:()=>o(!0),className:"text-sm text-blue-600 hover:underline","aria-label":"Esqueceu a senha?",children:"Esqueceu a senha?"})}),p.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-300",disabled:L,children:I?p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx("span",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),i?"Enviando...":r?"Entrando...":"Cadastrando..."]}):i?"Redefinir Senha":r?"Entrar":"Cadastrar"})]}),p.jsx("div",{className:"text-center mt-6",children:i?p.jsx("button",{onClick:()=>{o(!1),k()},className:"text-sm text-blue-600 hover:underline","aria-live":"polite",children:"Voltar para o Login"}):p.jsx("button",{onClick:D,className:"text-sm text-blue-600 hover:underline","aria-live":"polite",children:r?"No tem uma conta? Cadastre-se":"J tem uma conta? Entre"})})]})]})]})},Gy=M.createContext({});function $y(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const zy=typeof window<"u",ZN=zy?M.useLayoutEffect:M.useEffect,mf=M.createContext(null);function Hy(t,e){t.indexOf(e)===-1&&t.push(e)}function Wy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const br=(t,e,n)=>n>e?e:n<t?t:n;let Ky=()=>{};const kr={},eP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function tP(t){return typeof t=="object"&&t!==null}const nP=t=>/^0[^.\s]+$/u.test(t);function Jy(t){let e;return()=>(e===void 0&&(e=t()),e)}const wn=t=>t,O4=(t,e)=>n=>e(t(n)),ru=(...t)=>t.reduce(O4),Ml=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Yy{constructor(){this.subscriptions=[]}add(e){return Hy(this.subscriptions,e),()=>Wy(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const rr=t=>t*1e3,yn=t=>t/1e3;function rP(t,e){return e?t*(1e3/e):0}const sP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,q4=1e-7,B4=12;function j4(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=sP(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>q4&&++a<B4);return o}function su(t,e,n,r){if(t===e&&n===r)return wn;const s=i=>j4(i,0,1,t,n);return i=>i===0||i===1?i:sP(s(i),e,r)}const iP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,oP=t=>e=>1-t(1-e),aP=su(.33,1.53,.69,.99),Qy=oP(aP),lP=iP(Qy),uP=t=>(t*=2)<1?.5*Qy(t):.5*(2-Math.pow(2,-10*(t-1))),Xy=t=>1-Math.sin(Math.acos(t)),cP=oP(Xy),dP=iP(Xy),G4=su(.42,0,1,1),$4=su(0,0,.58,1),fP=su(.42,0,.58,1),z4=t=>Array.isArray(t)&&typeof t[0]!="number",hP=t=>Array.isArray(t)&&typeof t[0]=="number",H4={linear:wn,easeIn:G4,easeInOut:fP,easeOut:$4,circIn:Xy,circInOut:dP,circOut:cP,backIn:Qy,backInOut:lP,backOut:aP,anticipate:uP},W4=t=>typeof t=="string",ew=t=>{if(hP(t)){Ky(t.length===4);const[e,n,r,s]=t;return su(e,n,r,s)}else if(W4(t))return H4[t];return t},Wu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function K4(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(d){o.has(d)&&(u.schedule(d),t()),d(a)}const u={schedule:(d,m=!1,g=!1)=>{const w=g&&s?n:r;return m&&o.add(d),w.has(d)||w.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(l),n.clear(),s=!1,i&&(i=!1,u.process(d))}};return u}const J4=40;function pP(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Wu.reduce((S,V)=>(S[V]=K4(i),S),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:d,update:m,preRender:g,render:v,postRender:w}=o,C=()=>{const S=kr.useManualTiming?s.timestamp:performance.now();n=!1,kr.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(S-s.timestamp,J4),1)),s.timestamp=S,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),d.process(s),m.process(s),g.process(s),v.process(s),w.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(C))},R=()=>{n=!0,r=!0,s.isProcessing||t(C)};return{schedule:Wu.reduce((S,V)=>{const L=o[V];return S[V]=(F,I=!1,T=!1)=>(n||R(),L.schedule(F,I,T)),S},{}),cancel:S=>{for(let V=0;V<Wu.length;V++)o[Wu[V]].cancel(S)},state:s,steps:o}}const{schedule:Le,cancel:vs,state:ft,steps:Ch}=pP(typeof requestAnimationFrame<"u"?requestAnimationFrame:wn,!0);let xc;function Y4(){xc=void 0}const Ht={now:()=>(xc===void 0&&Ht.set(ft.isProcessing||kr.useManualTiming?ft.timestamp:performance.now()),xc),set:t=>{xc=t,queueMicrotask(Y4)}},mP=t=>e=>typeof e=="string"&&e.startsWith(t),gP=mP("--"),Q4=mP("var(--"),Zy=t=>Q4(t)?X4.test(t.split("/*")[0].trim()):!1,X4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Go={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vl={...Go,transform:t=>br(0,1,t)},Ku={...Go,default:1},el=t=>Math.round(t*1e5)/1e5,ev=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Z4(t){return t==null}const e5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,tv=(t,e)=>n=>!!(typeof n=="string"&&e5.test(n)&&n.startsWith(t)||e&&!Z4(n)&&Object.prototype.hasOwnProperty.call(n,e)),yP=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(ev);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},t5=t=>br(0,255,t),Ah={...Go,transform:t=>Math.round(t5(t))},Ws={test:tv("rgb","red"),parse:yP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ah.transform(t)+", "+Ah.transform(e)+", "+Ah.transform(n)+", "+el(Vl.transform(r))+")"};function n5(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const mm={test:tv("#"),parse:n5,transform:Ws.transform},iu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),zr=iu("deg"),sr=iu("%"),ae=iu("px"),r5=iu("vh"),s5=iu("vw"),tw={...sr,parse:t=>sr.parse(t)/100,transform:t=>sr.transform(t*100)},Hi={test:tv("hsl","hue"),parse:yP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+sr.transform(el(e))+", "+sr.transform(el(n))+", "+el(Vl.transform(r))+")"},Qe={test:t=>Ws.test(t)||mm.test(t)||Hi.test(t),parse:t=>Ws.test(t)?Ws.parse(t):Hi.test(t)?Hi.parse(t):mm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ws.transform(t):Hi.transform(t),getAnimatableNone:t=>{const e=Qe.parse(t);return e.alpha=0,Qe.transform(e)}},i5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function o5(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ev))==null?void 0:e.length)||0)+(((n=t.match(i5))==null?void 0:n.length)||0)>0}const vP="number",_P="color",a5="var",l5="var(",nw="${}",u5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ll(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(u5,l=>(Qe.test(l)?(r.color.push(i),s.push(_P),n.push(Qe.parse(l))):l.startsWith(l5)?(r.var.push(i),s.push(a5),n.push(l)):(r.number.push(i),s.push(vP),n.push(parseFloat(l))),++i,nw)).split(nw);return{values:n,split:a,indexes:r,types:s}}function xP(t){return Ll(t).values}function wP(t){const{split:e,types:n}=Ll(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===vP?i+=el(s[o]):a===_P?i+=Qe.transform(s[o]):i+=s[o]}return i}}const c5=t=>typeof t=="number"?0:Qe.test(t)?Qe.getAnimatableNone(t):t;function d5(t){const e=xP(t);return wP(t)(e.map(c5))}const _s={test:o5,parse:xP,createTransformer:wP,getAnimatableNone:d5};function Nh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function f5({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Nh(l,a,t+1/3),i=Nh(l,a,t),o=Nh(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function hd(t,e){return n=>n>0?e:t}const Ue=(t,e,n)=>t+(e-t)*n,Ph=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},h5=[mm,Ws,Hi],p5=t=>h5.find(e=>e.test(t));function rw(t){const e=p5(t);if(!e)return!1;let n=e.parse(t);return e===Hi&&(n=f5(n)),n}const sw=(t,e)=>{const n=rw(t),r=rw(e);if(!n||!r)return hd(t,e);const s={...n};return i=>(s.red=Ph(n.red,r.red,i),s.green=Ph(n.green,r.green,i),s.blue=Ph(n.blue,r.blue,i),s.alpha=Ue(n.alpha,r.alpha,i),Ws.transform(s))},gm=new Set(["none","hidden"]);function m5(t,e){return gm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function g5(t,e){return n=>Ue(t,e,n)}function nv(t){return typeof t=="number"?g5:typeof t=="string"?Zy(t)?hd:Qe.test(t)?sw:_5:Array.isArray(t)?TP:typeof t=="object"?Qe.test(t)?sw:y5:hd}function TP(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>nv(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function y5(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=nv(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function v5(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],a=t.values[o]??0;n[s]=a,r[i]++}return n}const _5=(t,e)=>{const n=_s.createTransformer(e),r=Ll(t),s=Ll(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?gm.has(t)&&!s.values.length||gm.has(e)&&!r.values.length?m5(t,e):ru(TP(v5(r,s),s.values),n):hd(t,e)};function EP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ue(t,e,n):nv(t)(t,e)}const x5=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Le.update(e,n),stop:()=>vs(e),now:()=>ft.isProcessing?ft.timestamp:Ht.now()}},IP=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},pd=2e4;function rv(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<pd;)e+=n,r=t.next(e);return e>=pd?1/0:e}function w5(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(rv(r),pd);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:yn(s)}}const T5=5;function SP(t,e,n){const r=Math.max(e-T5,0);return rP(n-t(r),e-r)}const ze={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Rh=.001;function E5({duration:t=ze.duration,bounce:e=ze.bounce,velocity:n=ze.velocity,mass:r=ze.mass}){let s,i,o=1-e;o=br(ze.minDamping,ze.maxDamping,o),t=br(ze.minDuration,ze.maxDuration,yn(t)),o<1?(s=u=>{const d=u*o,m=d*t,g=d-n,v=ym(u,o),w=Math.exp(-m);return Rh-g/v*w},i=u=>{const m=u*o*t,g=m*n+n,v=Math.pow(o,2)*Math.pow(u,2)*t,w=Math.exp(-m),C=ym(Math.pow(u,2),o);return(-s(u)+Rh>0?-1:1)*((g-v)*w)/C}):(s=u=>{const d=Math.exp(-u*t),m=(u-n)*t+1;return-Rh+d*m},i=u=>{const d=Math.exp(-u*t),m=(n-u)*(t*t);return d*m});const a=5/t,l=S5(s,i,a);if(t=rr(t),isNaN(l))return{stiffness:ze.stiffness,damping:ze.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const I5=12;function S5(t,e,n){let r=n;for(let s=1;s<I5;s++)r=r-t(r)/e(r);return r}function ym(t,e){return t*Math.sqrt(1-e*e)}const C5=["duration","bounce"],A5=["stiffness","damping","mass"];function iw(t,e){return e.some(n=>t[n]!==void 0)}function N5(t){let e={velocity:ze.velocity,stiffness:ze.stiffness,damping:ze.damping,mass:ze.mass,isResolvedFromDuration:!1,...t};if(!iw(t,A5)&&iw(t,C5))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*br(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:ze.mass,stiffness:s,damping:i}}else{const n=E5(t);e={...e,...n,mass:ze.mass},e.isResolvedFromDuration=!0}return e}function md(t=ze.visualDuration,e=ze.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:d,duration:m,velocity:g,isResolvedFromDuration:v}=N5({...n,velocity:-yn(n.velocity||0)}),w=g||0,C=u/(2*Math.sqrt(l*d)),R=o-i,E=yn(Math.sqrt(l/d)),x=Math.abs(R)<5;r||(r=x?ze.restSpeed.granular:ze.restSpeed.default),s||(s=x?ze.restDelta.granular:ze.restDelta.default);let S;if(C<1){const L=ym(E,C);S=F=>{const I=Math.exp(-C*E*F);return o-I*((w+C*E*R)/L*Math.sin(L*F)+R*Math.cos(L*F))}}else if(C===1)S=L=>o-Math.exp(-E*L)*(R+(w+E*R)*L);else{const L=E*Math.sqrt(C*C-1);S=F=>{const I=Math.exp(-C*E*F),T=Math.min(L*F,300);return o-I*((w+C*E*R)*Math.sinh(T)+L*R*Math.cosh(T))/L}}const V={calculatedDuration:v&&m||null,next:L=>{const F=S(L);if(v)a.done=L>=m;else{let I=L===0?w:0;C<1&&(I=L===0?rr(w):SP(S,L,F));const T=Math.abs(I)<=r,A=Math.abs(o-F)<=s;a.done=T&&A}return a.value=a.done?o:F,a},toString:()=>{const L=Math.min(rv(V),pd),F=IP(I=>V.next(L*I).value,L,30);return L+"ms "+F},toTransition:()=>{}};return V}md.applyToOptions=t=>{const e=w5(t,100,md);return t.ease=e.ease,t.duration=rr(e.duration),t.type="keyframes",t};function vm({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:d}){const m=t[0],g={done:!1,value:m},v=T=>a!==void 0&&T<a||l!==void 0&&T>l,w=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let C=n*e;const R=m+C,E=o===void 0?R:o(R);E!==R&&(C=E-m);const x=T=>-C*Math.exp(-T/r),S=T=>E+x(T),V=T=>{const A=x(T),P=S(T);g.done=Math.abs(A)<=u,g.value=g.done?E:P};let L,F;const I=T=>{v(g.value)&&(L=T,F=md({keyframes:[g.value,w(g.value)],velocity:SP(S,T,g.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return I(0),{calculatedDuration:null,next:T=>{let A=!1;return!F&&L===void 0&&(A=!0,V(T),I(T)),L!==void 0&&T>=L?F.next(T-L):(!A&&V(T),g)}}}function P5(t,e,n){const r=[],s=n||kr.mix||EP,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||wn:e;a=ru(l,a)}r.push(a)}return r}function R5(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Ky(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=P5(e,r,s),l=a.length,u=d=>{if(o&&d<t[0])return e[0];let m=0;if(l>1)for(;m<t.length-2&&!(d<t[m+1]);m++);const g=Ml(t[m],t[m+1],d);return a[m](g)};return n?d=>u(br(t[0],t[i-1],d)):u}function b5(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ml(0,e,r);t.push(Ue(n,1,s))}}function k5(t){const e=[0];return b5(e,t.length-1),e}function D5(t,e){return t.map(n=>n*e)}function M5(t,e){return t.map(()=>e||fP).splice(0,t.length-1)}function tl({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=z4(r)?r.map(ew):ew(r),i={done:!1,value:e[0]},o=D5(n&&n.length===e.length?n:k5(e),t),a=R5(o,e,{ease:Array.isArray(s)?s:M5(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const V5=t=>t!==null;function sv(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(V5),a=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const L5={decay:vm,inertia:vm,tween:tl,keyframes:tl,spring:md};function CP(t){typeof t.type=="string"&&(t.type=L5[t.type])}class iv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const F5=t=>t/100;class ov extends iv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Ht.now()&&this.tick(Ht.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;CP(e);const{type:n=tl,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const l=n||tl;l!==tl&&typeof a[0]!="number"&&(this.mixKeyframes=ru(F5,EP(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=rv(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:m,repeatType:g,repeatDelay:v,type:w,onUpdate:C,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const E=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?E<0:E>s;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let S=this.currentTime,V=r;if(m){const T=Math.min(this.currentTime,s)/a;let A=Math.floor(T),P=T%1;!P&&T>=1&&(P=1),P===1&&A--,A=Math.min(A,m+1),!!(A%2)&&(g==="reverse"?(P=1-P,v&&(P-=v/a)):g==="mirror"&&(V=o)),S=br(0,1,P)*a}const L=x?{done:!1,value:d[0]}:V.next(S);i&&(L.value=i(L.value));let{done:F}=L;!x&&l!==null&&(F=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return I&&w!==vm&&(L.value=sv(d,this.options,R,this.speed)),C&&C(L.value),I&&this.finish(),L}then(e,n){return this.finished.then(e,n)}get duration(){return yn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+yn(e)}get time(){return yn(this.currentTime)}set time(e){var n;e=rr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ht.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=yn(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=x5,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ht.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function U5(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ks=t=>t*180/Math.PI,_m=t=>{const e=Ks(Math.atan2(t[1],t[0]));return xm(e)},O5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:_m,rotateZ:_m,skewX:t=>Ks(Math.atan(t[1])),skewY:t=>Ks(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},xm=t=>(t=t%360,t<0&&(t+=360),t),ow=_m,aw=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),lw=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),q5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:aw,scaleY:lw,scale:t=>(aw(t)+lw(t))/2,rotateX:t=>xm(Ks(Math.atan2(t[6],t[5]))),rotateY:t=>xm(Ks(Math.atan2(-t[2],t[0]))),rotateZ:ow,rotate:ow,skewX:t=>Ks(Math.atan(t[4])),skewY:t=>Ks(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function wm(t){return t.includes("scale")?1:0}function Tm(t,e){if(!t||t==="none")return wm(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=q5,s=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=O5,s=a}if(!s)return wm(e);const i=r[e],o=s[1].split(",").map(j5);return typeof i=="function"?i(o):o[i]}const B5=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Tm(n,e)};function j5(t){return parseFloat(t.trim())}const $o=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zo=new Set($o),uw=t=>t===Go||t===ae,G5=new Set(["x","y","z"]),$5=$o.filter(t=>!G5.has(t));function z5(t){const e=[];return $5.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Xs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Tm(e,"x"),y:(t,{transform:e})=>Tm(e,"y")};Xs.translateX=Xs.x;Xs.translateY=Xs.y;const Zs=new Set;let Em=!1,Im=!1,Sm=!1;function AP(){if(Im){const t=Array.from(Zs).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=z5(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Im=!1,Em=!1,Zs.forEach(t=>t.complete(Sm)),Zs.clear()}function NP(){Zs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Im=!0)})}function H5(){Sm=!0,NP(),AP(),Sm=!1}class av{constructor(e,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Zs.add(this),Em||(Em=!0,Le.read(NP),Le.resolveKeyframes(AP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}U5(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Zs.delete(this)}cancel(){this.state==="scheduled"&&(Zs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const W5=t=>t.startsWith("--");function K5(t,e,n){W5(e)?t.style.setProperty(e,n):t.style[e]=n}const J5=Jy(()=>window.ScrollTimeline!==void 0),Y5={};function Q5(t,e){const n=Jy(t);return()=>Y5[e]??n()}const PP=Q5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ma=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,cw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ma([0,.65,.55,1]),circOut:Ma([.55,0,1,.45]),backIn:Ma([.31,.01,.66,-.59]),backOut:Ma([.33,1.53,.69,.99])};function RP(t,e){if(t)return typeof t=="function"?PP()?IP(t,e):"ease-out":hP(t)?Ma(t):Array.isArray(t)?t.map(n=>RP(n,e)||cw.easeOut):cw[t]}function X5(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const d={[e]:n};l&&(d.offset=l);const m=RP(a,s);Array.isArray(m)&&(d.easing=m);const g={delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(d,g)}function bP(t){return typeof t=="function"&&"applyToOptions"in t}function Z5({type:t,...e}){return bP(t)&&PP()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class eq extends iv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,Ky(typeof e.type!="string");const u=Z5(e);this.animation=X5(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=sv(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):K5(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return yn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+yn(e)}get time(){return yn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=rr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&J5()?(this.animation.timeline=e,wn):n(this)}}const kP={anticipate:uP,backInOut:lP,circInOut:dP};function tq(t){return t in kP}function nq(t){typeof t.ease=="string"&&tq(t.ease)&&(t.ease=kP[t.ease])}const dw=10;class rq extends eq{constructor(e){nq(e),CP(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new ov({...o,autoplay:!1}),l=rr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-dw).value,a.sample(l).value,dw),a.stop()}}const fw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(_s.test(t)||t==="0")&&!t.startsWith("url("));function sq(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function iq(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=fw(s,e),a=fw(i,e);return!o||!a?!1:sq(t)||(n==="spring"||bP(n))&&r}function Cm(t){t.duration=0,t.type="keyframes"}const oq=new Set(["opacity","clipPath","filter","transform"]),aq=Jy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function lq(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return aq()&&n&&oq.has(n)&&(n!=="transform"||!u)&&!l&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const uq=40;class cq extends iv{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:d,...m}){var w;super(),this.stop=()=>{var C,R;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(R=this.keyframeResolver)==null||R.cancel()},this.createdAt=Ht.now();const g={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:u,element:d,...m},v=(d==null?void 0:d.KeyframeResolver)||av;this.keyframeResolver=new v(a,(C,R,E)=>this.onKeyframesResolved(C,R,g,!E),l,u,d),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Ht.now(),iq(e,i,o,a)||((kr.instantAnimations||!l)&&(d==null||d(sv(e,r,n))),e[0]=e[e.length-1],Cm(r),r.repeat=0);const g={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>uq?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!u&&lq(g)?new rq({...g,element:g.motionValue.owner.current}):new ov(g);v.finished.then(()=>this.notifyFinished()).catch(wn),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),H5()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const dq=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fq(t){const e=dq.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function DP(t,e,n=1){const[r,s]=fq(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return eP(o)?parseFloat(o):o}return Zy(s)?DP(s,e,n+1):s}function lv(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const MP=new Set(["width","height","top","left","right","bottom",...$o]),hq={test:t=>t==="auto",parse:t=>t},VP=t=>e=>e.test(t),LP=[Go,ae,sr,zr,s5,r5,hq],hw=t=>LP.find(VP(t));function pq(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||nP(t):!0}const mq=new Set(["brightness","contrast","saturate","opacity"]);function gq(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ev)||[];if(!r)return t;const s=n.replace(r,"");let i=mq.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const yq=/\b([a-z-]*)\(.*?\)/gu,Am={..._s,getAnimatableNone:t=>{const e=t.match(yq);return e?e.map(gq).join(" "):t}},pw={...Go,transform:Math.round},vq={rotate:zr,rotateX:zr,rotateY:zr,rotateZ:zr,scale:Ku,scaleX:Ku,scaleY:Ku,scaleZ:Ku,skew:zr,skewX:zr,skewY:zr,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:Vl,originX:tw,originY:tw,originZ:ae},uv={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,backgroundPositionX:ae,backgroundPositionY:ae,...vq,zIndex:pw,fillOpacity:Vl,strokeOpacity:Vl,numOctaves:pw},_q={...uv,color:Qe,backgroundColor:Qe,outlineColor:Qe,fill:Qe,stroke:Qe,borderColor:Qe,borderTopColor:Qe,borderRightColor:Qe,borderBottomColor:Qe,borderLeftColor:Qe,filter:Am,WebkitFilter:Am},FP=t=>_q[t];function UP(t,e){let n=FP(t);return n!==Am&&(n=_s),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const xq=new Set(["auto","none","0"]);function wq(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!xq.has(i)&&Ll(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=UP(n,s)}class Tq extends av{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Zy(u))){const d=DP(u,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!MP.has(r)||e.length!==2)return;const[s,i]=e,o=hw(s),a=hw(i);if(o!==a)if(uw(o)&&uw(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Xs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||pq(e[s]))&&r.push(s);r.length&&wq(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=Xs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Eq(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const OP=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function qP(t){return tP(t)&&"offsetHeight"in t}const mw=30,Iq=t=>!isNaN(parseFloat(t));class Sq{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Ht.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ht.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Iq(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Yy);const r=this.events[e].add(n);return e==="change"?()=>{r(),Le.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ht.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>mw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mw);return rP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bo(t,e){return new Sq(t,e)}const{schedule:cv}=pP(queueMicrotask,!1),kn={x:!1,y:!1};function BP(){return kn.x||kn.y}function Cq(t){return t==="x"||t==="y"?kn[t]?null:(kn[t]=!0,()=>{kn[t]=!1}):kn.x||kn.y?null:(kn.x=kn.y=!0,()=>{kn.x=kn.y=!1})}function jP(t,e){const n=Eq(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function gw(t){return!(t.pointerType==="touch"||BP())}function Aq(t,e,n={}){const[r,s,i]=jP(t,n),o=a=>{if(!gw(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const d=m=>{gw(m)&&(u(m),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const GP=(t,e)=>e?t===e?!0:GP(t,e.parentElement):!1,dv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Nq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Pq(t){return Nq.has(t.tagName)||t.tabIndex!==-1}const wc=new WeakSet;function yw(t){return e=>{e.key==="Enter"&&t(e)}}function bh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Rq=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=yw(()=>{if(wc.has(n))return;bh(n,"down");const s=yw(()=>{bh(n,"up")}),i=()=>bh(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function vw(t){return dv(t)&&!BP()}function bq(t,e,n={}){const[r,s,i]=jP(t,n),o=a=>{const l=a.currentTarget;if(!vw(a))return;wc.add(l);const u=e(l,a),d=(v,w)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),wc.has(l)&&wc.delete(l),vw(v)&&typeof u=="function"&&u(v,{success:w})},m=v=>{d(v,l===window||l===document||n.useGlobalTarget||GP(l,v.target))},g=v=>{d(v,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",g,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),qP(a)&&(a.addEventListener("focus",u=>Rq(u,s)),!Pq(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function $P(t){return tP(t)&&"ownerSVGElement"in t}function kq(t){return $P(t)&&t.tagName==="svg"}const At=t=>!!(t&&t.getVelocity),Dq=[...LP,Qe,_s],Mq=t=>Dq.find(VP(t)),fv=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function _w(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Vq(...t){return e=>{let n=!1;const r=t.map(s=>{const i=_w(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():_w(t[s],null)}}}}function Lq(...t){return M.useCallback(Vq(...t),t)}class Fq extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=qP(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Uq({children:t,isPresent:e,anchorX:n,root:r}){const s=M.useId(),i=M.useRef(null),o=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=M.useContext(fv),l=Lq(i,t==null?void 0:t.ref);return M.useInsertionEffect(()=>{const{width:u,height:d,top:m,left:g,right:v}=o.current;if(e||!i.current||!u||!d)return;const w=n==="left"?`left: ${g}`:`right: ${v}`;i.current.dataset.motionPopId=s;const C=document.createElement("style");a&&(C.nonce=a);const R=r??document.head;return R.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${w}px !important;
            top: ${m}px !important;
          }
        `),()=>{R.contains(C)&&R.removeChild(C)}},[e]),p.jsx(Fq,{isPresent:e,childRef:i,sizeRef:o,children:M.cloneElement(t,{ref:l})})}const Oq=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:l})=>{const u=$y(qq),d=M.useId();let m=!0,g=M.useMemo(()=>(m=!1,{id:d,initial:e,isPresent:n,custom:s,onExitComplete:v=>{u.set(v,!0);for(const w of u.values())if(!w)return;r&&r()},register:v=>(u.set(v,!1),()=>u.delete(v))}),[n,u,r]);return i&&m&&(g={...g}),M.useMemo(()=>{u.forEach((v,w)=>u.set(w,!1))},[n]),M.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=p.jsx(Uq,{isPresent:n,anchorX:a,root:l,children:t})),p.jsx(mf.Provider,{value:g,children:t})};function qq(){return new Map}function zP(t=!0){const e=M.useContext(mf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=M.useId();M.useEffect(()=>{if(t)return s(i)},[t]);const o=M.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const Ju=t=>t.key||"";function xw(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const ko=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,d]=zP(o),m=M.useMemo(()=>xw(t),[t]),g=o&&!u?[]:m.map(Ju),v=M.useRef(!0),w=M.useRef(m),C=$y(()=>new Map),[R,E]=M.useState(m),[x,S]=M.useState(m);ZN(()=>{v.current=!1,w.current=m;for(let F=0;F<x.length;F++){const I=Ju(x[F]);g.includes(I)?C.delete(I):C.get(I)!==!0&&C.set(I,!1)}},[x,g.length,g.join("-")]);const V=[];if(m!==R){let F=[...m];for(let I=0;I<x.length;I++){const T=x[I],A=Ju(T);g.includes(A)||(F.splice(I,0,T),V.push(T))}return i==="wait"&&V.length&&(F=V),S(xw(F)),E(m),null}const{forceRender:L}=M.useContext(Gy);return p.jsx(p.Fragment,{children:x.map(F=>{const I=Ju(F),T=o&&!u?!1:m===x||g.includes(I),A=()=>{if(C.has(I))C.set(I,!0);else return;let P=!0;C.forEach(k=>{k||(P=!1)}),P&&(L==null||L(),S(w.current),o&&(d==null||d()),r&&r())};return p.jsx(Oq,{isPresent:T,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:T?void 0:A,anchorX:a,children:F},I)})})},HP=M.createContext({strict:!1}),ww={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Do={};for(const t in ww)Do[t]={isEnabled:e=>ww[t].some(n=>!!e[n])};function Bq(t){for(const e in t)Do[e]={...Do[e],...t[e]}}const jq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||jq.has(t)}let WP=t=>!gd(t);function Gq(t){typeof t=="function"&&(WP=e=>e.startsWith("on")?!gd(e):t(e))}try{Gq(require("@emotion/is-prop-valid").default)}catch{}function $q(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(WP(s)||n===!0&&gd(s)||!e&&!gd(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const gf=M.createContext({});function yf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Fl(t){return typeof t=="string"||Array.isArray(t)}const hv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pv=["initial",...hv];function vf(t){return yf(t.animate)||pv.some(e=>Fl(t[e]))}function KP(t){return!!(vf(t)||t.variants)}function zq(t,e){if(vf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Fl(n)?n:void 0,animate:Fl(r)?r:void 0}}return t.inherit!==!1?e:{}}function Hq(t){const{initial:e,animate:n}=zq(t,M.useContext(gf));return M.useMemo(()=>({initial:e,animate:n}),[Tw(e),Tw(n)])}function Tw(t){return Array.isArray(t)?t.join(" "):t}function Ew(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const wa={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ae.test(t))t=parseFloat(t);else return t;const n=Ew(t,e.target.x),r=Ew(t,e.target.y);return`${n}% ${r}%`}},Wq={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=_s.parse(t);if(s.length>5)return r;const i=_s.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const u=Ue(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}},Nm={borderRadius:{...wa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wa,borderTopRightRadius:wa,borderBottomLeftRadius:wa,borderBottomRightRadius:wa,boxShadow:Wq};function JP(t,{layout:e,layoutId:n}){return zo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Nm[t]||t==="opacity")}const Kq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Jq=$o.length;function Yq(t,e,n){let r="",s=!0;for(let i=0;i<Jq;i++){const o=$o[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=OP(a,uv[o]);if(!l){s=!1;const d=Kq[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function mv(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(zo.has(l)){o=!0;continue}else if(gP(l)){s[l]=u;continue}else{const d=OP(u,uv[l]);l.startsWith("origin")?(a=!0,i[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=Yq(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${u} ${d}`}}const gv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function YP(t,e,n){for(const r in e)!At(e[r])&&!JP(r,n)&&(t[r]=e[r])}function Qq({transformTemplate:t},e){return M.useMemo(()=>{const n=gv();return mv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Xq(t,e){const n=t.style||{},r={};return YP(r,n,t),Object.assign(r,Qq(t,e)),r}function Zq(t,e){const n={},r=Xq(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const eB={offset:"stroke-dashoffset",array:"stroke-dasharray"},tB={offset:"strokeDashoffset",array:"strokeDasharray"};function nB(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?eB:tB;t[i.offset]=ae.transform(-r);const o=ae.transform(e),a=ae.transform(n);t[i.array]=`${o} ${a}`}function QP(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,u,d){if(mv(t,a,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g}=t;m.transform&&(g.transform=m.transform,delete m.transform),(g.transform||m.transformOrigin)&&(g.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),g.transform&&(g.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),s!==void 0&&nB(m,s,i,o,!1)}const XP=()=>({...gv(),attrs:{}}),ZP=t=>typeof t=="string"&&t.toLowerCase()==="svg";function rB(t,e,n,r){const s=M.useMemo(()=>{const i=XP();return QP(i,e,ZP(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};YP(i,t.style,t),s.style={...i,...s.style}}return s}const sB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yv(t){return typeof t!="string"||t.includes("-")?!1:!!(sB.indexOf(t)>-1||/[A-Z]/u.test(t))}function iB(t,e,n,{latestValues:r},s,i=!1){const a=(yv(t)?rB:Zq)(e,r,s,t),l=$q(e,typeof t=="string",i),u=t!==M.Fragment?{...l,...a,ref:n}:{},{children:d}=e,m=M.useMemo(()=>At(d)?d.get():d,[d]);return M.createElement(t,{...u,children:m})}function Iw(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function vv(t,e,n,r){if(typeof e=="function"){const[s,i]=Iw(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=Iw(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function Tc(t){return At(t)?t.get():t}function oB({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:aB(n,r,s,t),renderState:e()}}function aB(t,e,n,r){const s={},i=r(t,{});for(const g in i)s[g]=Tc(i[g]);let{initial:o,animate:a}=t;const l=vf(t),u=KP(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const m=d?a:o;if(m&&typeof m!="boolean"&&!yf(m)){const g=Array.isArray(m)?m:[m];for(let v=0;v<g.length;v++){const w=vv(t,g[v]);if(w){const{transitionEnd:C,transition:R,...E}=w;for(const x in E){let S=E[x];if(Array.isArray(S)){const V=d?S.length-1:0;S=S[V]}S!==null&&(s[x]=S)}for(const x in C)s[x]=C[x]}}}return s}const eR=t=>(e,n)=>{const r=M.useContext(gf),s=M.useContext(mf),i=()=>oB(t,e,r,s);return n?i():$y(i)};function _v(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(At(r[o])||e.style&&At(e.style[o])||JP(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const lB=eR({scrapeMotionValuesFromProps:_v,createRenderState:gv});function tR(t,e,n){const r=_v(t,e,n);for(const s in t)if(At(t[s])||At(e[s])){const i=$o.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const uB=eR({scrapeMotionValuesFromProps:tR,createRenderState:XP}),cB=Symbol.for("motionComponentSymbol");function Wi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function dB(t,e,n){return M.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Wi(n)&&(n.current=r))},[e])}const xv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fB="framerAppearId",nR="data-"+xv(fB),rR=M.createContext({});function hB(t,e,n,r,s){var C,R;const{visualElement:i}=M.useContext(gf),o=M.useContext(HP),a=M.useContext(mf),l=M.useContext(fv).reducedMotion,u=M.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,m=M.useContext(rR);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&pB(u.current,n,s,m);const g=M.useRef(!1);M.useInsertionEffect(()=>{d&&g.current&&d.update(n,a)});const v=n[nR],w=M.useRef(!!v&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,v))&&((R=window.MotionHasOptimisedAnimation)==null?void 0:R.call(window,v)));return ZN(()=>{d&&(g.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),w.current&&d.animationState&&d.animationState.animateChanges())}),M.useEffect(()=>{d&&(!w.current&&d.animationState&&d.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)==null||E.call(window,v)}),w.current=!1),d.enteringChildren=void 0)}),d}function pB(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:sR(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Wi(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:u})}function sR(t){if(t)return t.options.allowProjection!==!1?t.projection:sR(t.parent)}function kh(t,{forwardMotionProps:e=!1}={},n,r){n&&Bq(n);const s=yv(t)?uB:lB;function i(a,l){let u;const d={...M.useContext(fv),...a,layoutId:mB(a)},{isStatic:m}=d,g=Hq(a),v=s(a,m);if(!m&&zy){gB();const w=yB(d);u=w.MeasureLayout,g.visualElement=hB(t,v,d,r,w.ProjectionNode)}return p.jsxs(gf.Provider,{value:g,children:[u&&g.visualElement?p.jsx(u,{visualElement:g.visualElement,...d}):null,iB(t,a,dB(v,g.visualElement,l),v,m,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=M.forwardRef(i);return o[cB]=t,o}function mB({layoutId:t}){const e=M.useContext(Gy).id;return e&&t!==void 0?e+"-"+t:t}function gB(t,e){M.useContext(HP).strict}function yB(t){const{drag:e,layout:n}=Do;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function vB(t,e){if(typeof Proxy>"u")return kh;const n=new Map,r=(i,o)=>kh(i,o,t,e),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,kh(o,void 0,t,e)),n.get(o))})}function iR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function _B({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function xB(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Dh(t){return t===void 0||t===1}function Pm({scale:t,scaleX:e,scaleY:n}){return!Dh(t)||!Dh(e)||!Dh(n)}function Bs(t){return Pm(t)||oR(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function oR(t){return Sw(t.x)||Sw(t.y)}function Sw(t){return t&&t!=="0%"}function yd(t,e,n){const r=t-n,s=e*r;return n+s}function Cw(t,e,n,r,s){return s!==void 0&&(t=yd(t,s,r)),yd(t,n,r)+e}function Rm(t,e=0,n=1,r,s){t.min=Cw(t.min,e,n,r,s),t.max=Cw(t.max,e,n,r,s)}function aR(t,{x:e,y:n}){Rm(t.x,e.translate,e.scale,e.originPoint),Rm(t.y,n.translate,n.scale,n.originPoint)}const Aw=.999999999999,Nw=1.0000000000001;function wB(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ji(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,aR(t,o)),r&&Bs(i.latestValues)&&Ji(t,i.latestValues))}e.x<Nw&&e.x>Aw&&(e.x=1),e.y<Nw&&e.y>Aw&&(e.y=1)}function Ki(t,e){t.min=t.min+e,t.max=t.max+e}function Pw(t,e,n,r,s=.5){const i=Ue(t.min,t.max,s);Rm(t,e,n,i,r)}function Ji(t,e){Pw(t.x,e.x,e.scaleX,e.scale,e.originX),Pw(t.y,e.y,e.scaleY,e.scale,e.originY)}function lR(t,e){return iR(xB(t.getBoundingClientRect(),e))}function TB(t,e,n){const r=lR(t,n),{scroll:s}=e;return s&&(Ki(r.x,s.offset.x),Ki(r.y,s.offset.y)),r}const Rw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yi=()=>({x:Rw(),y:Rw()}),bw=()=>({min:0,max:0}),nt=()=>({x:bw(),y:bw()}),bm={current:null},uR={current:!1};function EB(){if(uR.current=!0,!!zy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>bm.current=t.matches;t.addEventListener("change",e),e()}else bm.current=!1}const IB=new WeakMap;function SB(t,e,n){for(const r in e){const s=e[r],i=n[r];if(At(s))t.addValue(r,s);else if(At(i))t.addValue(r,bo(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,bo(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const kw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class CB{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=av,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Ht.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Le.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=vf(n),this.isVariantNode=KP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in m){const v=m[g];l[g]!==void 0&&At(v)&&v.set(l[g])}}mount(e){var n;this.current=e,IB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),uR.current||EB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bm.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),vs(this.notifyUpdate),vs(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=zo.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Le.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Do){const n=Do[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<kw.length;r++){const s=kw[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=SB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=bo(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(eP(r)||nP(r))?r=parseFloat(r):!Mq(r)&&_s.test(n)&&(r=UP(e,n)),this.setBaseTarget(e,At(r)?r.get():r)),At(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=vv(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!At(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Yy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){cv.render(this.render)}}class cR extends CB{constructor(){super(...arguments),this.KeyframeResolver=Tq}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;At(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function dR(t,{style:e,vars:n},r,s){const i=t.style;let o;for(o in e)i[o]=e[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function AB(t){return window.getComputedStyle(t)}class NB extends cR{constructor(){super(...arguments),this.type="html",this.renderInstance=dR}readValueFromInstance(e,n){var r;if(zo.has(n))return(r=this.projection)!=null&&r.isProjecting?wm(n):B5(e,n);{const s=AB(e),i=(gP(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return lR(e,n)}build(e,n,r){mv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return _v(e,n,r)}}const fR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function PB(t,e,n,r){dR(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(fR.has(s)?s:xv(s),e.attrs[s])}class RB extends cR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(zo.has(n)){const r=FP(n);return r&&r.default||0}return n=fR.has(n)?n:xv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return tR(e,n,r)}build(e,n,r){QP(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){PB(e,n,r,s)}mount(e){this.isSVGTag=ZP(e.tagName),super.mount(e)}}const bB=(t,e)=>yv(t)?new RB(e):new NB(e,{allowProjection:t!==M.Fragment});function lo(t,e,n){const r=t.getProps();return vv(r,e,n!==void 0?n:r.custom,t)}const km=t=>Array.isArray(t);function kB(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,bo(n))}function DB(t){return km(t)?t[t.length-1]||0:t}function MB(t,e){const n=lo(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=DB(i[o]);kB(t,o,a)}}function VB(t){return!!(At(t)&&t.add)}function Dm(t,e){const n=t.getValue("willChange");if(VB(n))return n.add(e);if(!n&&kr.WillChange){const r=new kr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function hR(t){return t.props[nR]}const LB=t=>t!==null;function FB(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(LB),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[i]}const UB={type:"spring",stiffness:500,damping:25,restSpeed:10},OB=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),qB={type:"keyframes",duration:.8},BB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},jB=(t,{keyframes:e})=>e.length>2?qB:zo.has(t)?t.startsWith("scale")?OB(e[1]):UB:BB;function GB({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const wv=(t,e,n,r={},s,i)=>o=>{const a=lv(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-rr(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:g=>{e.set(g),a.onUpdate&&a.onUpdate(g)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};GB(a)||Object.assign(d,jB(t,d)),d.duration&&(d.duration=rr(d.duration)),d.repeatDelay&&(d.repeatDelay=rr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let m=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Cm(d),d.delay===0&&(m=!0)),(kr.instantAnimations||kr.skipAnimations)&&(m=!0,Cm(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,m&&!i&&e.get()!==void 0){const g=FB(d.keyframes,a);if(g!==void 0){Le.update(()=>{d.onUpdate(g),d.onComplete()});return}}return a.isSync?new ov(d):new cq(d)};function $B({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function pR(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(i=r);const l=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const m=t.getValue(d,t.latestValues[d]??null),g=a[d];if(g===void 0||u&&$B(u,d))continue;const v={delay:n,...lv(i||{},d)},w=m.get();if(w!==void 0&&!m.isAnimating&&!Array.isArray(g)&&g===w&&!v.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const E=hR(t);if(E){const x=window.MotionHandoffAnimation(E,d,Le);x!==null&&(v.startTime=x,C=!0)}}Dm(t,d),m.start(wv(d,m,g,t.shouldReduceMotion&&MP.has(d)?{type:!1}:v,t,C));const R=m.animation;R&&l.push(R)}return o&&Promise.all(l).then(()=>{Le.update(()=>{o&&MB(t,o)})}),l}function mR(t,e,n,r=0,s=1){const i=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function Mm(t,e,n={}){var l;const r=lo(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(pR(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:m,staggerDirection:g}=s;return zB(t,e,u,d,m,g,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,d]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(n.delay)])}function zB(t,e,n=0,r=0,s=0,i=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(Mm(l,e,{...o,delay:n+(typeof r=="function"?0:r)+mR(t.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function HB(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Mm(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Mm(t,e,n);else{const s=typeof e=="function"?lo(t,e,n.custom):e;r=Promise.all(pR(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function gR(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const WB=pv.length;function yR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?yR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<WB;n++){const r=pv[n],s=t.props[r];(Fl(s)||s===!1)&&(e[r]=s)}return e}const KB=[...hv].reverse(),JB=hv.length;function YB(t){return e=>Promise.all(e.map(({animation:n,options:r})=>HB(t,n,r)))}function QB(t){let e=YB(t),n=Dw(),r=!0;const s=l=>(u,d)=>{var g;const m=lo(t,d,l==="exit"?(g=t.presenceContext)==null?void 0:g.custom:void 0);if(m){const{transition:v,transitionEnd:w,...C}=m;u={...u,...C,...w}}return u};function i(l){e=l(t)}function o(l){const{props:u}=t,d=yR(t.parent)||{},m=[],g=new Set;let v={},w=1/0;for(let R=0;R<JB;R++){const E=KB[R],x=n[E],S=u[E]!==void 0?u[E]:d[E],V=Fl(S),L=E===l?x.isActive:null;L===!1&&(w=R);let F=S===d[E]&&S!==u[E]&&V;if(F&&r&&t.manuallyAnimateOnMount&&(F=!1),x.protectedKeys={...v},!x.isActive&&L===null||!S&&!x.prevProp||yf(S)||typeof S=="boolean")continue;const I=XB(x.prevProp,S);let T=I||E===l&&x.isActive&&!F&&V||R>w&&V,A=!1;const P=Array.isArray(S)?S:[S];let k=P.reduce(s(E),{});L===!1&&(k={});const{prevResolvedValues:D={}}=x,b={...D,...k},Ie=W=>{T=!0,g.has(W)&&(A=!0,g.delete(W)),x.needsAnimating[W]=!0;const O=t.getValue(W);O&&(O.liveStyle=!1)};for(const W in b){const O=k[W],z=D[W];if(v.hasOwnProperty(W))continue;let B=!1;km(O)&&km(z)?B=!gR(O,z):B=O!==z,B?O!=null?Ie(W):g.add(W):O!==void 0&&g.has(W)?Ie(W):x.protectedKeys[W]=!0}x.prevProp=S,x.prevResolvedValues=k,x.isActive&&(v={...v,...k}),r&&t.blockInitialAnimation&&(T=!1);const Me=F&&I;T&&(!Me||A)&&m.push(...P.map(W=>{const O={type:E};if(typeof W=="string"&&r&&!Me&&t.manuallyAnimateOnMount&&t.parent){const{parent:z}=t,B=lo(z,W);if(z.enteringChildren&&B){const{delayChildren:Y}=B.transition||{};O.delay=mR(z.enteringChildren,t,Y)}}return{animation:W,options:O}}))}if(g.size){const R={};if(typeof u.initial!="boolean"){const E=lo(t,Array.isArray(u.initial)?u.initial[0]:u.initial);E&&E.transition&&(R.transition=E.transition)}g.forEach(E=>{const x=t.getBaseTarget(E),S=t.getValue(E);S&&(S.liveStyle=!0),R[E]=x??null}),m.push({animation:R})}let C=!!m.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(m):Promise.resolve()}function a(l,u){var m;if(n[l].isActive===u)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(g=>{var v;return(v=g.animationState)==null?void 0:v.setActive(l,u)}),n[l].isActive=u;const d=o(l);for(const g in n)n[g].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Dw()}}}function XB(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!gR(e,t):!1}function Fs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Dw(){return{animate:Fs(!0),whileInView:Fs(),whileHover:Fs(),whileTap:Fs(),whileDrag:Fs(),whileFocus:Fs(),exit:Fs()}}class Cs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ZB extends Cs{constructor(e){super(e),e.animationState||(e.animationState=QB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();yf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let ej=0;class tj extends Cs{constructor(){super(...arguments),this.id=ej++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const nj={animation:{Feature:ZB},exit:{Feature:tj}};function Ul(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ou(t){return{point:{x:t.pageX,y:t.pageY}}}const rj=t=>e=>dv(e)&&t(e,ou(e));function nl(t,e,n,r){return Ul(t,e,rj(n),r)}const vR=1e-4,sj=1-vR,ij=1+vR,_R=.01,oj=0-_R,aj=0+_R;function Vt(t){return t.max-t.min}function lj(t,e,n){return Math.abs(t-e)<=n}function Mw(t,e,n,r=.5){t.origin=r,t.originPoint=Ue(e.min,e.max,t.origin),t.scale=Vt(n)/Vt(e),t.translate=Ue(n.min,n.max,t.origin)-t.originPoint,(t.scale>=sj&&t.scale<=ij||isNaN(t.scale))&&(t.scale=1),(t.translate>=oj&&t.translate<=aj||isNaN(t.translate))&&(t.translate=0)}function rl(t,e,n,r){Mw(t.x,e.x,n.x,r?r.originX:void 0),Mw(t.y,e.y,n.y,r?r.originY:void 0)}function Vw(t,e,n){t.min=n.min+e.min,t.max=t.min+Vt(e)}function uj(t,e,n){Vw(t.x,e.x,n.x),Vw(t.y,e.y,n.y)}function Lw(t,e,n){t.min=e.min-n.min,t.max=t.min+Vt(e)}function vd(t,e,n){Lw(t.x,e.x,n.x),Lw(t.y,e.y,n.y)}function fn(t){return[t("x"),t("y")]}const xR=({current:t})=>t?t.ownerDocument.defaultView:null,Fw=(t,e)=>Math.abs(t-e);function cj(t,e){const n=Fw(t.x,e.x),r=Fw(t.y,e.y);return Math.sqrt(n**2+r**2)}class wR{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Vh(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,w=cj(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!w)return;const{point:C}=g,{timestamp:R}=ft;this.history.push({...C,timestamp:R});const{onStart:E,onMove:x}=this.handlers;v||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Mh(v,this.transformPagePoint),Le.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:w,onSessionEnd:C,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Vh(g.type==="pointercancel"?this.lastMoveEventInfo:Mh(v,this.transformPagePoint),this.history);this.startEvent&&w&&w(g,E),C&&C(g,E)},!dv(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=ou(e),l=Mh(a,this.transformPagePoint),{point:u}=l,{timestamp:d}=ft;this.history=[{...u,timestamp:d}];const{onSessionStart:m}=n;m&&m(e,Vh(l,this.history)),this.removeListeners=ru(nl(this.contextWindow,"pointermove",this.handlePointerMove),nl(this.contextWindow,"pointerup",this.handlePointerUp),nl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vs(this.updatePoint)}}function Mh(t,e){return e?{point:e(t.point)}:t}function Uw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Vh({point:t},e){return{point:t,delta:Uw(t,TR(e)),offset:Uw(t,dj(e)),velocity:fj(e,.1)}}function dj(t){return t[0]}function TR(t){return t[t.length-1]}function fj(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=TR(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>rr(e)));)n--;if(!r)return{x:0,y:0};const i=yn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function hj(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ue(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ue(n,t,r.max):Math.min(t,n)),t}function Ow(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function pj(t,{top:e,left:n,bottom:r,right:s}){return{x:Ow(t.x,n,s),y:Ow(t.y,e,r)}}function qw(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function mj(t,e){return{x:qw(t.x,e.x),y:qw(t.y,e.y)}}function gj(t,e){let n=.5;const r=Vt(t),s=Vt(e);return s>r?n=Ml(e.min,e.max-r,t.min):r>s&&(n=Ml(t.min,t.max-s,e.min)),br(0,1,n)}function yj(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Vm=.35;function vj(t=Vm){return t===!1?t=0:t===!0&&(t=Vm),{x:Bw(t,"left","right"),y:Bw(t,"top","bottom")}}function Bw(t,e,n){return{min:jw(t,e),max:jw(t,n)}}function jw(t,e){return typeof t=="number"?t:t[e]||0}const _j=new WeakMap;class xj{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ou(m).point)},o=(m,g)=>{const{drag:v,dragPropagation:w,onDragStart:C}=this.getProps();if(v&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Cq(v),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fn(E=>{let x=this.getAxisMotionValue(E).get()||0;if(sr.test(x)){const{projection:S}=this.visualElement;if(S&&S.layout){const V=S.layout.layoutBox[E];V&&(x=Vt(V)*(parseFloat(x)/100))}}this.originPoint[E]=x}),C&&Le.postRender(()=>C(m,g)),Dm(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},a=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:w,onDirectionLock:C,onDrag:R}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:E}=g;if(w&&this.currentDirection===null){this.currentDirection=wj(E),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),R&&R(m,g)},l=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g,this.stop(m,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>fn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)==null?void 0:g.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new wR(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:xR(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Le.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Yu(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=hj(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&Wi(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=pj(r.layoutBox,e):this.constraints=!1,this.elastic=vj(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&fn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=yj(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Wi(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=TB(r,s.root,this.visualElement.getTransformPagePoint());let o=mj(s.layout.layoutBox,i);if(n){const a=n(_B(o));this.hasMutatedConstraints=!!a,a&&(o=iR(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=fn(d=>{if(!Yu(d,n,this.currentDirection))return;let m=l&&l[d]||{};o&&(m={min:0,max:0});const g=s?200:1e6,v=s?40:1e7,w={type:"inertia",velocity:r?e[d]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(d,w)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Dm(this.visualElement,e),r.start(wv(e,r,0,n,this.visualElement,!1))}stopAnimation(){fn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){fn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){fn(n=>{const{drag:r}=this.getProps();if(!Yu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Ue(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Wi(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};fn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=gj({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),fn(o=>{if(!Yu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Ue(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;_j.set(this.visualElement,this);const e=this.visualElement.current,n=nl(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Wi(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Le.read(r);const o=Ul(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(fn(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=l[d].translate,m.set(m.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Vm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Yu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function wj(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Tj extends Cs{constructor(e){super(e),this.removeGroupControls=wn,this.removeListeners=wn,this.controls=new xj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Gw=t=>(e,n)=>{t&&Le.postRender(()=>t(e,n))};class Ej extends Cs{constructor(){super(...arguments),this.removePointerDownListener=wn}onPointerDown(e){this.session=new wR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Gw(e),onStart:Gw(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Le.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=nl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ec={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Lh=!1;class Ij extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),Lh&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ec.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,Lh=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Le.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),cv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;Lh=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ER(t){const[e,n]=zP(),r=M.useContext(Gy);return p.jsx(Ij,{...t,layoutGroup:r,switchLayoutGroup:M.useContext(rR),isPresent:e,safeToRemove:n})}function Sj(t,e,n){const r=At(t)?t:bo(t);return r.start(wv("",r,e,n)),r.animation}const Cj=(t,e)=>t.depth-e.depth;class Aj{constructor(){this.children=[],this.isDirty=!1}add(e){Hy(this.children,e),this.isDirty=!0}remove(e){Wy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Cj),this.isDirty=!1,this.children.forEach(e)}}function Nj(t,e){const n=Ht.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(vs(r),t(i-e))};return Le.setup(r,!0),()=>vs(r)}const IR=["TopLeft","TopRight","BottomLeft","BottomRight"],Pj=IR.length,$w=t=>typeof t=="string"?parseFloat(t):t,zw=t=>typeof t=="number"||ae.test(t);function Rj(t,e,n,r,s,i){s?(t.opacity=Ue(0,n.opacity??1,bj(r)),t.opacityExit=Ue(e.opacity??1,0,kj(r))):i&&(t.opacity=Ue(e.opacity??1,n.opacity??1,r));for(let o=0;o<Pj;o++){const a=`border${IR[o]}Radius`;let l=Hw(e,a),u=Hw(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||zw(l)===zw(u)?(t[a]=Math.max(Ue($w(l),$w(u),r),0),(sr.test(u)||sr.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Ue(e.rotate||0,n.rotate||0,r))}function Hw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const bj=SR(0,.5,cP),kj=SR(.5,.95,wn);function SR(t,e,n){return r=>r<t?0:r>e?1:n(Ml(t,e,r))}function Ww(t,e){t.min=e.min,t.max=e.max}function bn(t,e){Ww(t.x,e.x),Ww(t.y,e.y)}function Kw(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Jw(t,e,n,r,s){return t-=e,t=yd(t,1/n,r),s!==void 0&&(t=yd(t,1/s,r)),t}function Dj(t,e=0,n=1,r=.5,s,i=t,o=t){if(sr.test(e)&&(e=parseFloat(e),e=Ue(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ue(i.min,i.max,r);t===i&&(a-=e),t.min=Jw(t.min,e,n,a,s),t.max=Jw(t.max,e,n,a,s)}function Yw(t,e,[n,r,s],i,o){Dj(t,e[n],e[r],e[s],e.scale,i,o)}const Mj=["x","scaleX","originX"],Vj=["y","scaleY","originY"];function Qw(t,e,n,r){Yw(t.x,e,Mj,n?n.x:void 0,r?r.x:void 0),Yw(t.y,e,Vj,n?n.y:void 0,r?r.y:void 0)}function Xw(t){return t.translate===0&&t.scale===1}function CR(t){return Xw(t.x)&&Xw(t.y)}function Zw(t,e){return t.min===e.min&&t.max===e.max}function Lj(t,e){return Zw(t.x,e.x)&&Zw(t.y,e.y)}function eT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function AR(t,e){return eT(t.x,e.x)&&eT(t.y,e.y)}function tT(t){return Vt(t.x)/Vt(t.y)}function nT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Fj{constructor(){this.members=[]}add(e){Hy(this.members,e),e.scheduleRender()}remove(e){if(Wy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Uj(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:m,rotateY:g,skewX:v,skewY:w}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),m&&(r+=`rotateX(${m}deg) `),g&&(r+=`rotateY(${g}deg) `),v&&(r+=`skewX(${v}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Fh=["","X","Y","Z"],Oj=1e3;let qj=0;function Uh(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function NR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hR(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Le,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&NR(r)}function PR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=qj++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Gj),this.nodes.forEach(Wj),this.nodes.forEach(Kj),this.nodes.forEach($j)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Aj)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Yy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=$P(o)&&!kq(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let d,m=0;const g=()=>this.root.updateBlockedByResize=!1;Le.read(()=>{m=window.innerWidth}),t(o,()=>{const v=window.innerWidth;v!==m&&(m=v,this.root.updateBlockedByResize=!0,d&&d(),d=Nj(g,250),Ec.hasAnimatedSinceResize&&(Ec.hasAnimatedSinceResize=!1,this.nodes.forEach(iT)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||Zj,{onLayoutAnimationStart:C,onLayoutAnimationComplete:R}=u.getProps(),E=!this.targetLayout||!AR(this.targetLayout,v),x=!m&&g;if(this.options.layoutRoot||this.resumeFrom||x||m&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...lv(w,"layout"),onPlay:C,onComplete:R};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(d,x)}else m||iT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Jj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&NR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(sT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Hj),this.nodes.forEach(Bj),this.nodes.forEach(jj)):this.nodes.forEach(sT),this.clearAllSnapshots();const a=Ht.now();ft.delta=br(0,1e3/60,a-ft.timestamp),ft.timestamp=a,ft.isProcessing=!0,Ch.update.process(ft),Ch.preRender.process(ft),Ch.render.process(ft),ft.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zj),this.sharedNodes.forEach(Yj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Le.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Le.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vt(this.snapshot.measuredBox.x)&&!Vt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!CR(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Bs(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),e6(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return nt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(t6))){const{scroll:d}=this.root;d&&(Ki(a.x,d.offset.x),Ki(a.y,d.offset.y))}return a}removeElementScroll(o){var l;const a=nt();if(bn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:m,options:g}=d;d!==this.root&&m&&g.layoutScroll&&(m.wasRoot&&bn(a,o),Ki(a.x,m.offset.x),Ki(a.y,m.offset.y))}return a}applyTransform(o,a=!1){const l=nt();bn(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ji(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Bs(d.latestValues)&&Ji(l,d.latestValues)}return Bs(this.latestValues)&&Ji(l,this.latestValues),l}removeTransform(o){const a=nt();bn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Bs(u.latestValues))continue;Pm(u.latestValues)&&u.updateSnapshot();const d=nt(),m=u.measurePageBox();bn(d,m),Qw(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Bs(this.latestValues)&&Qw(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ft.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var v;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!this.layout||!(d||m))return;this.resolvedRelativeTargetAt=ft.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=nt(),this.targetWithTransforms=nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),uj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):bn(this.target,this.layout.layoutBox),aR(this.target,this.targetDelta)):bn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Pm(this.parent.latestValues)||oR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),vd(this.relativeTargetOrigin,a,l),bn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var w;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ft.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;bn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;wB(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=nt());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Kw(this.prevProjectionDelta.x,this.projectionDelta.x),Kw(this.prevProjectionDelta.y,this.projectionDelta.y)),rl(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!nT(this.projectionDelta.x,this.prevProjectionDelta.x)||!nT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Yi(),this.projectionDelta=Yi(),this.projectionDeltaWithTransform=Yi()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},m=Yi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const g=nt(),v=l?l.source:void 0,w=this.layout?this.layout.source:void 0,C=v!==w,R=this.getStack(),E=!R||R.members.length<=1,x=!!(C&&!E&&this.options.crossfade===!0&&!this.path.some(Xj));this.animationProgress=0;let S;this.mixTargetDelta=V=>{const L=V/1e3;oT(m.x,o.x,L),oT(m.y,o.y,L),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vd(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Qj(this.relativeTarget,this.relativeTargetOrigin,g,L),S&&Lj(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=nt()),bn(S,this.relativeTarget)),C&&(this.animationValues=d,Rj(d,u,this.latestValues,L,x,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(vs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Le.update(()=>{Ec.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bo(0)),this.currentAnimation=Sj(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Oj),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&RR(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||nt();const m=Vt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+m;const g=Vt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+g}bn(a,l),Ji(a,d),rl(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Fj),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Uh("z",o,u,this.animationValues);for(let d=0;d<Fh.length;d++)Uh(`rotate${Fh[d]}`,o,u,this.animationValues),Uh(`skew${Fh[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Tc(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Tc(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Bs(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let m=Uj(this.projectionDeltaWithTransform,this.treeScale,d);l&&(m=l(d,m)),o.transform=m;const{x:g,y:v}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const w in Nm){if(d[w]===void 0)continue;const{correct:C,applyTo:R,isCSSVariable:E}=Nm[w],x=m==="none"?d[w]:C(d[w],u);if(R){const S=R.length;for(let V=0;V<S;V++)o[R[V]]=x}else E?this.options.visualElement.renderState.vars[w]=x:o[w]=x}this.options.layoutId&&(o.pointerEvents=u===this?Tc(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(rT),this.root.sharedNodes.clear()}}}function Bj(t){t.updateLayout()}function jj(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?fn(m=>{const g=o?e.measuredBox[m]:e.layoutBox[m],v=Vt(g);g.min=r[m].min,g.max=g.min+v}):RR(i,e.layoutBox,r)&&fn(m=>{const g=o?e.measuredBox[m]:e.layoutBox[m],v=Vt(r[m]);g.max=g.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+v)});const a=Yi();rl(a,r,e.layoutBox);const l=Yi();o?rl(l,t.applyTransform(s,!0),e.measuredBox):rl(l,r,e.layoutBox);const u=!CR(a);let d=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:v}=m;if(g&&v){const w=nt();vd(w,e.layoutBox,g.layoutBox);const C=nt();vd(C,r,v.layoutBox),AR(w,C)||(d=!0),m.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=w,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Gj(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function $j(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function zj(t){t.clearSnapshot()}function rT(t){t.clearMeasurements()}function sT(t){t.isLayoutDirty=!1}function Hj(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function iT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Wj(t){t.resolveTargetDelta()}function Kj(t){t.calcProjection()}function Jj(t){t.resetSkewAndRotation()}function Yj(t){t.removeLeadSnapshot()}function oT(t,e,n){t.translate=Ue(e.translate,0,n),t.scale=Ue(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function aT(t,e,n,r){t.min=Ue(e.min,n.min,r),t.max=Ue(e.max,n.max,r)}function Qj(t,e,n,r){aT(t.x,e.x,n.x,r),aT(t.y,e.y,n.y,r)}function Xj(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Zj={duration:.45,ease:[.4,0,.1,1]},lT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),uT=lT("applewebkit/")&&!lT("chrome/")?Math.round:wn;function cT(t){t.min=uT(t.min),t.max=uT(t.max)}function e6(t){cT(t.x),cT(t.y)}function RR(t,e,n){return t==="position"||t==="preserve-aspect"&&!lj(tT(e),tT(n),.2)}function t6(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const n6=PR({attachResizeListener:(t,e)=>Ul(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Oh={current:void 0},bR=PR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Oh.current){const t=new n6({});t.mount(window),t.setOptions({layoutScroll:!0}),Oh.current=t}return Oh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),r6={pan:{Feature:Ej},drag:{Feature:Tj,ProjectionNode:bR,MeasureLayout:ER}};function dT(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Le.postRender(()=>i(e,ou(e)))}class s6 extends Cs{mount(){const{current:e}=this.node;e&&(this.unmount=Aq(e,(n,r)=>(dT(this.node,r,"Start"),s=>dT(this.node,s,"End"))))}unmount(){}}class i6 extends Cs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ru(Ul(this.node.current,"focus",()=>this.onFocus()),Ul(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fT(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Le.postRender(()=>i(e,ou(e)))}class o6 extends Cs{mount(){const{current:e}=this.node;e&&(this.unmount=bq(e,(n,r)=>(fT(this.node,r,"Start"),(s,{success:i})=>fT(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Lm=new WeakMap,qh=new WeakMap,a6=t=>{const e=Lm.get(t.target);e&&e(t)},l6=t=>{t.forEach(a6)};function u6({root:t,...e}){const n=t||document;qh.has(n)||qh.set(n,{});const r=qh.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(l6,{root:t,...e})),r[s]}function c6(t,e,n){const r=u6(e);return Lm.set(t,n),r.observe(t),()=>{Lm.delete(t),r.unobserve(t)}}const d6={some:0,all:1};class f6 extends Cs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:d6[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),g=u?d:m;g&&g(l)};return c6(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(h6(e,n))&&this.startObserver()}unmount(){}}function h6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const p6={inView:{Feature:f6},tap:{Feature:o6},focus:{Feature:i6},hover:{Feature:s6}},m6={layout:{ProjectionNode:bR,MeasureLayout:ER}},g6={...nj,...p6,...r6,...m6},X=vB(g6,bB),kR=()=>{const[t,e]=M.useState(Qx),[n,r]=M.useState(!0);return M.useEffect(()=>{const s=$t(zt,"settings","pricing"),i=Vy(s,o=>{o.exists()?e(o.data()):e(Qx),r(!1)},o=>{o.code==="permission-denied"?console.warn("Permisso negada ao ler preos. Verifique firestore.rules. Usando preos padro."):console.error("Erro ao buscar configuraes de preo:",o),r(!1)});return()=>i()},[]),{pricing:t,loading:n}},y6=()=>{const t=M.useRef(null),e=M.useRef(null),n=M.useRef(0),r=M.useRef([]),s=M.useRef([]),i=["#1e3a8a","#0f766e","#0369a1","#4338ca","#1d4ed8","#042f2e"],o=(l,u)=>{s.current=[];const d=6;for(let m=0;m<d;m++)s.current.push({x:Math.random()*l,y:Math.random()*u,vx:(Math.random()-.5)*.8,vy:(Math.random()-.5)*.8,r:250+Math.random()*200,minR:200,maxR:500,color:i[m%i.length],dr:(Math.random()-.5)*.4})};M.useEffect(()=>{const l=t.current,u=e.current;if(!l||!u)return;const d=l.getContext("2d");if(!d)return;const m=()=>{l.width=u.offsetWidth,l.height=u.offsetHeight,s.current.length===0&&o(l.width,l.height)};window.addEventListener("resize",m),m();const g=()=>{d.fillStyle="#020617",d.fillRect(0,0,l.width,l.height),s.current.forEach(v=>{v.x+=v.vx,v.y+=v.vy,v.r+=v.dr,(v.x<-100||v.x>l.width+100)&&(v.vx*=-1),(v.y<-100||v.y>l.height+100)&&(v.vy*=-1),(v.r<v.minR||v.r>v.maxR)&&(v.dr*=-1);const w=d.createRadialGradient(v.x,v.y,0,v.x,v.y,v.r);w.addColorStop(0,v.color+"cc"),w.addColorStop(1,"transparent"),d.globalCompositeOperation="screen",d.fillStyle=w,d.beginPath(),d.arc(v.x,v.y,v.r,0,Math.PI*2),d.fill()}),d.globalCompositeOperation="source-over",r.current.forEach((v,w)=>{v.r+=v.speed,v.alpha-=.015,v.alpha<=0?r.current.splice(w,1):(d.beginPath(),d.arc(v.x,v.y,v.r,0,Math.PI*2),d.strokeStyle=`rgba(255, 255, 255, ${v.alpha})`,d.lineWidth=2,d.stroke(),v.r>20&&(d.beginPath(),d.arc(v.x,v.y,v.r-20,0,Math.PI*2),d.strokeStyle=`rgba(255, 255, 255, ${v.alpha*.5})`,d.lineWidth=1,d.stroke()))}),n.current=requestAnimationFrame(g)};return g(),()=>{window.removeEventListener("resize",m),cancelAnimationFrame(n.current)}},[]);const a=l=>{var g;const u=(g=e.current)==null?void 0:g.getBoundingClientRect();if(!u)return;const d=l.clientX-u.left,m=l.clientY-u.top;r.current.push({x:d,y:m,r:10,alpha:.8,speed:4})};return p.jsxs("div",{ref:e,className:"absolute inset-0 z-0 overflow-hidden cursor-pointer",onClick:a,children:[p.jsx("canvas",{ref:t,className:"w-full h-full block"}),p.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/noise.png')] opacity-[0.03] pointer-events-none mix-blend-overlay"})]})},v6=()=>p.jsxs("div",{className:"relative w-full h-full bg-blue-50/30 flex items-center justify-center overflow-hidden rounded-t-[2.5rem]",children:[p.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"radial-gradient(#2563eb 1px, transparent 1px)",backgroundSize:"20px 20px"}}),p.jsxs(X.div,{initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"relative w-48 bg-white rounded-lg shadow-[0_8px_30px_rgb(0,0,0,0.08)] border border-gray-100 overflow-hidden flex flex-col p-5 pb-8 z-10",style:{clipPath:"polygon(0 0, 100% 0, 100% 100%, 95% 98%, 90% 100%, 85% 98%, 80% 100%, 75% 98%, 70% 100%, 65% 98%, 60% 100%, 55% 98%, 50% 100%, 45% 98%, 40% 100%, 35% 98%, 30% 100%, 25% 98%, 20% 100%, 15% 98%, 10% 100%, 5% 98%, 0 100%)"},children:[p.jsxs("div",{className:"flex flex-col items-center mb-4 border-b border-dashed border-gray-200 pb-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mb-2 shrink-0 aspect-square",children:p.jsx("span",{className:"font-bold text-gray-400 text-[10px]",children:"LOGO"})}),p.jsx("div",{className:"h-2 w-20 bg-gray-100 rounded mb-1"}),p.jsx("div",{className:"h-2 w-12 bg-gray-50 rounded"})]}),p.jsxs("div",{className:"space-y-3 flex-1",children:[[1,2,3].map(t=>p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx(X.div,{className:"h-2.5 rounded-sm",initial:{backgroundColor:"#f3f4f6",width:"60%"},animate:{backgroundColor:["#f3f4f6","#1e293b","#1e293b"],width:["60%","60%","65%"]},transition:{duration:2.5,repeat:1/0,delay:t*.4,repeatDelay:1}}),p.jsx(X.div,{className:"h-2.5 rounded-sm",initial:{backgroundColor:"#f3f4f6",width:"20%"},animate:{backgroundColor:["#f3f4f6","#2563eb","#2563eb"],width:["20%","20%","25%"]},transition:{duration:2.5,repeat:1/0,delay:t*.4,repeatDelay:1}})]},t)),p.jsx("div",{className:"border-t border-dashed border-gray-200 my-3"}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-[10px] font-bold text-gray-400",children:"TOTAL"}),p.jsx(X.div,{className:"h-4 w-16 rounded bg-blue-50 text-blue-600 text-xs font-bold flex items-center justify-center",animate:{scale:[1,1.1,1],backgroundColor:["#eff6ff","#dbeafe","#eff6ff"]},transition:{duration:2.5,repeat:1/0,delay:2,repeatDelay:1},children:"R$ 128,90"})]})]})]}),p.jsx(X.div,{className:"absolute w-64 h-12 bg-gradient-to-b from-blue-400/0 via-blue-400/10 to-blue-400/0 z-20 pointer-events-none",style:{borderTop:"1px solid rgba(59, 130, 246, 0.3)",borderBottom:"1px solid rgba(59, 130, 246, 0.3)"},animate:{top:["-10%","110%"]},transition:{duration:2.5,repeat:1/0,ease:"linear",repeatDelay:1}}),p.jsxs(X.div,{className:"absolute bottom-6 right-6 bg-white pl-2 pr-4 py-2 rounded-xl shadow-lg border border-blue-100 flex items-center gap-3 z-30",initial:{opacity:0,y:10,scale:.9},animate:{opacity:[0,1,1,0],y:[10,0,0,-10],scale:[.9,1,1,.95]},transition:{duration:2.5,repeat:1/0,delay:1.8,repeatDelay:1,times:[0,.2,.8,1]},children:[p.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600 shrink-0 aspect-square flex items-center justify-center",children:p.jsx(Ro,{className:"text-xs"})}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-[10px] font-bold text-gray-800",children:"Processado"}),p.jsx("span",{className:"text-[9px] text-gray-500",children:"Dados extrados"})]})]})]}),_6=()=>{const[t,e]=M.useState(0),n=[{id:1,name:"Burger King",amount:"R$ 32,90",icon:"lunch_dining",colorBg:"bg-orange-100",colorText:"text-orange-600",categoryId:"food"},{id:2,name:"Uber Trip",amount:"R$ 19,90",icon:"local_taxi",colorBg:"bg-blue-100",colorText:"text-blue-600",categoryId:"transport"},{id:3,name:"Riachuelo",amount:"R$ 120,00",icon:"checkroom",colorBg:"bg-pink-100",colorText:"text-pink-600",categoryId:"clothes"}],r=[{id:"transport",label:"Transp.",icon:"directions_car",color:"blue"},{id:"food",label:"Aliment.",icon:"restaurant",color:"orange"},{id:"clothes",label:"Roupas",icon:"checkroom",color:"pink"}];M.useEffect(()=>{const i=setInterval(()=>{e(o=>(o+1)%n.length)},2800);return()=>clearInterval(i)},[]);const s=n[t];return p.jsxs("div",{className:"relative w-full h-full bg-purple-50/40 flex items-center justify-center overflow-hidden rounded-t-[2.5rem]",children:[p.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[p.jsx(X.div,{animate:{y:[-10,10,-10]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},className:"absolute top-8 left-8 text-purple-200/50",children:p.jsx("span",{className:"material-symbols-outlined text-4xl",children:"sell"})}),p.jsx(X.div,{animate:{y:[10,-10,10]},transition:{duration:7,repeat:1/0,ease:"easeInOut"},className:"absolute bottom-10 right-10 text-purple-200/50",children:p.jsx("span",{className:"material-symbols-outlined text-4xl",children:"receipt"})})]}),p.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6 w-full px-6",children:[p.jsx("div",{className:"h-16 w-full flex justify-center items-end relative",children:p.jsx(ko,{mode:"wait",children:p.jsxs(X.div,{className:"bg-white px-4 py-3 rounded-2xl shadow-lg border border-purple-100 flex items-center gap-3 w-48 absolute",initial:{y:-40,opacity:0,scale:.9},animate:{y:0,opacity:1,scale:1},exit:{y:20,opacity:0,scale:.8},transition:{duration:.5,ease:"easeOut"},children:[p.jsx("div",{className:`w-8 h-8 rounded-full ${s.colorBg} flex items-center justify-center ${s.colorText} shrink-0 aspect-square`,children:p.jsx("span",{className:"material-symbols-outlined text-sm",children:s.icon})}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-xs font-bold text-gray-700",children:s.name}),p.jsx("span",{className:"text-[10px] text-gray-400",children:s.amount})]})]},s.id)})}),p.jsx("div",{className:"h-12 w-0.5 bg-gradient-to-b from-purple-200 to-purple-400 relative overflow-hidden rounded-full",children:p.jsx(X.div,{className:"absolute top-0 left-0 w-full h-1/2 bg-white/90",animate:{top:["-50%","150%"]},transition:{duration:1.5,repeat:1/0,repeatDelay:1.3}})}),p.jsx("div",{className:"flex gap-2 w-full justify-center",children:r.map(i=>{const o=s.categoryId===i.id;let a="border-purple-50",l="text-gray-400",u="bg-white";return o&&(i.color==="blue"?(a="border-blue-400",l="text-blue-600"):i.color==="orange"?(a="border-orange-400",l="text-orange-600"):i.color==="pink"&&(a="border-pink-400",l="text-pink-600")),p.jsxs(X.div,{className:`flex-1 p-2.5 rounded-2xl border-2 shadow-sm flex flex-col items-center gap-1.5 transition-colors duration-300 relative ${u} ${a} ${o?"shadow-md":"opacity-60"}`,animate:o?{scale:1.05}:{scale:1},children:[p.jsx("span",{className:`material-symbols-outlined text-lg transition-colors duration-300 ${l}`,children:i.icon}),p.jsx("span",{className:`text-[9px] font-bold transition-colors duration-300 ${o?"text-gray-800":"text-gray-400"}`,children:i.label}),p.jsx(ko,{children:o&&p.jsx(X.div,{className:"absolute -top-1.5 -right-1.5 bg-green-500 rounded-full w-4 h-4 flex items-center justify-center border-2 border-white shadow-sm shrink-0 aspect-square",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{type:"spring",stiffness:300,damping:20},children:p.jsx(Ro,{className:"text-[8px] text-white"})})})]},i.id)})})]})]})},x6=()=>p.jsxs("div",{className:"relative w-full h-full bg-emerald-50/40 flex items-center justify-center overflow-hidden rounded-t-[2.5rem]",children:[p.jsx("div",{className:"absolute inset-0 opacity-[0.05]",style:{backgroundImage:"linear-gradient(#10b981 1px, transparent 1px), linear-gradient(90deg, #10b981 1px, transparent 1px)",backgroundSize:"30px 30px"}}),p.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-xl border border-gray-100 w-64 relative z-10",children:[p.jsxs("div",{className:"flex justify-between items-center mb-5",children:[p.jsx("h3",{className:"font-bold text-gray-800 text-sm flex items-center gap-2",children:"Oramento Mensal"}),p.jsx("span",{className:"text-[10px] bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full font-bold",children:"Ativo"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-1 text-xs",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("span",{className:"w-5 h-5 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center shrink-0 aspect-square",children:p.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"restaurant"})}),p.jsx("span",{className:"font-medium text-gray-700",children:"Alimentao"})]}),p.jsx("span",{className:"text-gray-500 font-medium",children:"R$ 850 / 1k"})]}),p.jsx("div",{className:"h-2 w-full bg-gray-100 rounded-full overflow-hidden relative",children:p.jsx(X.div,{className:"h-full bg-orange-400 rounded-full",initial:{width:"0%"},animate:{width:"85%"},transition:{duration:1.5,ease:"easeOut",repeat:1/0,repeatDelay:3}})}),p.jsxs(X.div,{className:"absolute right-0 top-[3.5rem] bg-red-50 text-red-600 border border-red-100 text-[9px] font-bold px-2 py-1 rounded-lg shadow-sm flex items-center gap-1",initial:{opacity:0,y:5,scale:.8},animate:{opacity:[0,1,1,0],y:[5,0,0,-5],scale:[.8,1,1,.9]},transition:{duration:3,repeat:1/0,repeatDelay:1.5,delay:1},children:[p.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"warning"}),"85% do limite!"]})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-1 text-xs",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center shrink-0 aspect-square",children:p.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"directions_car"})}),p.jsx("span",{className:"font-medium text-gray-700",children:"Transporte"})]}),p.jsx("span",{className:"text-gray-500 font-medium",children:"R$ 200 / 500"})]}),p.jsx("div",{className:"h-2 w-full bg-gray-100 rounded-full overflow-hidden",children:p.jsx(X.div,{className:"h-full bg-emerald-500 rounded-full",initial:{width:"0%"},animate:{width:"40%"},transition:{duration:1.2,ease:"easeOut",repeat:1/0,repeatDelay:3.3}})})]})]})]}),Bh=({icon:t,text:e,subtext:n,color:r,delay:s,x:i,y:o})=>p.jsxs(X.div,{initial:{opacity:0,x:i+20,y:o+20},animate:{opacity:1,x:i,y:o},transition:{delay:s,duration:.8,type:"spring"},className:"absolute bg-white/95 backdrop-blur-md p-3 rounded-2xl shadow-xl border border-gray-100 flex items-center gap-3 z-30 scale-[0.85] sm:scale-100 origin-center",style:{maxWidth:"200px"},children:[p.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full text-white shadow-sm flex-shrink-0 aspect-square ${r}`,children:t}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-500 font-semibold uppercase",children:e}),p.jsx("p",{className:"text-sm font-bold text-gray-800",children:n})]})]}),w6=()=>p.jsx("div",{className:"w-full bg-white border-y border-gray-100 py-6",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8 md:gap-16 opacity-80",children:[p.jsxs("div",{className:"flex items-center gap-2 text-gray-500 font-medium",children:[p.jsx(P4,{className:"text-green-600 text-xl"}),p.jsx("span",{children:"Criptografia Bancria"})]}),p.jsxs("div",{className:"flex items-center gap-2 text-gray-500 font-medium",children:[p.jsx(R4,{className:"text-blue-600 text-xl"}),p.jsx("span",{children:"Dados 100% Privados"})]}),p.jsxs("div",{className:"flex items-center gap-2 text-gray-500 font-medium",children:[p.jsx(k4,{className:"text-gray-400 text-xl"}),p.jsx("span",{children:"Seus dados no so vendidos"})]})]})})}),T6=()=>{const t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.3}}},e={hidden:{opacity:0,x:-30,rotate:-1},visible:{opacity:1,x:0,rotate:-1,transition:{type:"spring",stiffness:50,damping:20}}},n={hidden:{opacity:0,x:30,scale:.95},visible:{opacity:1,x:0,scale:1,transition:{type:"spring",stiffness:70,damping:15}}},r={hidden:{opacity:0,x:-10},visible:{opacity:1,x:0}};return p.jsxs("section",{className:"py-24 bg-white overflow-hidden relative",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"}),p.jsx("div",{className:"absolute -left-20 top-40 w-96 h-96 bg-blue-50 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),p.jsx("div",{className:"absolute -right-20 bottom-40 w-96 h-96 bg-cyan-50 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[p.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[p.jsx(X.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-3xl sm:text-4xl font-extrabold text-gray-900 mb-6",children:"Pare de jogar dinheiro fora"}),p.jsx(X.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},className:"text-lg text-gray-600",children:"A maioria das pessoas perde o controle por usar mtodos falhos. Veja a diferena."})]}),p.jsxs(X.div,{variants:t,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-50px"},className:"grid md:grid-cols-2 gap-8 lg:gap-12 items-center",children:[p.jsxs(X.div,{variants:e,className:"relative group perspective-1000",children:[p.jsx("div",{className:"absolute inset-0 bg-gray-100 transform rotate-2 rounded-[2rem] -z-10 transition-transform duration-500 group-hover:rotate-6"}),p.jsxs("div",{className:"relative bg-white p-8 sm:p-10 rounded-[2rem] border border-gray-200 shadow-xl h-full flex flex-col grayscale-[0.5] group-hover:grayscale-0 transition-all duration-500",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[p.jsx("div",{className:"w-14 h-14 bg-gray-50 text-gray-400 rounded-2xl flex items-center justify-center text-3xl shadow-inner border border-gray-100 shrink-0 aspect-square",children:p.jsx("span",{className:"material-symbols-outlined",children:"sentiment_dissatisfied"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-bold text-gray-700",children:"O Jeito Antigo"}),p.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Manual e cansativo"})]})]}),p.jsx("ul",{className:"space-y-5 flex-1",children:["Juntar papis at perder a tinta","Esquecer onde gastou o dinheiro","Horas digitando em planilhas","Sem noo de quanto sobra no ms"].map((s,i)=>p.jsxs(X.li,{className:"flex items-start gap-3",variants:r,children:[p.jsx("div",{className:"mt-2.5 mr-1 flex-shrink-0",children:p.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 aspect-square group-hover:bg-red-400 transition-colors"})}),p.jsx("span",{className:"leading-relaxed text-gray-500 group-hover:text-gray-600 transition-colors",children:s})]},i))}),p.jsx("div",{className:"absolute bottom-[-20px] right-[-20px] opacity-5 pointer-events-none group-hover:opacity-10 transition-opacity",children:p.jsx(Sn,{className:"text-9xl text-gray-900"})})]})]}),p.jsx(X.div,{variants:n,className:"relative z-10 h-full",children:p.jsxs("div",{className:"relative w-full h-full rounded-[2rem] overflow-hidden shadow-2xl",children:[p.jsx("style",{children:`
                    @keyframes rotacaodegrade {
                        to { transform: translate(-50%, -50%) rotate(1turn); }
                    }
                `}),p.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[200%] h-[200%] z-0",style:{background:"conic-gradient(from 0deg at 50% 50%, transparent 0deg, #2563eb 60deg, transparent 60.1deg), conic-gradient(from 0deg at 50% 50%, transparent 180deg, #0ea5e9 240deg, transparent 240.1deg)",filter:"blur(20px)",animation:"rotacaodegrade 4s linear infinite"}}),p.jsxs("div",{className:"relative z-10 bg-white rounded-[calc(2rem-2px)] m-[2px] p-8 sm:p-10 h-[calc(100%-4px)] flex flex-col overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-blue-500 to-cyan-500"}),p.jsx(X.div,{initial:{left:"-100%"},whileInView:{left:"200%"},transition:{duration:1.5,ease:"easeInOut",delay:.5},className:"absolute top-0 bottom-0 w-1/2 bg-gradient-to-r from-transparent via-white/40 to-transparent skew-x-[-20deg] pointer-events-none z-20"}),p.jsxs("div",{className:"flex items-center gap-4 mb-8 relative z-10",children:[p.jsx(X.div,{whileHover:{rotate:360,scale:1.1},transition:{duration:.6},className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-cyan-600 text-white rounded-2xl flex items-center justify-center text-3xl shadow-lg shadow-blue-500/30 shrink-0 aspect-square",children:p.jsx(pf,{className:"text-2xl"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"O Jeito MeuGasto"}),p.jsx(X.p,{initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},transition:{delay:.5},className:"text-sm text-blue-600 font-bold bg-blue-50 px-2 py-0.5 rounded-md inline-block mt-0.5",children:"Automtico & Inteligente"})]})]}),p.jsx("ul",{className:"space-y-5 relative z-10 flex-1",children:["Foto > Dados prontos em 3s","IA Categoriza tudo sozinha","Alertas antes de estourar a meta","Controle total na palma da mo"].map((s,i)=>p.jsxs(X.li,{className:"flex items-start gap-4",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.4+i*.15,type:"spring"},children:[p.jsx(X.div,{initial:{scale:0},whileInView:{scale:1},transition:{delay:.4+i*.15,type:"spring"},className:"mt-1 min-w-[20px] bg-green-100 rounded-full p-0.5 flex items-center justify-center shrink-0 aspect-square",children:p.jsx(Ro,{className:"text-green-600 text-xs"})}),p.jsx("span",{className:"font-semibold text-gray-800 leading-relaxed",children:s})]},i))}),p.jsxs(X.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:1.2},className:"mt-8 pt-6 border-t border-gray-100 flex items-center justify-between",children:[p.jsx("div",{className:"flex -space-x-2",children:[1,2,3].map(s=>p.jsx(X.div,{whileHover:{y:-5,scale:1.1,zIndex:10},className:"w-8 h-8 rounded-full border-2 border-white bg-gray-100 shrink-0 aspect-square overflow-hidden shadow-sm",children:p.jsx("img",{src:`https://i.pravatar.cc/100?img=${s+20}`,alt:"",className:"w-full h-full object-cover"})},s))}),p.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:"5.000+ economizando"})]}),p.jsx("div",{className:"absolute top-1/2 right-[-50px] w-64 h-64 bg-blue-50 rounded-full blur-3xl opacity-60 pointer-events-none -z-0"})]})]})})]})]})]})},E6=()=>{const t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.5,delayChildren:.1}}},e={hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:15,mass:1}}},n={hidden:{scaleX:0},visible:{scaleX:[0,.5,.5,1],transition:{duration:2,times:[0,.35,.65,1],ease:"easeInOut"}}},r={hidden:{left:"16%",opacity:0},visible:{left:["16%","50%","50%","84%"],opacity:[0,1,1,0],transition:{duration:2,times:[0,.35,.65,1],ease:"easeInOut"}}};return p.jsx("section",{className:"py-20 bg-white relative overflow-hidden",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[p.jsx("div",{className:"text-center max-w-3xl mx-auto mb-16",children:p.jsxs(X.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[p.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Do papel para o grfico em segundos"}),p.jsx("p",{className:"text-lg text-gray-600",children:"Veja como  fcil transformar aquele monte de notinhas amassadas em controle financeiro real."})]})}),p.jsxs(X.div,{className:"grid md:grid-cols-3 gap-8 relative",variants:t,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-50px"},children:[p.jsx("div",{className:"hidden md:block absolute top-12 left-[16%] right-[16%] h-1 bg-gray-100 rounded-full z-0"}),p.jsx(X.div,{className:"hidden md:block absolute top-12 left-[16%] right-[16%] h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-green-500 z-0 origin-left rounded-full",variants:n}),p.jsx(X.div,{className:"hidden md:block absolute top-[44px] w-4 h-4 bg-white border-[3px] border-blue-600 rounded-full z-10 shrink-0 aspect-square",style:{boxShadow:"0 0 15px 2px rgba(37, 99, 235, 0.6)",transform:"translateY(-50%)"},variants:r}),p.jsxs(X.div,{variants:e,className:"relative z-10 flex flex-col items-center text-center group",children:[p.jsxs("div",{className:"w-24 h-24 bg-white rounded-3xl shadow-lg border border-blue-100 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 relative shrink-0 aspect-square",children:[p.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600 shrink-0 aspect-square",children:p.jsx(dd,{className:"text-3xl"})}),p.jsx("div",{className:"absolute -top-3 -right-3 w-8 h-8 bg-blue-600 text-white rounded-xl flex items-center justify-center font-bold text-sm shadow-md border-4 border-white shrink-0 aspect-square",children:"1"})]}),p.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Tire uma foto"}),p.jsx("p",{className:"text-gray-600 px-4",children:"Abra o app e aponte a cmera para qualquer recibo, nota fiscal ou faa upload de um PDF bancrio."})]}),p.jsxs(X.div,{variants:e,className:"relative z-10 flex flex-col items-center text-center group",children:[p.jsxs("div",{className:"w-24 h-24 bg-white rounded-3xl shadow-lg border border-purple-100 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 relative shrink-0 aspect-square",children:[p.jsx("div",{className:"w-16 h-16 bg-purple-50 rounded-2xl flex items-center justify-center text-purple-600 shrink-0 aspect-square",children:p.jsx(pf,{className:"text-3xl animate-pulse"})}),p.jsx("div",{className:"absolute -top-3 -right-3 w-8 h-8 bg-purple-600 text-white rounded-xl flex items-center justify-center font-bold text-sm shadow-md border-4 border-white shrink-0 aspect-square",children:"2"})]}),p.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"A IA Processa"}),p.jsx("p",{className:"text-gray-600 px-4",children:"Nossa inteligncia artificial l os itens, identifica o estabelecimento, a data e categoriza tudo automaticamente."})]}),p.jsxs(X.div,{variants:e,className:"relative z-10 flex flex-col items-center text-center group",children:[p.jsxs("div",{className:"w-24 h-24 bg-white rounded-3xl shadow-lg border border-green-100 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 relative shrink-0 aspect-square",children:[p.jsx("div",{className:"w-16 h-16 bg-green-50 rounded-2xl flex items-center justify-center text-green-600 shrink-0 aspect-square",children:p.jsx(A4,{className:"text-3xl"})}),p.jsx("div",{className:"absolute -top-3 -right-3 w-8 h-8 bg-green-600 text-white rounded-xl flex items-center justify-center font-bold text-sm shadow-md border-4 border-white shrink-0 aspect-square",children:"3"})]}),p.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Voc no Controle"}),p.jsx("p",{className:"text-gray-600 px-4",children:"Pronto! Seu gasto est registrado e seus grficos atualizados. Acompanhe suas metas em tempo real."})]})]})]})})},I6=()=>{const[t,e]=M.useState(!1),[n,r]=M.useState(!1),[s,i]=M.useState(!1),o=M.useRef(null),a=()=>{r(!0),setTimeout(()=>r(!1),150)},l=()=>{e(u=>!u),t||i(!1)};return M.useEffect(()=>{t&&o.current&&o.current.play().catch(u=>console.log("Autoplay preventido pelo navegador:",u))},[t]),p.jsxs("div",{className:"relative w-full max-w-sm mx-auto lg:max-w-md h-[550px] sm:h-[600px] flex items-center justify-center",children:[p.jsx("div",{className:"absolute w-[320px] h-[320px] sm:w-[450px] sm:h-[450px] bg-blue-100 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),p.jsx("div",{className:"absolute w-[300px] h-[300px] sm:w-[400px] sm:h-[400px] bg-purple-100 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000 top-0 right-0"}),p.jsxs(X.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,ease:"easeOut"},className:"relative w-[260px] h-[530px] sm:w-[300px] sm:h-[600px] rounded-[2.5rem] sm:rounded-[3.5rem] shadow-2xl z-20 p-[4px] ring-1 ring-black/40",style:{background:"linear-gradient(180deg, #344966 0%, #1B263B 40%, #0f1623 100%)",boxShadow:"0 30px 60px -12px rgba(0, 0, 0, 0.8), inset 0 1px 1px rgba(255,255,255,0.15)"},children:[p.jsx(X.div,{whileTap:{x:1},className:"absolute top-24 left-[-2px] w-[3px] h-8 bg-[#2A3C55] rounded-l-sm shadow-sm opacity-90 cursor-pointer"}),p.jsx(X.div,{whileTap:{x:1},className:"absolute top-36 left-[-2px] w-[3px] h-12 bg-[#2A3C55] rounded-l-sm shadow-sm opacity-90 cursor-pointer"}),p.jsx(X.div,{whileTap:{x:1},className:"absolute top-52 left-[-2px] w-[3px] h-12 bg-[#2A3C55] rounded-l-sm shadow-sm opacity-90 cursor-pointer"}),p.jsx(X.div,{whileTap:{x:-1},className:"absolute top-40 right-[-2px] w-[3px] h-20 bg-[#2A3C55] rounded-r-sm shadow-sm opacity-90 cursor-pointer"}),p.jsx("div",{className:"relative w-full h-full bg-black rounded-[2.25rem] sm:rounded-[3.25rem] overflow-hidden shadow-inner",children:p.jsxs("div",{className:"relative w-full h-full bg-gray-900 flex flex-col overflow-hidden",children:[p.jsx("div",{className:`absolute inset-0 bg-white z-[60] pointer-events-none transition-opacity duration-100 ease-out ${n?"opacity-90":"opacity-0"}`}),p.jsxs("div",{className:"absolute top-3 left-1/2 transform -translate-x-1/2 w-[120px] h-[35px] bg-black rounded-full flex items-center justify-between px-4 z-50 shadow-md ring-1 ring-white/5 pointer-events-none",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-[#1a1a1a]/80 shadow-inner shrink-0 aspect-square"}),p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-50 animate-pulse shrink-0 aspect-square"})]}),p.jsxs("div",{className:"absolute top-14 w-full px-6 flex justify-between text-white font-medium text-sm z-40",children:[p.jsx("span",{className:"drop-shadow-md material-symbols-outlined text-[18px]",children:"flash_off"}),p.jsx("span",{className:"bg-black/20 px-2 rounded-full text-xs flex items-center backdrop-blur-sm",children:"RAW"}),p.jsx("span",{className:"drop-shadow-md material-symbols-outlined text-[18px]",children:"motion_photos_on"})]}),p.jsx("div",{className:"flex-1 relative flex items-center justify-center perspective-1000 z-10 overflow-hidden bg-black",children:p.jsx(ko,{mode:"wait",children:t?p.jsxs(X.div,{initial:{opacity:0,filter:"blur(10px)",scale:1.1},animate:{opacity:1,filter:"blur(0px)",scale:1},exit:{opacity:0,filter:"blur(10px)"},transition:{duration:.5},className:"absolute inset-0 w-full h-full bg-black flex items-center justify-center",children:[p.jsx("video",{ref:o,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onLoadedData:()=>i(!0),className:`w-full h-full object-cover transform scale-x-[-1] transition-opacity duration-700 ${s?"opacity-100":"opacity-0"}`,children:p.jsx("source",{src:"https://i.imgur.com/FDElXuE.mp4",type:"video/mp4"})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/10 via-transparent to-black/20 pointer-events-none"})]},"front"):p.jsxs(X.div,{initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(10px)"},transition:{duration:.4},className:"absolute inset-0 w-full h-full flex items-center justify-center bg-gray-800",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-400 z-0",children:p.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/noise.png')] opacity-10"})}),p.jsxs("div",{className:"absolute inset-0 grid grid-cols-3 grid-rows-3 opacity-20 pointer-events-none z-10",children:[p.jsx("div",{className:"border-r border-white/50"}),p.jsx("div",{className:"border-r border-white/50"}),p.jsx("div",{}),p.jsx("div",{className:"border-t border-white/50 col-span-3"}),p.jsx("div",{className:"border-t border-white/50 col-span-3"})]}),p.jsxs(X.div,{initial:{scale:.9,rotateX:10},animate:{scale:1,rotateX:0},transition:{repeat:1/0,duration:4,repeatType:"reverse",ease:"easeInOut"},className:"relative w-56 bg-white shadow-2xl rotate-[-2deg] p-5 pb-8 text-gray-800 z-20",style:{transformStyle:"preserve-3d",filter:"drop-shadow(0px 15px 15px rgba(0,0,0,0.3))",maskImage:"radial-gradient(circle at 10px bottom, transparent 8px, black 8.5px)",maskSize:"20px 100%",maskPosition:"bottom",maskRepeat:"repeat-x",WebkitMaskImage:"radial-gradient(circle at 10px bottom, transparent 8px, black 8.5px)",WebkitMaskSize:"20px 100%",WebkitMaskPosition:"bottom",WebkitMaskRepeat:"repeat-x",paddingBottom:"20px"},children:[p.jsxs("div",{className:"flex flex-col items-center mb-4 border-b-2 border-dashed border-gray-300 pb-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-800 flex items-center justify-center mb-1 shrink-0 aspect-square",children:p.jsx("span",{className:"font-bold text-[8px]",children:"C"})}),p.jsx("h3",{className:"font-bold text-sm tracking-wider text-center",children:"Hipermercado Carrefour"}),p.jsx("p",{className:"text-[9px] text-gray-500 font-mono",children:"Av. das Naes, 1500 - SP"}),p.jsx("p",{className:"text-[9px] text-gray-500 font-mono mt-1",children:"12/10/2024 14:35:22"})]}),p.jsxs("div",{className:"space-y-1.5 font-mono text-[10px] text-gray-700",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"001 LEITE INTEGRAL 1L"}),p.jsx("span",{children:"4,90"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"002 CAF TORRADO 500G"}),p.jsx("span",{children:"18,50"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"003 AZEITE EXTRA VIRGEM"}),p.jsx("span",{children:"32,90"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"004 ARROZ BRANCO 5KG"}),p.jsx("span",{children:"28,90"})]})]}),p.jsx("div",{className:"border-t-2 border-gray-800 my-3 border-dashed"}),p.jsxs("div",{className:"flex justify-between items-center font-mono",children:[p.jsx("span",{className:"font-bold text-sm",children:"TOTAL R$"}),p.jsx("span",{className:"font-bold text-lg",children:"85,20"})]}),p.jsx(X.div,{className:"absolute left-[-10px] w-[120%] h-1 bg-blue-500 shadow-[0_0_15px_3px_rgba(59,130,246,0.8)] z-20",animate:{top:["10%","90%","10%"]},transition:{repeat:1/0,duration:3,ease:"linear"}})]}),p.jsxs("div",{className:"absolute w-64 h-80 border border-yellow-400/30 rounded-lg pointer-events-none z-10",children:[p.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-yellow-400 shadow-[0_0_5px_rgba(250,204,21,0.8)]"}),p.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-yellow-400 shadow-[0_0_5px_rgba(250,204,21,0.8)]"}),p.jsx("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-yellow-400 shadow-[0_0_5px_rgba(250,204,21,0.8)]"}),p.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-yellow-400 shadow-[0_0_5px_rgba(250,204,21,0.8)]"})]})]},"rear")})}),p.jsxs("div",{className:"h-32 bg-black/40 backdrop-blur-xl flex flex-col justify-end pb-6 relative z-20",children:[p.jsxs("div",{className:"flex justify-center items-center gap-6 text-[11px] font-medium text-white/50 mb-4 overflow-hidden",children:[p.jsx("span",{children:"CINEMATIC"}),p.jsx("span",{children:"VDEO"}),p.jsx("span",{className:"text-yellow-400 font-bold bg-black/20 px-2 py-0.5 rounded-full shadow-sm",children:"FOTO"}),p.jsx("span",{children:"RETRATO"}),p.jsx("span",{children:"PANO"})]}),p.jsxs("div",{className:"flex items-center justify-between px-10",children:[p.jsx(X.div,{whileTap:{scale:.9},className:"w-12 h-12 rounded-lg bg-black overflow-hidden border border-white/20 relative shadow-lg cursor-pointer shrink-0 aspect-square",children:p.jsx("img",{src:"https://images.unsplash.com/photo-1543610892-0b1f7e6d8ac1?auto=format&fit=crop&w=150&q=80",alt:"Galeria",className:"w-full h-full object-cover opacity-90"})}),p.jsx(X.button,{onClick:a,whileTap:{scale:.9},className:"w-16 h-16 rounded-full border-4 border-white flex items-center justify-center shadow-lg bg-white/10 backdrop-blur-sm cursor-pointer shrink-0 aspect-square",children:p.jsx(X.div,{animate:n?{scale:.85}:{scale:1},className:"w-14 h-14 bg-white rounded-full shrink-0 aspect-square"})}),p.jsx(X.button,{onClick:l,whileTap:{rotate:180,scale:.9},transition:{duration:.4},className:"w-12 h-12 rounded-full bg-black/40 border border-white/10 flex items-center justify-center text-white backdrop-blur-md cursor-pointer hover:bg-black/60 shrink-0 aspect-square",children:p.jsx("span",{className:"material-symbols-outlined text-2xl",children:"cached"})})]})]}),p.jsx("div",{className:"absolute bottom-1.5 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-white/80 rounded-full z-40"})]})})]}),p.jsx(ko,{children:!t&&p.jsxs(p.Fragment,{children:[p.jsx(Bh,{icon:p.jsx(Ro,{}),text:"Status",subtext:"Leitura Concluda",color:"bg-green-500",delay:.5,x:-90,y:-160},"badge1"),p.jsx(Bh,{icon:p.jsx(pf,{}),text:"Total",subtext:"R$ 85,20",color:"bg-blue-600",delay:.7,x:100,y:120},"badge2"),p.jsx(Bh,{icon:p.jsx(By,{}),text:"Carteira",subtext:"4 Itens Adicionados",color:"bg-purple-600",delay:1.5,x:-80,y:80},"badge3")]})})]})},S6=({question:t,answer:e})=>{const[n,r]=M.useState(!1);return p.jsxs("div",{className:"border-b border-gray-100 last:border-0",children:[p.jsxs("button",{onClick:()=>r(!n),className:"w-full py-4 flex justify-between items-center text-left focus:outline-none group",children:[p.jsx("span",{className:`font-semibold text-gray-800 transition-colors ${n?"text-blue-600":"group-hover:text-blue-600"}`,children:t}),p.jsx("span",{className:`transform transition-transform duration-200 ${n?"rotate-90":""} text-gray-400 group-hover:text-blue-500`,children:p.jsx(YN,{className:"text-xl"})})]}),p.jsx(ko,{children:n&&p.jsx(X.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:p.jsx("p",{className:"text-gray-600 leading-relaxed pb-4 text-sm",children:e})})})]})},C6=({onStart:t,scrollTarget:e,clearScrollTarget:n})=>{const{pricing:r}=kR();M.useEffect(()=>{if(e&&n){const i=document.getElementById(e);i&&(i.scrollIntoView({behavior:"smooth"}),n())}},[e,n]);const s=[{question:"Como funciona a leitura automtica de notas?",answer:"Utilizamos inteligncia artificial de ltima gerao para analisar a imagem da sua nota fiscal. O sistema identifica a data, o estabelecimento, os itens comprados e os valores, categorizando tudo automaticamente em segundos."},{question:"O aplicativo  seguro?",answer:"Absolutamente. Utilizamos criptografia de ponta a ponta e infraestrutura de segurana de nvel bancrio para proteger seus dados. Suas informaes so confidenciais e no so vendidas para terceiros."},{question:"Meus dados esto protegidos?",answer:"Sim. Apenas voc tem acesso aos seus dados financeiros. Utilizamos os mais altos padres de segurana do mercado."},{question:"Posso cancelar minha assinatura quando quiser?",answer:"Sim, sem burocracia. Se voc assinar o plano mensal, pode cancelar a qualquer momento e continuar com acesso at o fim do ciclo vigente."},{question:"Consigo exportar meus dados para o Excel?",answer:"Com certeza. No painel de Relatrios, voc encontra uma opo para 'Baixar CSV Completo'. Esse arquivo pode ser aberto no Excel, Google Sheets ou qualquer planilha."},{question:"O aplicativo funciona offline?",answer:"O app precisa de internet para processar as imagens com Inteligncia Artificial e sincronizar os dados na nuvem. Isso garante que suas informaes estejam sempre salvas e acessveis em qualquer dispositivo."},{question:"Existe verso para empresas?",answer:"Atualmente, o foco  em finanas pessoais. No entanto, muitos microempreendedores usam o MeuGasto para separar suas despesas, criando uma conta especfica para o negcio."},{question:"Posso compartilhar a conta com minha famlia?",answer:"Sim! Voc pode compartilhar o acesso (login e senha) com membros da sua famlia para que todos contribuam com o controle financeiro da casa."},{question:"Esqueci minha senha, como recupero?",answer:"Na tela de login, clique em 'Esqueceu a senha?'. Enviaremos um link seguro para o seu e-mail cadastrado para voc criar uma nova senha."}];return p.jsxs("div",{className:"min-h-screen bg-white font-sans selection:bg-blue-100",children:[p.jsx("nav",{className:"fixed w-full z-50 bg-white/80 backdrop-blur-md border-b border-gray-100 transition-all duration-300",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between items-center h-16",children:[p.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[p.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 text-white w-10 h-10 rounded-lg shadow-md shadow-blue-600/20 shrink-0 flex items-center justify-center",children:p.jsx(fd,{className:"text-xl"})}),p.jsx("span",{className:"font-bold text-xl text-gray-900 tracking-tight",children:"MeuGasto"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("button",{onClick:()=>t("login"),className:"text-gray-600 font-medium hover:text-blue-600 transition-colors text-sm hidden sm:block",children:"Entrar"}),p.jsx("button",{onClick:()=>t("register"),className:"bg-gray-900 text-white px-5 py-2.5 rounded-full font-bold text-sm hover:bg-gray-800 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:scale-95",children:"Comear Agora"})]})]})})}),p.jsxs("section",{className:"pt-32 pb-20 lg:pt-40 lg:pb-32 overflow-hidden relative",children:[p.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10",children:[p.jsx("div",{className:"absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-blue-50 rounded-full blur-3xl opacity-50"}),p.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[600px] h-[600px] bg-purple-50 rounded-full blur-3xl opacity-50"})]}),p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-12 lg:gap-20",children:[p.jsx("div",{className:"w-full lg:w-1/2 text-center lg:text-left z-10",children:p.jsxs(X.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[p.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 border border-blue-100 rounded-full px-4 py-1.5 mb-6 hover:bg-blue-100 transition-colors cursor-default",children:[p.jsx("span",{className:"flex h-2 w-2 rounded-full bg-blue-600 animate-pulse shrink-0 aspect-square"}),p.jsx("span",{className:"text-sm font-semibold text-blue-700 tracking-wide uppercase text-[10px] sm:text-xs",children:"O Fim da Digitao Manual"})]}),p.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold text-gray-900 leading-[1.1] mb-6 tracking-tight",children:["Onde foi parar seu dinheiro? ",p.jsx("br",{className:"hidden lg:block"}),p.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-500",children:"Descubra em 3segundos"})]}),p.jsx("p",{className:"text-lg text-gray-600 mb-8 leading-relaxed max-w-2xl mx-auto lg:mx-0",children:'Esquea planilhas. Tire uma foto e nossa IA categoriza tudo. Encontre os "gastos invisveis" e comece a sobrar dinheiro hoje.'}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4",children:[p.jsxs(X.button,{onClick:()=>t("register"),whileHover:{scale:1.02},whileTap:{scale:.98},className:"relative w-full sm:w-auto inline-flex overflow-hidden rounded-full p-[2px] focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-white shadow-xl shadow-blue-500/40",children:[p.jsx("span",{className:"absolute inset-[-1000%] animate-[spin_2s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#bae6fd_0%,#2563eb_50%,#bae6fd_100%)]"}),p.jsxs("span",{className:"inline-flex h-full w-full cursor-pointer items-center justify-center rounded-full bg-blue-600 px-8 py-4 text-lg font-bold text-white backdrop-blur-3xl transition-all hover:bg-blue-700 gap-2",children:["Comear Agora",p.jsx(YN,{className:"text-xl"})]})]}),p.jsx("button",{onClick:()=>{const i=document.getElementById("how-it-works");i&&i.scrollIntoView({behavior:"smooth"})},className:"w-full sm:w-auto px-8 py-4 bg-white text-gray-700 border border-gray-200 rounded-full font-bold text-lg hover:bg-gray-50 transition-all flex items-center justify-center hover:border-gray-300 active:scale-95",children:"Ver Como Funciona"})]}),p.jsxs("div",{className:"mt-8 flex items-center justify-center lg:justify-start gap-4 text-sm text-gray-500",children:[p.jsx("div",{className:"flex -space-x-2",children:[1,2,3,4].map(i=>p.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 border-2 border-white overflow-hidden shrink-0 aspect-square",children:p.jsx("img",{src:`https://i.pravatar.cc/100?img=${i+10}`,alt:"User",className:"w-full h-full object-cover"})},i))}),p.jsxs("p",{children:["Mais de ",p.jsx("span",{className:"font-bold text-gray-700",children:"5.000 usurios"})," economizando."]})]})]})}),p.jsx("div",{className:"w-full lg:w-1/2 relative flex justify-center lg:justify-end",children:p.jsx(I6,{})})]})})]}),p.jsx(w6,{}),p.jsx("section",{id:"how-it-works",children:p.jsx(E6,{})}),p.jsx("section",{id:"features",className:"py-24 bg-gray-50 border-t border-gray-200 overflow-hidden",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20",children:[p.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-gray-900 mb-6",children:"Tudo o que voc precisa para economizar"}),p.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:"Ferramentas poderosas para voc assumir o controle do seu dinheiro sem esforo, com uma interface que voc vai amar usar."})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[p.jsxs(X.div,{whileHover:{y:-8,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.1)"},className:"bg-white rounded-[2rem] shadow-lg border border-gray-100 overflow-hidden flex flex-col relative group transition-all duration-300 h-full",children:[p.jsx("div",{className:"h-64 relative",children:p.jsx(v6,{})}),p.jsxs("div",{className:"p-8 flex-1 flex flex-col",children:[p.jsx("div",{className:"w-12 h-12 bg-blue-100 text-blue-600 rounded-2xl flex items-center justify-center mb-6 shadow-sm shrink-0 aspect-square",children:p.jsx(dd,{className:"text-2xl"})}),p.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition-colors",children:"Leitura Inteligente"}),p.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Nossa IA escaneia recibos fsicos e extrai data, local e valores instantaneamente. Adeus digitao manual."})]})]}),p.jsxs(X.div,{whileHover:{y:-8,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.1)"},className:"bg-white rounded-[2rem] shadow-lg border border-gray-100 overflow-hidden flex flex-col relative group transition-all duration-300 h-full",children:[p.jsx("div",{className:"h-64 relative",children:p.jsx(_6,{})}),p.jsxs("div",{className:"p-8 flex-1 flex flex-col",children:[p.jsx("div",{className:"w-12 h-12 bg-purple-100 text-purple-600 rounded-2xl flex items-center justify-center mb-6 shadow-sm shrink-0 aspect-square",children:p.jsx(By,{className:"text-2xl"})}),p.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-purple-600 transition-colors",children:"Categorizao Automtica"}),p.jsx("p",{className:"text-gray-600 leading-relaxed",children:"O sistema aprende seus hbitos e organiza seus gastos em categorias como Alimentao, Transporte e Lazer."})]})]}),p.jsxs(X.div,{whileHover:{y:-8,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.1)"},className:"bg-white rounded-[2rem] shadow-lg border border-gray-100 overflow-hidden flex flex-col relative group transition-all duration-300 h-full",children:[p.jsx("div",{className:"h-64 relative",children:p.jsx(x6,{})}),p.jsxs("div",{className:"p-8 flex-1 flex flex-col",children:[p.jsx("div",{className:"w-12 h-12 bg-emerald-100 text-emerald-600 rounded-2xl flex items-center justify-center mb-6 shadow-sm shrink-0 aspect-square",children:p.jsx(QN,{className:"text-2xl"})}),p.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-emerald-600 transition-colors",children:"Metas e Limites"}),p.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Defina tetos de gastos para cada categoria e receba alertas se estiver gastando rpido demais."})]})]})]})]})}),p.jsx(T6,{}),p.jsx("section",{className:"py-20 bg-white border-t border-gray-100",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[p.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Quem usa, recomenda"}),p.jsx("p",{className:"text-lg text-gray-600",children:"Junte-se a milhares de brasileiros que transformaram sua relao com o dinheiro."})]}),p.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[p.jsxs("div",{className:"bg-gray-50 p-8 rounded-3xl border border-gray-100 hover:shadow-lg transition-shadow",children:[p.jsx("div",{className:"flex gap-1 text-yellow-400 mb-4",children:[1,2,3,4,5].map(i=>p.jsx("span",{className:"material-symbols-outlined text-lg fill-current",children:"star"},i))}),p.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:'"A funo de ler notinhas pela cmera  mgica! Eu perdia horas digitando gastos no Excel. Agora, em segundos, tudo est organizado. Mudou minha vida financeira."'}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:"https://i.pravatar.cc/100?img=5",alt:"Mariana Costa",className:"w-10 h-10 rounded-full object-cover shrink-0 aspect-square"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-gray-900 text-sm",children:"Mariana Costa"}),p.jsx("p",{className:"text-xs text-gray-500",children:"Designer Grfica"})]})]})]}),p.jsxs("div",{className:"bg-gray-50 p-8 rounded-3xl border border-gray-100 hover:shadow-lg transition-shadow",children:[p.jsx("div",{className:"flex gap-1 text-yellow-400 mb-4",children:[1,2,3,4,5].map(i=>p.jsx("span",{className:"material-symbols-outlined text-lg fill-current",children:"star"},i))}),p.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:'"Simples, direto e funcional. O que eu mais gosto  poder separar meus gastos pessoais dos gastos da minha microempresa. Os grficos so muito claros."'}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:"https://i.pravatar.cc/100?img=12",alt:"Carlos Eduardo",className:"w-10 h-10 rounded-full object-cover shrink-0 aspect-square"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-gray-900 text-sm",children:"Carlos Eduardo"}),p.jsx("p",{className:"text-xs text-gray-500",children:"Microempresrio"})]})]})]}),p.jsxs("div",{className:"bg-gray-50 p-8 rounded-3xl border border-gray-100 hover:shadow-lg transition-shadow",children:[p.jsx("div",{className:"flex gap-1 text-yellow-400 mb-4",children:[1,2,3,4,5].map(i=>p.jsx("span",{className:"material-symbols-outlined text-lg fill-current",children:"star"},i))}),p.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:'"Finalmente consegui juntar dinheiro para minha viagem! A ferramenta de Metas me avisa quando estou gastando demais com delivery. Recomendo muito!"'}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:"https://i.pravatar.cc/100?img=9",alt:"Fernanda Lima",className:"w-10 h-10 rounded-full object-cover shrink-0 aspect-square"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-gray-900 text-sm",children:"Fernanda Lima"}),p.jsx("p",{className:"text-xs text-gray-500",children:"Estudante de Direito"})]})]})]})]})]})}),p.jsx("section",{id:"pricing",className:"py-24 bg-gray-50 relative overflow-hidden",children:p.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[p.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[p.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-gray-900 mb-4",children:"Investimento Inteligente"}),p.jsx("p",{className:"text-lg text-gray-600",children:"Planos flexveis para voc organizar suas finanas. Cancele quando quiser."})]}),p.jsxs("div",{className:"flex flex-col md:flex-row gap-8 justify-center items-stretch",children:[p.jsxs(X.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.1},className:"flex-1 max-w-md w-full bg-white p-8 rounded-3xl border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300 flex flex-col relative group",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Mensal"}),p.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Flexibilidade total."})]}),p.jsx("div",{className:"mb-8",children:p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["R$ ",r.monthlyPrice.toFixed(2).replace(".",",")]}),p.jsx("span",{className:"text-gray-500 font-medium",children:"/ms"})]})}),p.jsx("ul",{className:"space-y-4 mb-8 flex-1",children:["Leitura ilimitada de recibos","Acesso a todos os relatrios","Suporte prioritrio"].map((i,o)=>p.jsxs("li",{className:"flex items-start gap-3 text-gray-600",children:[p.jsx("div",{className:"bg-gray-100 w-6 h-6 rounded-full flex-shrink-0 mt-0.5 flex items-center justify-center",children:p.jsx(Ro,{className:"text-gray-500 text-xs"})}),p.jsx("span",{className:"text-sm font-medium",children:i})]},o))}),p.jsx("button",{onClick:()=>t("register"),className:"w-full py-4 rounded-xl font-bold text-blue-600 border-2 border-blue-100 hover:border-blue-200 hover:bg-blue-50 transition-all",children:"Assinar Mensal"})]}),p.jsxs("div",{className:"relative flex-1 max-w-md w-full z-10",children:[p.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30",children:p.jsx(X.span,{animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:2,ease:"easeInOut"},className:"bg-blue-600 text-white text-xs font-bold px-4 py-1.5 rounded-full shadow-md tracking-wide uppercase whitespace-nowrap",children:"Melhor Escolha"})}),p.jsxs("div",{className:"relative w-full h-full rounded-[22px] overflow-hidden shadow-2xl",children:[p.jsx("style",{children:`
                        @keyframes rotacaodegrade {
                            to { transform: translate(-50%, -50%) rotate(1turn); }
                        }
                    `}),p.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] z-0",style:{background:"conic-gradient(from 0deg at 50% 50%, transparent 0deg, #2563eb 60deg, transparent 60.1deg), conic-gradient(from 0deg at 50% 50%, transparent 180deg, #2563eb 240deg, transparent 240.1deg)",filter:"blur(15px)",animation:"rotacaodegrade 4s linear infinite"}}),p.jsxs("div",{className:"relative z-10 bg-white rounded-[20px] m-[2px] p-8 h-[calc(100%-4px)] w-[calc(100%-4px)] flex flex-col",children:[p.jsxs("div",{className:"mb-6 mt-2",children:[p.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Anual"}),p.jsx("p",{className:"text-blue-600 text-sm mt-1 font-medium",children:"Economia de 30%"})]}),p.jsxs("div",{className:"mb-8",children:[p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsxs("span",{className:"text-5xl font-extrabold text-gray-900 tracking-tight",children:["R$ ",(r.annualPrice/12).toFixed(2).replace(".",",")]}),p.jsx("span",{className:"text-gray-500 font-medium",children:"/ms"})]}),p.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Cobrado anualmente: R$ ",r.annualPrice.toFixed(2).replace(".",",")]})]}),p.jsx("ul",{className:"space-y-4 mb-8 flex-1",children:["Tudo do plano mensal",p.jsxs("span",{children:["Ganhe ",p.jsx("span",{className:"text-blue-600 font-bold",children:"2 meses grtis"})]},"promo"),"Acesso antecipado a novas features"].map((i,o)=>p.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[p.jsx("div",{className:"bg-blue-100 w-6 h-6 rounded-full flex-shrink-0 mt-0.5 flex items-center justify-center",children:p.jsx(Ro,{className:"text-blue-600 text-xs"})}),p.jsx("span",{className:"text-sm font-medium",children:i})]},o))}),p.jsxs("div",{className:"relative overflow-hidden rounded-xl",children:[p.jsx("button",{onClick:()=>t("register"),className:"w-full py-4 rounded-xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:shadow-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md transform active:scale-95 relative z-10",children:"Assinar Anual"}),p.jsx(X.div,{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-[-20deg]",initial:{left:"-150%"},animate:{left:"150%"},transition:{repeat:1/0,duration:2.5,ease:"easeInOut",repeatDelay:3}})]})]})]})]})]})]})}),p.jsx("section",{id:"faq",className:"py-24 bg-white border-t border-gray-100",children:p.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Perguntas Frequentes"}),p.jsx("p",{className:"text-gray-600",children:"Tire suas dvidas e veja como o MeuGasto pode te ajudar."})]}),p.jsx("div",{className:"space-y-2",children:s.map((i,o)=>p.jsx(S6,{question:i.question,answer:i.answer},o))})]})}),p.jsx("section",{className:"py-24 bg-white",children:p.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs(X.div,{initial:{opacity:0,y:40,scale:.95},whileInView:{opacity:1,y:0,scale:1},whileHover:{y:-5,boxShadow:"0 25px 50px -12px rgba(37, 99, 235, 0.25)"},viewport:{once:!0,margin:"-100px"},transition:{duration:.8,ease:"easeOut"},className:"relative rounded-[3rem] overflow-hidden shadow-2xl p-12 md:p-20 text-center group border border-blue-100",children:[p.jsx(y6,{}),p.jsxs("div",{className:"relative z-20",children:[p.jsxs("h2",{className:"text-3xl md:text-5xl font-extrabold text-white mb-6 leading-tight drop-shadow-md",children:["Assuma o controle total",p.jsx("br",{}),"do seu dinheiro hoje"]}),p.jsx("p",{className:"text-blue-100 text-lg md:text-xl mb-10 max-w-2xl mx-auto drop-shadow-sm font-medium",children:"Junte-se a milhares de pessoas que j transformaram sua vida financeira. Seu futuro comea agora."}),p.jsxs(X.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("register"),className:"relative bg-white text-blue-900 font-extrabold py-4 px-10 rounded-full text-lg shadow-[0_0_20px_rgba(255,255,255,0.3)] hover:shadow-[0_0_30px_rgba(255,255,255,0.5)] transition-all overflow-hidden",children:[p.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Garantir Meu Acesso",p.jsxs("span",{className:"flex h-3 w-3 relative",children:[p.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),p.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-blue-500"})]})]}),p.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:animate-[shimmer_1.5s_infinite] bg-gradient-to-r from-transparent via-blue-100/50 to-transparent z-0"})]})]})]})})}),p.jsx("footer",{className:"bg-gray-50 border-t border-gray-200 py-12",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"bg-gray-200 w-8 h-8 rounded-lg text-gray-500 shrink-0 flex items-center justify-center",children:p.jsx(fd,{className:"text-lg"})}),p.jsx("span",{className:"font-bold text-gray-700",children:"MeuGasto"})]}),p.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-sm text-gray-600",children:[p.jsx("button",{onClick:()=>t("terms"),className:"hover:text-blue-600 transition-colors",children:"Termos de Uso"}),p.jsx("button",{onClick:()=>t("privacy"),className:"hover:text-blue-600 transition-colors",children:"Poltica de Privacidade"}),p.jsx("a",{href:"mailto:suporte@meugasto.app",className:"hover:text-blue-600 transition-colors",children:"Contato"})]}),p.jsxs("p",{className:"text-xs text-gray-400",children:[" ",new Date().getFullYear()," MeuGasto. Todos os direitos reservados."]})]})})})]})},A6="modulepreload",N6=function(t){return"/"+t},hT={},Ho=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=N6(l),l in hT)return;hT[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":A6,u||(m.as="script"),m.crossOrigin="",m.href=l,a&&m.setAttribute("nonce",a),document.head.appendChild(m),u)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let P6,R6;function b6(){return{geminiUrl:P6,vertexUrl:R6}}function k6(t,e,n,r){var s,i;if(!(t!=null&&t.baseUrl)){const o=b6();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(i=o.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lr{}function K(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const i=e[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function h(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const d=l[u];h(d,e.slice(i+1),n[u])}else for(const u of l)h(u,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];h(l[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(a=>c(a,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function D6(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),i=r.split("."),o=new Set;let a=-1;for(let l=0;l<s.length;l++)if(s[l]==="*"){a=l;break}if(a!==-1&&i.length>a)for(let l=a;l<i.length;l++){const u=i[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}Fm(t,s,i,0,o)}}function Fm(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])Fm(l,e,n,r+1,s)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(u=>!u.startsWith("_")&&!s.has(u)),l={};for(const u of a)l[u]=o[u];for(const[u,d]of Object.entries(l)){const m=[];for(const g of n.slice(r))g==="*"?m.push(u):m.push(g);h(o,m,d)}for(const u of a)delete o[u]}}else{const o=t;i in o&&Fm(o[i],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tv(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M6(t){const e={},n=c(t,["operationName"]);n!=null&&h(e,["operationName"],n);const r=c(t,["resourceName"]);return r!=null&&h(e,["_url","resourceName"],r),e}function V6(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const s=c(t,["done"]);s!=null&&h(e,["done"],s);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const o=c(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],F6(o)),e}function L6(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const s=c(t,["done"]);s!=null&&h(e,["done"],s);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const o=c(t,["response"]);return o!=null&&h(e,["response"],U6(o)),e}function F6(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>O6(o))),h(e,["generatedVideos"],i)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function U6(t){const e={},n=c(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>q6(o))),h(e,["generatedVideos"],i)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function O6(t){const e={},n=c(t,["video"]);return n!=null&&h(e,["video"],H6(n)),e}function q6(t){const e={},n=c(t,["_self"]);return n!=null&&h(e,["video"],W6(n)),e}function B6(t){const e={},n=c(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function j6(t){const e={},n=c(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function G6(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const s=c(t,["done"]);s!=null&&h(e,["done"],s);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const o=c(t,["response"]);return o!=null&&h(e,["response"],$6(o)),e}function $6(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&h(e,["parent"],r);const s=c(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function DR(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const s=c(t,["done"]);s!=null&&h(e,["done"],s);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const o=c(t,["response"]);return o!=null&&h(e,["response"],z6(o)),e}function z6(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&h(e,["parent"],r);const s=c(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function H6(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&h(e,["videoBytes"],Tv(r));const s=c(t,["encoding"]);return s!=null&&h(e,["mimeType"],s),e}function W6(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],Tv(r));const s=c(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pT;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(pT||(pT={}));var mT;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(mT||(mT={}));var gT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(gT||(gT={}));var be;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(be||(be={}));var yT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(yT||(yT={}));var vT;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(vT||(vT={}));var _T;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(_T||(_T={}));var xT;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(xT||(xT={}));var wT;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(wT||(wT={}));var TT;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(TT||(TT={}));var ET;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ET||(ET={}));var IT;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(IT||(IT={}));var ST;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ST||(ST={}));var CT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(CT||(CT={}));var AT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(AT||(AT={}));var NT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(NT||(NT={}));var PT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(PT||(PT={}));var RT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(RT||(RT={}));var bT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(bT||(bT={}));var _d;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(_d||(_d={}));var kT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(kT||(kT={}));var DT;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(DT||(DT={}));var MT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(MT||(MT={}));var Um;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Um||(Um={}));var VT;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(VT||(VT={}));var LT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(LT||(LT={}));var FT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(FT||(FT={}));var UT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(UT||(UT={}));var OT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(OT||(OT={}));var qT;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(qT||(qT={}));var BT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(BT||(BT={}));var jT;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(jT||(jT={}));var GT;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(GT||(GT={}));var $T;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})($T||($T={}));var zT;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zT||(zT={}));var HT;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(HT||(HT={}));var WT;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(WT||(WT={}));var KT;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(KT||(KT={}));var JT;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(JT||(JT={}));var YT;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(YT||(YT={}));var QT;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(QT||(QT={}));var XT;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(XT||(XT={}));var ZT;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(ZT||(ZT={}));var eE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(eE||(eE={}));var tE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(tE||(tE={}));var nE;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(nE||(nE={}));var rE;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(rE||(rE={}));var sE;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(sE||(sE={}));var iE;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(iE||(iE={}));var oE;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(oE||(oE={}));var aE;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(aE||(aE={}));var lE;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(lE||(lE={}));var uE;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(uE||(uE={}));var cE;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(cE||(cE={}));var Qi;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Qi||(Qi={}));class Om{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ta{get text(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const m=[];for(const g of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,w]of Object.entries(g))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(w!==null||w!==void 0)&&m.push(v);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;d=!0,u+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const m of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(m))g!=="inlineData"&&(v!==null||v!==void 0)&&d.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,s,i,o,a,l,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,s,i,o,a,l,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class dE{}class fE{}class K6{}class J6{}class Y6{}class Q6{}class hE{}class pE{}class mE{}class X6{}class xd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new xd;let s;const i=e;return n?s=L6(i):s=V6(i),Object.assign(r,s),r}}class gE{}class yE{}class vE{}class Z6{}class e3{}class t3{}class Ev{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Ev,i=G6(e);return Object.assign(r,i),r}}class n3{}class r3{}class s3{}class _E{}class i3{get text(){var e,n,r;let s="",i=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var e,n,r;let s="";const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&i.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class o3{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Iv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Iv,i=DR(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function we(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function MR(t,e){const n=we(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function VR(t){return Array.isArray(t)?t.map(e=>wd(e)):[wd(t)]}function wd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function LR(t){const e=wd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function FR(t){const e=wd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function xE(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function UR(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>xE(e)):[xE(t)]}function qm(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function wE(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function TE(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Nt(t){if(t==null)throw new Error("ContentUnion is required");return qm(t)?t:{role:"user",parts:UR(t)}}function Sv(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Nt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Nt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Nt(n)):[Nt(e)]}function Tn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(wE(t)||TE(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Nt(t)]}const e=[],n=[],r=qm(t[0]);for(const s of t){const i=qm(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(s);else{if(wE(s)||TE(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:UR(n)}),e}function a3(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(be).includes(n[0].toUpperCase())?n[0].toUpperCase():be.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(be).includes(r.toUpperCase())?r.toUpperCase():be.TYPE_UNSPECIFIED})}}function uo(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&a3(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(be).includes(a.toUpperCase())?a.toUpperCase():be.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=uo(a);else if(r.includes(o)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(uo(u))}e[o]=l}else if(s.includes(o)){const l={};for(const[u,d]of Object.entries(a))l[u]=uo(d);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Cv(t){return uo(t)}function Av(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Nv(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Wo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=uo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=uo(e.response));return t}function Ko(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function l3(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Fr(t,e){if(typeof e!="string")throw new Error("name must be a string");return l3(t,e,"cachedContents")}function OR(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function As(t){return Tv(t)}function u3(t){return t!=null&&typeof t=="object"&&"name"in t}function c3(t){return t!=null&&typeof t=="object"&&"video"in t}function d3(t){return t!=null&&typeof t=="object"&&"uri"in t}function qR(t){var e;let n;if(u3(t)&&(n=t.name),!(d3(t)&&(n=t.uri,n===void 0))&&!(c3(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function BR(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function jR(t){for(const e of["models","tunedModels","publisherModels"])if(f3(t,e))return t[e];return[]}function f3(t,e){return t!==null&&typeof t=="object"&&e in t}function h3(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function p3(t,e={}){const n=[],r=new Set;for(const s of t){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const o=h3(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function GR(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function m3(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function $R(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let i=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Jo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function zR(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g3(t){const e={},n=c(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const r=c(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Y3(o))),h(e,["inlinedResponses"],i)}const s=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["inlinedEmbedContentResponses"],i)}return e}function y3(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const r=c(t,["gcsDestination","outputUriPrefix"]);r!=null&&h(e,["gcsUri"],r);const s=c(t,["bigqueryDestination","outputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function v3(t){const e={},n=c(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const r=c(t,["gcsUri"]);r!=null&&h(e,["gcsDestination","outputUriPrefix"],r);const s=c(t,["bigqueryUri"]);if(s!=null&&h(e,["bigqueryDestination","outputUri"],s),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ic(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata","displayName"]);r!=null&&h(e,["displayName"],r);const s=c(t,["metadata","state"]);s!=null&&h(e,["state"],zR(s));const i=c(t,["metadata","createTime"]);i!=null&&h(e,["createTime"],i);const o=c(t,["metadata","endTime"]);o!=null&&h(e,["endTime"],o);const a=c(t,["metadata","updateTime"]);a!=null&&h(e,["updateTime"],a);const l=c(t,["metadata","model"]);l!=null&&h(e,["model"],l);const u=c(t,["metadata","output"]);return u!=null&&h(e,["dest"],g3($R(u))),e}function Bm(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["displayName"]);r!=null&&h(e,["displayName"],r);const s=c(t,["state"]);s!=null&&h(e,["state"],zR(s));const i=c(t,["error"]);i!=null&&h(e,["error"],i);const o=c(t,["createTime"]);o!=null&&h(e,["createTime"],o);const a=c(t,["startTime"]);a!=null&&h(e,["startTime"],a);const l=c(t,["endTime"]);l!=null&&h(e,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(e,["updateTime"],u);const d=c(t,["model"]);d!=null&&h(e,["model"],d);const m=c(t,["inputConfig"]);m!=null&&h(e,["src"],_3(m));const g=c(t,["outputConfig"]);g!=null&&h(e,["dest"],y3($R(g)));const v=c(t,["completionStats"]);return v!=null&&h(e,["completionStats"],v),e}function _3(t){const e={},n=c(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const r=c(t,["gcsSource","uris"]);r!=null&&h(e,["gcsUri"],r);const s=c(t,["bigquerySource","inputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function x3(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=c(e,["fileName"]);r!=null&&h(n,["fileName"],r);const s=c(e,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>J3(t,o))),h(n,["requests","requests"],i)}return n}function w3(t){const e={},n=c(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const r=c(t,["gcsUri"]);r!=null&&h(e,["gcsSource","uris"],r);const s=c(t,["bigqueryUri"]);if(s!=null&&h(e,["bigquerySource","inputUri"],s),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function T3(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function E3(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Jo(t,r)),n}function I3(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Jo(t,r)),n}function S3(t){const e={},n=c(t,["content"]);n!=null&&h(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],C3(r));const s=c(t,["tokenCount"]);s!=null&&h(e,["tokenCount"],s);const i=c(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const o=c(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const a=c(t,["groundingMetadata"]);a!=null&&h(e,["groundingMetadata"],a);const l=c(t,["index"]);l!=null&&h(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const d=c(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>v)),h(e,["safetyRatings"],g)}const m=c(t,["urlContextMetadata"]);return m!=null&&h(e,["urlContextMetadata"],m),e}function C3(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),h(e,["citations"],r)}return e}function HR(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>rG(i))),h(e,["parts"],s)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function A3(t,e){const n={},r=c(t,["displayName"]);if(e!==void 0&&r!=null&&h(e,["batch","displayName"],r),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function N3(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const s=c(t,["dest"]);return e!==void 0&&s!=null&&h(e,["outputConfig"],v3(m3(s))),n}function EE(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["src"]);s!=null&&h(n,["batch","inputConfig"],x3(t,GR(t,s)));const i=c(e,["config"]);return i!=null&&A3(i,n),n}function P3(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["model"],we(t,r));const s=c(e,["src"]);s!=null&&h(n,["inputConfig"],w3(GR(t,s)));const i=c(e,["config"]);return i!=null&&N3(i,n),n}function R3(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&h(e,["batch","displayName"],r),n}function b3(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["src"]);s!=null&&h(n,["batch","inputConfig"],U3(t,s));const i=c(e,["config"]);return i!=null&&R3(i,n),n}function k3(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Jo(t,r)),n}function D3(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Jo(t,r)),n}function M3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const s=c(t,["done"]);s!=null&&h(e,["done"],s);const i=c(t,["error"]);return i!=null&&h(e,["error"],i),e}function V3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const s=c(t,["done"]);s!=null&&h(e,["done"],s);const i=c(t,["error"]);return i!=null&&h(e,["error"],i),e}function L3(t,e){const n={},r=c(e,["contents"]);if(r!=null){let i=Sv(t,r);Array.isArray(i)&&(i=i.map(o=>o)),h(n,["requests[]","request","content"],i)}const s=c(e,["config"]);return s!=null&&(h(n,["_self"],F3(s,n)),D6(n,{"requests[].*":"requests[].request.*"})),n}function F3(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const s=c(t,["title"]);e!==void 0&&s!=null&&h(e,["requests[]","title"],s);const i=c(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&h(e,["requests[]","outputDimensionality"],i),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function U3(t,e){const n={},r=c(e,["fileName"]);r!=null&&h(n,["file_name"],r);const s=c(e,["inlinedRequests"]);return s!=null&&h(n,["requests"],L3(t,s)),n}function O3(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function q3(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const s=c(t,["name"]);if(s!=null&&h(e,["name"],s),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function B3(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function j3(t,e,n){const r={},s=c(e,["systemInstruction"]);n!==void 0&&s!=null&&h(n,["systemInstruction"],HR(Nt(s)));const i=c(e,["temperature"]);i!=null&&h(r,["temperature"],i);const o=c(e,["topP"]);o!=null&&h(r,["topP"],o);const a=c(e,["topK"]);a!=null&&h(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(r,["maxOutputTokens"],u);const d=c(e,["stopSequences"]);d!=null&&h(r,["stopSequences"],d);const m=c(e,["responseLogprobs"]);m!=null&&h(r,["responseLogprobs"],m);const g=c(e,["logprobs"]);g!=null&&h(r,["logprobs"],g);const v=c(e,["presencePenalty"]);v!=null&&h(r,["presencePenalty"],v);const w=c(e,["frequencyPenalty"]);w!=null&&h(r,["frequencyPenalty"],w);const C=c(e,["seed"]);C!=null&&h(r,["seed"],C);const R=c(e,["responseMimeType"]);R!=null&&h(r,["responseMimeType"],R);const E=c(e,["responseSchema"]);E!=null&&h(r,["responseSchema"],Cv(E));const x=c(e,["responseJsonSchema"]);if(x!=null&&h(r,["responseJsonSchema"],x),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=c(e,["safetySettings"]);if(n!==void 0&&S!=null){let D=S;Array.isArray(D)&&(D=D.map(b=>sG(b))),h(n,["safetySettings"],D)}const V=c(e,["tools"]);if(n!==void 0&&V!=null){let D=Ko(V);Array.isArray(D)&&(D=D.map(b=>oG(Wo(b)))),h(n,["tools"],D)}const L=c(e,["toolConfig"]);if(n!==void 0&&L!=null&&h(n,["toolConfig"],iG(L)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=c(e,["cachedContent"]);n!==void 0&&F!=null&&h(n,["cachedContent"],Fr(t,F));const I=c(e,["responseModalities"]);I!=null&&h(r,["responseModalities"],I);const T=c(e,["mediaResolution"]);T!=null&&h(r,["mediaResolution"],T);const A=c(e,["speechConfig"]);if(A!=null&&h(r,["speechConfig"],Av(A)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=c(e,["thinkingConfig"]);P!=null&&h(r,["thinkingConfig"],P);const k=c(e,["imageConfig"]);return k!=null&&h(r,["imageConfig"],K3(k)),r}function G3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>S3(u))),h(e,["candidates"],l)}const s=c(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const i=c(t,["promptFeedback"]);i!=null&&h(e,["promptFeedback"],i);const o=c(t,["responseId"]);o!=null&&h(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function $3(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Jo(t,r)),n}function z3(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Jo(t,r)),n}function H3(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function W3(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function K3(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=c(t,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function J3(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["request","model"],we(t,r));const s=c(e,["contents"]);if(s!=null){let a=Tn(s);Array.isArray(a)&&(a=a.map(l=>HR(l))),h(n,["request","contents"],a)}const i=c(e,["metadata"]);i!=null&&h(n,["metadata"],i);const o=c(e,["config"]);return o!=null&&h(n,["request","generationConfig"],j3(t,o,c(n,["request"],{}))),n}function Y3(t){const e={},n=c(t,["response"]);n!=null&&h(e,["response"],G3(n));const r=c(t,["error"]);return r!=null&&h(e,["error"],r),e}function Q3(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const s=c(t,["pageToken"]);if(e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function X3(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const i=c(t,["filter"]);return e!==void 0&&i!=null&&h(e,["_query","filter"],i),n}function Z3(t){const e={},n=c(t,["config"]);return n!=null&&Q3(n,e),e}function eG(t){const e={},n=c(t,["config"]);return n!=null&&X3(n,e),e}function tG(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const s=c(t,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Ic(o))),h(e,["batchJobs"],i)}return e}function nG(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const s=c(t,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Bm(o))),h(e,["batchJobs"],i)}return e}function rG(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const s=c(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const i=c(t,["fileData"]);i!=null&&h(e,["fileData"],O3(i));const o=c(t,["functionCall"]);o!=null&&h(e,["functionCall"],q3(o));const a=c(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],T3(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const d=c(t,["thought"]);d!=null&&h(e,["thought"],d);const m=c(t,["thoughtSignature"]);m!=null&&h(e,["thoughtSignature"],m);const g=c(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function sG(t){const e={},n=c(t,["category"]);if(n!=null&&h(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(t,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function iG(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],B3(n));const r=c(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function oG(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),h(e,["functionDeclarations"],d)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const s=c(t,["computerUse"]);s!=null&&h(e,["computerUse"],s);const i=c(t,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],H3(a));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],W3(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Dr||(Dr={}));class xi{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aG extends Lr{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new xi(Dr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=EE(this.apiClient,e),r=n._url,s=K("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const d of l){const m=Object.assign({},d);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const v=m.request;v.systemInstruction=g,m.request=v}u.push(m)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${s}`;else if(o)r.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=P3(this.apiClient,e);return a=K("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Bm(d))}else{const u=EE(this.apiClient,e);return a=K("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Ic(d))}}async createEmbeddingsInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=b3(this.apiClient,e);return i=K("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>Ic(l))}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=z3(this.apiClient,e);return a=K("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Bm(d))}else{const u=$3(this.apiClient,e);return a=K("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Ic(d))}}async cancel(e){var n,r,s,i;let o="",a={};if(this.apiClient.isVertexAI()){const l=I3(this.apiClient,e);o=K("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=E3(this.apiClient,e);o=K("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=eG(e);return a=K("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=nG(d),g=new _E;return Object.assign(g,m),g})}else{const u=Z3(e);return a=K("batches",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=tG(d),g=new _E;return Object.assign(g,m),g})}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=D3(this.apiClient,e);return a=K("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>V3(d))}else{const u=k3(this.apiClient,e);return a=K("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>M3(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lG(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function IE(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>bG(i))),h(e,["parts"],s)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function uG(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const s=c(t,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const i=c(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let d=Tn(o);Array.isArray(d)&&(d=d.map(m=>IE(m))),h(e,["contents"],d)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],IE(Nt(a)));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>DG(m))),h(e,["tools"],d)}const u=c(t,["toolConfig"]);if(e!==void 0&&u!=null&&h(e,["toolConfig"],kG(u)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function cG(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const s=c(t,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const i=c(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let m=Tn(o);Array.isArray(m)&&(m=m.map(g=>g)),h(e,["contents"],m)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],Nt(a));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>MG(g))),h(e,["tools"],m)}const u=c(t,["toolConfig"]);e!==void 0&&u!=null&&h(e,["toolConfig"],u);const d=c(t,["kmsKeyName"]);return e!==void 0&&d!=null&&h(e,["encryption_spec","kmsKeyName"],d),n}function dG(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["model"],MR(t,r));const s=c(e,["config"]);return s!=null&&uG(s,n),n}function fG(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["model"],MR(t,r));const s=c(e,["config"]);return s!=null&&cG(s,n),n}function hG(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Fr(t,r)),n}function pG(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Fr(t,r)),n}function mG(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function gG(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function yG(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function vG(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const s=c(t,["name"]);if(s!=null&&h(e,["name"],s),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _G(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function xG(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const s=c(t,["parameters"]);s!=null&&h(e,["parameters"],s);const i=c(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=c(t,["response"]);o!=null&&h(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function wG(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Fr(t,r)),n}function TG(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Fr(t,r)),n}function EG(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function IG(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function SG(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function CG(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function AG(t){const e={},n=c(t,["config"]);return n!=null&&SG(n,e),e}function NG(t){const e={},n=c(t,["config"]);return n!=null&&CG(n,e),e}function PG(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const s=c(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["cachedContents"],i)}return e}function RG(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const s=c(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["cachedContents"],i)}return e}function bG(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const s=c(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const i=c(t,["fileData"]);i!=null&&h(e,["fileData"],yG(i));const o=c(t,["functionCall"]);o!=null&&h(e,["functionCall"],vG(o));const a=c(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],lG(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const d=c(t,["thought"]);d!=null&&h(e,["thought"],d);const m=c(t,["thoughtSignature"]);m!=null&&h(e,["thoughtSignature"],m);const g=c(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function kG(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],_G(n));const r=c(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function DG(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),h(e,["functionDeclarations"],d)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const s=c(t,["computerUse"]);s!=null&&h(e,["computerUse"],s);const i=c(t,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],EG(a));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],IG(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}function MG(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>xG(g))),h(e,["functionDeclarations"],m)}const r=c(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const s=c(t,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=c(t,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=c(t,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=c(t,["enterpriseWebSearch"]);a!=null&&h(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const d=c(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function VG(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const s=c(t,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),n}function LG(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const s=c(t,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),n}function FG(t,e){const n={},r=c(e,["name"]);r!=null&&h(n,["_url","name"],Fr(t,r));const s=c(e,["config"]);return s!=null&&VG(s,n),n}function UG(t,e){const n={},r=c(e,["name"]);r!=null&&h(n,["_url","name"],Fr(t,r));const s=c(e,["config"]);return s!=null&&LG(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OG extends Lr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xi(Dr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=fG(this.apiClient,e);return a=K("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=dG(this.apiClient,e);return a=K("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=TG(this.apiClient,e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=wG(this.apiClient,e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=pG(this.apiClient,e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=gG(d),g=new yE;return Object.assign(g,m),g})}else{const u=hG(this.apiClient,e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=mG(d),g=new yE;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=UG(this.apiClient,e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=FG(this.apiClient,e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=NG(e);return a=K("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=RG(d),g=new vE;return Object.assign(g,m),g})}else{const u=AG(e);return a=K("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=PG(d),g=new vE;return Object.assign(g,m),g})}}}function SE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Re(t){return this instanceof Re?(this.v=t,this):new Re(t)}function co(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(v){return function(w){return Promise.resolve(w).then(v,m)}}function a(v,w){r[v]&&(s[v]=function(C){return new Promise(function(R,E){i.push([v,C,R,E])>1||l(v,C)})},w&&(s[v]=w(s[v])))}function l(v,w){try{u(r[v](w))}catch(C){g(i[0][3],C)}}function u(v){v.value instanceof Re?Promise.resolve(v.value.v).then(d,m):g(i[0][2],v)}function d(v){l("next",v)}function m(v){l("throw",v)}function g(v,w){v(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function sl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof SE=="function"?SE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qG(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:WR(n)}function WR(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function BG(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function CE(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let i=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),i&&!WR(t[r])&&(i=!1),r++;i?e.push(...s):e.pop()}return e}class jG{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new GG(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class GG{constructor(e,n,r,s={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),BG(i)}async sendMessage(e){var n;await this.sendPromise;const r=Nt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,a;const l=await s,u=(o=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,d=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];d!=null&&(g=(a=d.slice(m))!==null&&a!==void 0?a:[]);const v=u?[u]:[];this.recordHistory(r,v,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=Nt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?CE(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,s;return co(this,arguments,function*(){var o,a,l,u;const d=[];try{for(var m=!0,g=sl(e),v;v=yield Re(g.next()),o=v.done,!o;m=!0){u=v.value,m=!1;const w=u;if(qG(w)){const C=(s=(r=w.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;C!==void 0&&d.push(C)}yield yield Re(w)}}catch(w){a={error:w}}finally{try{!m&&!o&&(l=g.return)&&(yield Re(l.call(g)))}finally{if(a)throw a.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...CE(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _f extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,_f.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $G(t){const e={},n=c(t,["file"]);return n!=null&&h(e,["file"],n),e}function zG(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function HG(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","file"],qR(n)),e}function WG(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function KG(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","file"],qR(n)),e}function JG(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function YG(t){const e={},n=c(t,["config"]);return n!=null&&JG(n,e),e}function QG(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const s=c(t,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XG extends Lr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xi(Dr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=YG(e);return i=K("files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=QG(l),d=new n3;return Object.assign(d,u),d})}}async createInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$G(e);return i=K("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const u=zG(l),d=new r3;return Object.assign(d,u),d})}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=KG(e);return i=K("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=HG(e);return i=K("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=WG(l),d=new s3;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sc(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function ZG(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>m$(i))),h(e,["parts"],s)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function e$(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function t$(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const s=c(t,["name"]);if(s!=null&&h(e,["name"],s),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function n$(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const s=c(t,["parameters"]);s!=null&&h(e,["parameters"],s);const i=c(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=c(t,["response"]);o!=null&&h(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function r$(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const r=c(t,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const s=c(t,["audioTimestamp"]);s!=null&&h(e,["audioTimestamp"],s);const i=c(t,["candidateCount"]);i!=null&&h(e,["candidateCount"],i);const o=c(t,["enableAffectiveDialog"]);o!=null&&h(e,["enableAffectiveDialog"],o);const a=c(t,["frequencyPenalty"]);a!=null&&h(e,["frequencyPenalty"],a);const l=c(t,["logprobs"]);l!=null&&h(e,["logprobs"],l);const u=c(t,["maxOutputTokens"]);u!=null&&h(e,["maxOutputTokens"],u);const d=c(t,["mediaResolution"]);d!=null&&h(e,["mediaResolution"],d);const m=c(t,["presencePenalty"]);m!=null&&h(e,["presencePenalty"],m);const g=c(t,["responseLogprobs"]);g!=null&&h(e,["responseLogprobs"],g);const v=c(t,["responseMimeType"]);v!=null&&h(e,["responseMimeType"],v);const w=c(t,["responseModalities"]);w!=null&&h(e,["responseModalities"],w);const C=c(t,["responseSchema"]);C!=null&&h(e,["responseSchema"],C);const R=c(t,["routingConfig"]);R!=null&&h(e,["routingConfig"],R);const E=c(t,["seed"]);E!=null&&h(e,["seed"],E);const x=c(t,["speechConfig"]);x!=null&&h(e,["speechConfig"],KR(x));const S=c(t,["stopSequences"]);S!=null&&h(e,["stopSequences"],S);const V=c(t,["temperature"]);V!=null&&h(e,["temperature"],V);const L=c(t,["thinkingConfig"]);L!=null&&h(e,["thinkingConfig"],L);const F=c(t,["topK"]);F!=null&&h(e,["topK"],F);const I=c(t,["topP"]);if(I!=null&&h(e,["topP"],I),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function s$(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function i$(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function o$(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const s=c(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const i=c(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=c(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","seed"],d);const m=c(t,["speechConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","speechConfig"],Nv(m));const g=c(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const v=c(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],v);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&h(e,["setup","systemInstruction"],ZG(Nt(w)));const C=c(t,["tools"]);if(e!==void 0&&C!=null){let F=Ko(C);Array.isArray(F)&&(F=F.map(I=>y$(Wo(I)))),h(e,["setup","tools"],F)}const R=c(t,["sessionResumption"]);e!==void 0&&R!=null&&h(e,["setup","sessionResumption"],g$(R));const E=c(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&h(e,["setup","inputAudioTranscription"],E);const x=c(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","outputAudioTranscription"],x);const S=c(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const V=c(t,["contextWindowCompression"]);e!==void 0&&V!=null&&h(e,["setup","contextWindowCompression"],V);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&h(e,["setup","proactivity"],L),n}function a$(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r$(r));const s=c(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const i=c(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=c(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","seed"],d);const m=c(t,["speechConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","speechConfig"],KR(Nv(m)));const g=c(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const v=c(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],v);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&h(e,["setup","systemInstruction"],Nt(w));const C=c(t,["tools"]);if(e!==void 0&&C!=null){let F=Ko(C);Array.isArray(F)&&(F=F.map(I=>v$(Wo(I)))),h(e,["setup","tools"],F)}const R=c(t,["sessionResumption"]);e!==void 0&&R!=null&&h(e,["setup","sessionResumption"],R);const E=c(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&h(e,["setup","inputAudioTranscription"],E);const x=c(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","outputAudioTranscription"],x);const S=c(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const V=c(t,["contextWindowCompression"]);e!==void 0&&V!=null&&h(e,["setup","contextWindowCompression"],V);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&h(e,["setup","proactivity"],L),n}function l$(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["setup","model"],we(t,r));const s=c(e,["config"]);return s!=null&&h(n,["config"],o$(s,n)),n}function u$(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["setup","model"],we(t,r));const s=c(e,["config"]);return s!=null&&h(n,["config"],a$(s,n)),n}function c$(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function d$(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),h(e,["weightedPrompts"],r)}return e}function f$(t){const e={},n=c(t,["media"]);if(n!=null){let u=VR(n);Array.isArray(u)&&(u=u.map(d=>Sc(d))),h(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&h(e,["audio"],Sc(FR(r)));const s=c(t,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const i=c(t,["video"]);i!=null&&h(e,["video"],Sc(LR(i)));const o=c(t,["text"]);o!=null&&h(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&h(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&h(e,["activityEnd"],l),e}function h$(t){const e={},n=c(t,["media"]);if(n!=null){let u=VR(n);Array.isArray(u)&&(u=u.map(d=>d)),h(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&h(e,["audio"],FR(r));const s=c(t,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const i=c(t,["video"]);i!=null&&h(e,["video"],LR(i));const o=c(t,["text"]);o!=null&&h(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&h(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&h(e,["activityEnd"],l),e}function p$(t){const e={},n=c(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const r=c(t,["serverContent"]);r!=null&&h(e,["serverContent"],r);const s=c(t,["toolCall"]);s!=null&&h(e,["toolCall"],s);const i=c(t,["toolCallCancellation"]);i!=null&&h(e,["toolCallCancellation"],i);const o=c(t,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],_$(o));const a=c(t,["goAway"]);a!=null&&h(e,["goAway"],a);const l=c(t,["sessionResumptionUpdate"]);return l!=null&&h(e,["sessionResumptionUpdate"],l),e}function m$(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const s=c(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const i=c(t,["fileData"]);i!=null&&h(e,["fileData"],e$(i));const o=c(t,["functionCall"]);o!=null&&h(e,["functionCall"],t$(o));const a=c(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],Sc(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const d=c(t,["thought"]);d!=null&&h(e,["thought"],d);const m=c(t,["thoughtSignature"]);m!=null&&h(e,["thoughtSignature"],m);const g=c(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function g$(t){const e={},n=c(t,["handle"]);if(n!=null&&h(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function KR(t){const e={},n=c(t,["languageCode"]);n!=null&&h(e,["languageCode"],n);const r=c(t,["voiceConfig"]);if(r!=null&&h(e,["voiceConfig"],r),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function y$(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),h(e,["functionDeclarations"],d)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const s=c(t,["computerUse"]);s!=null&&h(e,["computerUse"],s);const i=c(t,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],s$(a));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],i$(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}function v$(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>n$(g))),h(e,["functionDeclarations"],m)}const r=c(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const s=c(t,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=c(t,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=c(t,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=c(t,["enterpriseWebSearch"]);a!=null&&h(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const d=c(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function _$(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const r=c(t,["cachedContentTokenCount"]);r!=null&&h(e,["cachedContentTokenCount"],r);const s=c(t,["candidatesTokenCount"]);s!=null&&h(e,["responseTokenCount"],s);const i=c(t,["toolUsePromptTokenCount"]);i!=null&&h(e,["toolUsePromptTokenCount"],i);const o=c(t,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const a=c(t,["totalTokenCount"]);a!=null&&h(e,["totalTokenCount"],a);const l=c(t,["promptTokensDetails"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(w=>w)),h(e,["promptTokensDetails"],v)}const u=c(t,["cacheTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(w=>w)),h(e,["cacheTokensDetails"],v)}const d=c(t,["candidatesTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(w=>w)),h(e,["responseTokensDetails"],v)}const m=c(t,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(w=>w)),h(e,["toolUsePromptTokensDetails"],v)}const g=c(t,["trafficType"]);return g!=null&&h(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x$(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function w$(t){const e={},n=c(t,["content"]);n!=null&&h(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],T$(r));const s=c(t,["tokenCount"]);s!=null&&h(e,["tokenCount"],s);const i=c(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const o=c(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const a=c(t,["groundingMetadata"]);a!=null&&h(e,["groundingMetadata"],a);const l=c(t,["index"]);l!=null&&h(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const d=c(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>v)),h(e,["safetyRatings"],g)}const m=c(t,["urlContextMetadata"]);return m!=null&&h(e,["urlContextMetadata"],m),e}function T$(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),h(e,["citations"],r)}return e}function E$(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["contents"]);if(s!=null){let i=Tn(s);Array.isArray(i)&&(i=i.map(o=>o)),h(n,["contents"],i)}return n}function I$(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),h(e,["tokensInfo"],s)}return e}function S$(t){const e={},n=c(t,["values"]);n!=null&&h(e,["values"],n);const r=c(t,["statistics"]);return r!=null&&h(e,["statistics"],C$(r)),e}function C$(t){const e={},n=c(t,["truncated"]);n!=null&&h(e,["truncated"],n);const r=c(t,["token_count"]);return r!=null&&h(e,["tokenCount"],r),e}function xf(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>V9(i))),h(e,["parts"],s)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function A$(t){const e={},n=c(t,["controlType"]);n!=null&&h(e,["controlType"],n);const r=c(t,["enableControlImageComputation"]);return r!=null&&h(e,["computeControl"],r),e}function N$(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function P$(t,e){const n={},r=c(t,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],Nt(r));const s=c(t,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>ZR(a))),h(e,["tools"],o)}const i=c(t,["generationConfig"]);return e!==void 0&&i!=null&&h(e,["generationConfig"],x9(i)),n}function R$(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["contents"]);if(s!=null){let o=Tn(s);Array.isArray(o)&&(o=o.map(a=>xf(a))),h(n,["contents"],o)}const i=c(e,["config"]);return i!=null&&N$(i),n}function b$(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["contents"]);if(s!=null){let o=Tn(s);Array.isArray(o)&&(o=o.map(a=>a)),h(n,["contents"],o)}const i=c(e,["config"]);return i!=null&&P$(i,n),n}function k$(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);r!=null&&h(e,["totalTokens"],r);const s=c(t,["cachedContentTokenCount"]);return s!=null&&h(e,["cachedContentTokenCount"],s),e}function D$(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);return r!=null&&h(e,["totalTokens"],r),e}function M$(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],we(t,r)),n}function V$(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],we(t,r)),n}function L$(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function F$(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function U$(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const s=c(t,["negativePrompt"]);e!==void 0&&s!=null&&h(e,["parameters","negativePrompt"],s);const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const m=c(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const g=c(t,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const v=c(t,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const w=c(t,["outputMimeType"]);e!==void 0&&w!=null&&h(e,["parameters","outputOptions","mimeType"],w);const C=c(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&h(e,["parameters","outputOptions","compressionQuality"],C);const R=c(t,["addWatermark"]);e!==void 0&&R!=null&&h(e,["parameters","addWatermark"],R);const E=c(t,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const x=c(t,["editMode"]);e!==void 0&&x!=null&&h(e,["parameters","editMode"],x);const S=c(t,["baseSteps"]);return e!==void 0&&S!=null&&h(e,["parameters","editConfig","baseSteps"],S),n}function O$(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["prompt"]);s!=null&&h(n,["instances[0]","prompt"],s);const i=c(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>B9(l))),h(n,["instances[0]","referenceImages"],a)}const o=c(e,["config"]);return o!=null&&U$(o,n),n}function q$(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>wf(i))),h(e,["generatedImages"],s)}return e}function B$(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const s=c(t,["title"]);e!==void 0&&s!=null&&h(e,["requests[]","title"],s);const i=c(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&h(e,["requests[]","outputDimensionality"],i),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function j$(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const s=c(t,["title"]);e!==void 0&&s!=null&&h(e,["instances[]","title"],s);const i=c(t,["outputDimensionality"]);e!==void 0&&i!=null&&h(e,["parameters","outputDimensionality"],i);const o=c(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["instances[]","mimeType"],o);const a=c(t,["autoTruncate"]);return e!==void 0&&a!=null&&h(e,["parameters","autoTruncate"],a),n}function G$(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["contents"]);if(s!=null){let a=Sv(t,s);Array.isArray(a)&&(a=a.map(l=>l)),h(n,["requests[]","content"],a)}const i=c(e,["config"]);i!=null&&B$(i,n);const o=c(e,["model"]);return o!==void 0&&h(n,["requests[]","model"],we(t,o)),n}function $$(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["contents"]);if(s!=null){let o=Sv(t,s);Array.isArray(o)&&(o=o.map(a=>a)),h(n,["instances[]","content"],o)}const i=c(e,["config"]);return i!=null&&j$(i,n),n}function z$(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["embeddings"],i)}const s=c(t,["metadata"]);return s!=null&&h(e,["metadata"],s),e}function H$(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>S$(o))),h(e,["embeddings"],i)}const s=c(t,["metadata"]);return s!=null&&h(e,["metadata"],s),e}function W$(t){const e={},n=c(t,["endpoint"]);n!=null&&h(e,["name"],n);const r=c(t,["deployedModelId"]);return r!=null&&h(e,["deployedModelId"],r),e}function K$(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function J$(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const s=c(t,["name"]);if(s!=null&&h(e,["name"],s),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Y$(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Q$(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const s=c(t,["parameters"]);s!=null&&h(e,["parameters"],s);const i=c(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=c(t,["response"]);o!=null&&h(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function X$(t,e,n){const r={},s=c(e,["systemInstruction"]);n!==void 0&&s!=null&&h(n,["systemInstruction"],xf(Nt(s)));const i=c(e,["temperature"]);i!=null&&h(r,["temperature"],i);const o=c(e,["topP"]);o!=null&&h(r,["topP"],o);const a=c(e,["topK"]);a!=null&&h(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(r,["maxOutputTokens"],u);const d=c(e,["stopSequences"]);d!=null&&h(r,["stopSequences"],d);const m=c(e,["responseLogprobs"]);m!=null&&h(r,["responseLogprobs"],m);const g=c(e,["logprobs"]);g!=null&&h(r,["logprobs"],g);const v=c(e,["presencePenalty"]);v!=null&&h(r,["presencePenalty"],v);const w=c(e,["frequencyPenalty"]);w!=null&&h(r,["frequencyPenalty"],w);const C=c(e,["seed"]);C!=null&&h(r,["seed"],C);const R=c(e,["responseMimeType"]);R!=null&&h(r,["responseMimeType"],R);const E=c(e,["responseSchema"]);E!=null&&h(r,["responseSchema"],Cv(E));const x=c(e,["responseJsonSchema"]);if(x!=null&&h(r,["responseJsonSchema"],x),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=c(e,["safetySettings"]);if(n!==void 0&&S!=null){let D=S;Array.isArray(D)&&(D=D.map(b=>j9(b))),h(n,["safetySettings"],D)}const V=c(e,["tools"]);if(n!==void 0&&V!=null){let D=Ko(V);Array.isArray(D)&&(D=D.map(b=>J9(Wo(b)))),h(n,["tools"],D)}const L=c(e,["toolConfig"]);if(n!==void 0&&L!=null&&h(n,["toolConfig"],K9(L)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=c(e,["cachedContent"]);n!==void 0&&F!=null&&h(n,["cachedContent"],Fr(t,F));const I=c(e,["responseModalities"]);I!=null&&h(r,["responseModalities"],I);const T=c(e,["mediaResolution"]);T!=null&&h(r,["mediaResolution"],T);const A=c(e,["speechConfig"]);if(A!=null&&h(r,["speechConfig"],Av(A)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=c(e,["thinkingConfig"]);P!=null&&h(r,["thinkingConfig"],P);const k=c(e,["imageConfig"]);return k!=null&&h(r,["imageConfig"],S9(k)),r}function Z$(t,e,n){const r={},s=c(e,["systemInstruction"]);n!==void 0&&s!=null&&h(n,["systemInstruction"],Nt(s));const i=c(e,["temperature"]);i!=null&&h(r,["temperature"],i);const o=c(e,["topP"]);o!=null&&h(r,["topP"],o);const a=c(e,["topK"]);a!=null&&h(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(r,["maxOutputTokens"],u);const d=c(e,["stopSequences"]);d!=null&&h(r,["stopSequences"],d);const m=c(e,["responseLogprobs"]);m!=null&&h(r,["responseLogprobs"],m);const g=c(e,["logprobs"]);g!=null&&h(r,["logprobs"],g);const v=c(e,["presencePenalty"]);v!=null&&h(r,["presencePenalty"],v);const w=c(e,["frequencyPenalty"]);w!=null&&h(r,["frequencyPenalty"],w);const C=c(e,["seed"]);C!=null&&h(r,["seed"],C);const R=c(e,["responseMimeType"]);R!=null&&h(r,["responseMimeType"],R);const E=c(e,["responseSchema"]);E!=null&&h(r,["responseSchema"],Cv(E));const x=c(e,["responseJsonSchema"]);x!=null&&h(r,["responseJsonSchema"],x);const S=c(e,["routingConfig"]);S!=null&&h(r,["routingConfig"],S);const V=c(e,["modelSelectionConfig"]);V!=null&&h(r,["modelConfig"],V);const L=c(e,["safetySettings"]);if(n!==void 0&&L!=null){let te=L;Array.isArray(te)&&(te=te.map(W=>W)),h(n,["safetySettings"],te)}const F=c(e,["tools"]);if(n!==void 0&&F!=null){let te=Ko(F);Array.isArray(te)&&(te=te.map(W=>ZR(Wo(W)))),h(n,["tools"],te)}const I=c(e,["toolConfig"]);n!==void 0&&I!=null&&h(n,["toolConfig"],I);const T=c(e,["labels"]);n!==void 0&&T!=null&&h(n,["labels"],T);const A=c(e,["cachedContent"]);n!==void 0&&A!=null&&h(n,["cachedContent"],Fr(t,A));const P=c(e,["responseModalities"]);P!=null&&h(r,["responseModalities"],P);const k=c(e,["mediaResolution"]);k!=null&&h(r,["mediaResolution"],k);const D=c(e,["speechConfig"]);D!=null&&h(r,["speechConfig"],XR(Av(D)));const b=c(e,["audioTimestamp"]);b!=null&&h(r,["audioTimestamp"],b);const Ie=c(e,["thinkingConfig"]);Ie!=null&&h(r,["thinkingConfig"],Ie);const Me=c(e,["imageConfig"]);return Me!=null&&h(r,["imageConfig"],C9(Me)),r}function AE(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["contents"]);if(s!=null){let o=Tn(s);Array.isArray(o)&&(o=o.map(a=>xf(a))),h(n,["contents"],o)}const i=c(e,["config"]);return i!=null&&h(n,["generationConfig"],X$(t,i,n)),n}function NE(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["contents"]);if(s!=null){let o=Tn(s);Array.isArray(o)&&(o=o.map(a=>a)),h(n,["contents"],o)}const i=c(e,["config"]);return i!=null&&h(n,["generationConfig"],Z$(t,i,n)),n}function PE(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>w$(u))),h(e,["candidates"],l)}const s=c(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const i=c(t,["promptFeedback"]);i!=null&&h(e,["promptFeedback"],i);const o=c(t,["responseId"]);o!=null&&h(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function RE(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),h(e,["candidates"],u)}const s=c(t,["createTime"]);s!=null&&h(e,["createTime"],s);const i=c(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const o=c(t,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&h(e,["responseId"],a);const l=c(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function e9(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&h(e,["parameters","aspectRatio"],s);const i=c(t,["guidanceScale"]);if(e!==void 0&&i!=null&&h(e,["parameters","guidanceScale"],i),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const a=c(t,["personGeneration"]);e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a);const l=c(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&h(e,["parameters","includeSafetyAttributes"],l);const u=c(t,["includeRaiReason"]);e!==void 0&&u!=null&&h(e,["parameters","includeRaiReason"],u);const d=c(t,["language"]);e!==void 0&&d!=null&&h(e,["parameters","language"],d);const m=c(t,["outputMimeType"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","mimeType"],m);const g=c(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=c(t,["imageSize"]);if(e!==void 0&&v!=null&&h(e,["parameters","sampleImageSize"],v),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function t9(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const s=c(t,["negativePrompt"]);e!==void 0&&s!=null&&h(e,["parameters","negativePrompt"],s);const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const m=c(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const g=c(t,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const v=c(t,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const w=c(t,["outputMimeType"]);e!==void 0&&w!=null&&h(e,["parameters","outputOptions","mimeType"],w);const C=c(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&h(e,["parameters","outputOptions","compressionQuality"],C);const R=c(t,["addWatermark"]);e!==void 0&&R!=null&&h(e,["parameters","addWatermark"],R);const E=c(t,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const x=c(t,["imageSize"]);e!==void 0&&x!=null&&h(e,["parameters","sampleImageSize"],x);const S=c(t,["enhancePrompt"]);return e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S),n}function n9(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["prompt"]);s!=null&&h(n,["instances[0]","prompt"],s);const i=c(e,["config"]);return i!=null&&e9(i,n),n}function r9(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["prompt"]);s!=null&&h(n,["instances[0]","prompt"],s);const i=c(e,["config"]);return i!=null&&t9(i,n),n}function s9(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>g9(o))),h(e,["generatedImages"],i)}const s=c(t,["positivePromptSafetyAttributes"]);return s!=null&&h(e,["positivePromptSafetyAttributes"],YR(s)),e}function i9(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>wf(o))),h(e,["generatedImages"],i)}const s=c(t,["positivePromptSafetyAttributes"]);return s!=null&&h(e,["positivePromptSafetyAttributes"],QR(s)),e}function o9(t,e){const n={},r=c(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=c(t,["durationSeconds"]);if(e!==void 0&&s!=null&&h(e,["parameters","durationSeconds"],s),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=c(t,["aspectRatio"]);e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i);const o=c(t,["resolution"]);e!==void 0&&o!=null&&h(e,["parameters","resolution"],o);const a=c(t,["personGeneration"]);if(e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=c(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=c(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&h(e,["parameters","enhancePrompt"],u),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=c(t,["lastFrame"]);e!==void 0&&d!=null&&h(e,["instances[0]","lastFrame"],Tf(d));const m=c(t,["referenceImages"]);if(e!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>lz(v))),h(e,["instances[0]","referenceImages"],g)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function a9(t,e){const n={},r=c(t,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const i=c(t,["fps"]);e!==void 0&&i!=null&&h(e,["parameters","fps"],i);const o=c(t,["durationSeconds"]);e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&h(e,["parameters","seed"],a);const l=c(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=c(t,["resolution"]);e!==void 0&&u!=null&&h(e,["parameters","resolution"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const m=c(t,["pubsubTopic"]);e!==void 0&&m!=null&&h(e,["parameters","pubsubTopic"],m);const g=c(t,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const v=c(t,["enhancePrompt"]);e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v);const w=c(t,["generateAudio"]);e!==void 0&&w!=null&&h(e,["parameters","generateAudio"],w);const C=c(t,["lastFrame"]);e!==void 0&&C!=null&&h(e,["instances[0]","lastFrame"],Gn(C));const R=c(t,["referenceImages"]);if(e!==void 0&&R!=null){let S=R;Array.isArray(S)&&(S=S.map(V=>uz(V))),h(e,["instances[0]","referenceImages"],S)}const E=c(t,["mask"]);e!==void 0&&E!=null&&h(e,["instances[0]","mask"],az(E));const x=c(t,["compressionQuality"]);return e!==void 0&&x!=null&&h(e,["parameters","compressionQuality"],x),n}function l9(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const s=c(t,["done"]);s!=null&&h(e,["done"],s);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const o=c(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],f9(o)),e}function u9(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const s=c(t,["done"]);s!=null&&h(e,["done"],s);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const o=c(t,["response"]);return o!=null&&h(e,["response"],h9(o)),e}function c9(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["prompt"]);s!=null&&h(n,["instances[0]","prompt"],s);const i=c(e,["image"]);i!=null&&h(n,["instances[0]","image"],Tf(i));const o=c(e,["video"]);o!=null&&h(n,["instances[0]","video"],eb(o));const a=c(e,["source"]);a!=null&&p9(a,n);const l=c(e,["config"]);return l!=null&&o9(l,n),n}function d9(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["prompt"]);s!=null&&h(n,["instances[0]","prompt"],s);const i=c(e,["image"]);i!=null&&h(n,["instances[0]","image"],Gn(i));const o=c(e,["video"]);o!=null&&h(n,["instances[0]","video"],tb(o));const a=c(e,["source"]);a!=null&&m9(a,n);const l=c(e,["config"]);return l!=null&&a9(l,n),n}function f9(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>v9(o))),h(e,["generatedVideos"],i)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function h9(t){const e={},n=c(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>_9(o))),h(e,["generatedVideos"],i)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function p9(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const s=c(t,["image"]);e!==void 0&&s!=null&&h(e,["instances[0]","image"],Tf(s));const i=c(t,["video"]);return e!==void 0&&i!=null&&h(e,["instances[0]","video"],eb(i)),n}function m9(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const s=c(t,["image"]);e!==void 0&&s!=null&&h(e,["instances[0]","image"],Gn(s));const i=c(t,["video"]);return e!==void 0&&i!=null&&h(e,["instances[0]","video"],tb(i)),n}function g9(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["image"],A9(n));const r=c(t,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const s=c(t,["_self"]);return s!=null&&h(e,["safetyAttributes"],YR(s)),e}function wf(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["image"],JR(n));const r=c(t,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const s=c(t,["_self"]);s!=null&&h(e,["safetyAttributes"],QR(s));const i=c(t,["prompt"]);return i!=null&&h(e,["enhancedPrompt"],i),e}function y9(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["mask"],JR(n));const r=c(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),h(e,["labels"],s)}return e}function v9(t){const e={},n=c(t,["video"]);return n!=null&&h(e,["video"],iz(n)),e}function _9(t){const e={},n=c(t,["_self"]);return n!=null&&h(e,["video"],oz(n)),e}function x9(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const r=c(t,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const s=c(t,["audioTimestamp"]);s!=null&&h(e,["audioTimestamp"],s);const i=c(t,["candidateCount"]);i!=null&&h(e,["candidateCount"],i);const o=c(t,["enableAffectiveDialog"]);o!=null&&h(e,["enableAffectiveDialog"],o);const a=c(t,["frequencyPenalty"]);a!=null&&h(e,["frequencyPenalty"],a);const l=c(t,["logprobs"]);l!=null&&h(e,["logprobs"],l);const u=c(t,["maxOutputTokens"]);u!=null&&h(e,["maxOutputTokens"],u);const d=c(t,["mediaResolution"]);d!=null&&h(e,["mediaResolution"],d);const m=c(t,["presencePenalty"]);m!=null&&h(e,["presencePenalty"],m);const g=c(t,["responseLogprobs"]);g!=null&&h(e,["responseLogprobs"],g);const v=c(t,["responseMimeType"]);v!=null&&h(e,["responseMimeType"],v);const w=c(t,["responseModalities"]);w!=null&&h(e,["responseModalities"],w);const C=c(t,["responseSchema"]);C!=null&&h(e,["responseSchema"],C);const R=c(t,["routingConfig"]);R!=null&&h(e,["routingConfig"],R);const E=c(t,["seed"]);E!=null&&h(e,["seed"],E);const x=c(t,["speechConfig"]);x!=null&&h(e,["speechConfig"],XR(x));const S=c(t,["stopSequences"]);S!=null&&h(e,["stopSequences"],S);const V=c(t,["temperature"]);V!=null&&h(e,["temperature"],V);const L=c(t,["thinkingConfig"]);L!=null&&h(e,["thinkingConfig"],L);const F=c(t,["topK"]);F!=null&&h(e,["topK"],F);const I=c(t,["topP"]);if(I!=null&&h(e,["topP"],I),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function w9(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],we(t,r)),n}function T9(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],we(t,r)),n}function E9(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function I9(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function S9(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=c(t,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function C9(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=c(t,["imageSize"]);r!=null&&h(e,["imageSize"],r);const s=c(t,["outputMimeType"]);s!=null&&h(e,["imageOutputOptions","mimeType"],s);const i=c(t,["outputCompressionQuality"]);return i!=null&&h(e,["imageOutputOptions","compressionQuality"],i),e}function A9(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],As(n));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function JR(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&h(e,["imageBytes"],As(r));const s=c(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Tf(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],As(n));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Gn(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const r=c(t,["imageBytes"]);r!=null&&h(e,["bytesBase64Encoded"],As(r));const s=c(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function N9(t,e,n){const r={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&h(n,["_query","pageSize"],s);const i=c(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const o=c(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&h(n,["_url","models_url"],BR(t,a)),r}function P9(t,e,n){const r={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&h(n,["_query","pageSize"],s);const i=c(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const o=c(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&h(n,["_url","models_url"],BR(t,a)),r}function R9(t,e){const n={},r=c(e,["config"]);return r!=null&&N9(t,r,n),n}function b9(t,e){const n={},r=c(e,["config"]);return r!=null&&P9(t,r,n),n}function k9(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const s=c(t,["_self"]);if(s!=null){let i=jR(s);Array.isArray(i)&&(i=i.map(o=>jm(o))),h(e,["models"],i)}return e}function D9(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const s=c(t,["_self"]);if(s!=null){let i=jR(s);Array.isArray(i)&&(i=i.map(o=>Gm(o))),h(e,["models"],i)}return e}function M9(t){const e={},n=c(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const r=c(t,["segmentationClasses"]);r!=null&&h(e,["maskClasses"],r);const s=c(t,["maskDilation"]);return s!=null&&h(e,["dilation"],s),e}function jm(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["displayName"]);r!=null&&h(e,["displayName"],r);const s=c(t,["description"]);s!=null&&h(e,["description"],s);const i=c(t,["version"]);i!=null&&h(e,["version"],i);const o=c(t,["_self"]);o!=null&&h(e,["tunedModelInfo"],Y9(o));const a=c(t,["inputTokenLimit"]);a!=null&&h(e,["inputTokenLimit"],a);const l=c(t,["outputTokenLimit"]);l!=null&&h(e,["outputTokenLimit"],l);const u=c(t,["supportedGenerationMethods"]);u!=null&&h(e,["supportedActions"],u);const d=c(t,["temperature"]);d!=null&&h(e,["temperature"],d);const m=c(t,["maxTemperature"]);m!=null&&h(e,["maxTemperature"],m);const g=c(t,["topP"]);g!=null&&h(e,["topP"],g);const v=c(t,["topK"]);v!=null&&h(e,["topK"],v);const w=c(t,["thinking"]);return w!=null&&h(e,["thinking"],w),e}function Gm(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["displayName"]);r!=null&&h(e,["displayName"],r);const s=c(t,["description"]);s!=null&&h(e,["description"],s);const i=c(t,["versionId"]);i!=null&&h(e,["version"],i);const o=c(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>W$(g))),h(e,["endpoints"],m)}const a=c(t,["labels"]);a!=null&&h(e,["labels"],a);const l=c(t,["_self"]);l!=null&&h(e,["tunedModelInfo"],Q9(l));const u=c(t,["defaultCheckpointId"]);u!=null&&h(e,["defaultCheckpointId"],u);const d=c(t,["checkpoints"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),h(e,["checkpoints"],m)}return e}function V9(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const s=c(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const i=c(t,["fileData"]);i!=null&&h(e,["fileData"],K$(i));const o=c(t,["functionCall"]);o!=null&&h(e,["functionCall"],J$(o));const a=c(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],x$(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const d=c(t,["thought"]);d!=null&&h(e,["thought"],d);const m=c(t,["thoughtSignature"]);m!=null&&h(e,["thoughtSignature"],m);const g=c(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function L9(t){const e={},n=c(t,["productImage"]);return n!=null&&h(e,["image"],Gn(n)),e}function F9(t,e){const n={},r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const s=c(t,["baseSteps"]);e!==void 0&&s!=null&&h(e,["parameters","baseSteps"],s);const i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const o=c(t,["seed"]);e!==void 0&&o!=null&&h(e,["parameters","seed"],o);const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const l=c(t,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const u=c(t,["addWatermark"]);e!==void 0&&u!=null&&h(e,["parameters","addWatermark"],u);const d=c(t,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const m=c(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const g=c(t,["enhancePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","enhancePrompt"],g);const v=c(t,["labels"]);return e!==void 0&&v!=null&&h(e,["labels"],v),n}function U9(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["source"]);s!=null&&q9(s,n);const i=c(e,["config"]);return i!=null&&F9(i,n),n}function O9(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>wf(s))),h(e,["generatedImages"],r)}return e}function q9(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const s=c(t,["personImage"]);e!==void 0&&s!=null&&h(e,["instances[0]","personImage","image"],Gn(s));const i=c(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>L9(a))),h(e,["instances[0]","productImages"],o)}return n}function B9(t){const e={},n=c(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],Gn(n));const r=c(t,["referenceId"]);r!=null&&h(e,["referenceId"],r);const s=c(t,["referenceType"]);s!=null&&h(e,["referenceType"],s);const i=c(t,["maskImageConfig"]);i!=null&&h(e,["maskImageConfig"],M9(i));const o=c(t,["controlImageConfig"]);o!=null&&h(e,["controlImageConfig"],A$(o));const a=c(t,["styleImageConfig"]);a!=null&&h(e,["styleImageConfig"],a);const l=c(t,["subjectImageConfig"]);return l!=null&&h(e,["subjectImageConfig"],l),e}function YR(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const s=c(t,["contentType"]);return s!=null&&h(e,["contentType"],s),e}function QR(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const s=c(t,["contentType"]);return s!=null&&h(e,["contentType"],s),e}function j9(t){const e={},n=c(t,["category"]);if(n!=null&&h(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(t,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function G9(t){const e={},n=c(t,["image"]);return n!=null&&h(e,["image"],Gn(n)),e}function $9(t,e){const n={},r=c(t,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const s=c(t,["maxPredictions"]);e!==void 0&&s!=null&&h(e,["parameters","maxPredictions"],s);const i=c(t,["confidenceThreshold"]);e!==void 0&&i!=null&&h(e,["parameters","confidenceThreshold"],i);const o=c(t,["maskDilation"]);e!==void 0&&o!=null&&h(e,["parameters","maskDilation"],o);const a=c(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&h(e,["parameters","binaryColorThreshold"],a);const l=c(t,["labels"]);return e!==void 0&&l!=null&&h(e,["labels"],l),n}function z9(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["source"]);s!=null&&W9(s,n);const i=c(e,["config"]);return i!=null&&$9(i,n),n}function H9(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>y9(s))),h(e,["generatedMasks"],r)}return e}function W9(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const s=c(t,["image"]);e!==void 0&&s!=null&&h(e,["instances[0]","image"],Gn(s));const i=c(t,["scribbleImage"]);return e!==void 0&&i!=null&&h(e,["instances[0]","scribble"],G9(i)),n}function XR(t){const e={},n=c(t,["languageCode"]);n!=null&&h(e,["languageCode"],n);const r=c(t,["voiceConfig"]);if(r!=null&&h(e,["voiceConfig"],r),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function K9(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],Y$(n));const r=c(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function J9(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),h(e,["functionDeclarations"],d)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const s=c(t,["computerUse"]);s!=null&&h(e,["computerUse"],s);const i=c(t,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],E9(a));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],I9(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}function ZR(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>Q$(g))),h(e,["functionDeclarations"],m)}const r=c(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const s=c(t,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=c(t,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=c(t,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=c(t,["enterpriseWebSearch"]);a!=null&&h(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const d=c(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function Y9(t){const e={},n=c(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&h(e,["createTime"],r);const s=c(t,["updateTime"]);return s!=null&&h(e,["updateTime"],s),e}function Q9(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&h(e,["createTime"],r);const s=c(t,["updateTime"]);return s!=null&&h(e,["updateTime"],s),e}function X9(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const s=c(t,["description"]);e!==void 0&&s!=null&&h(e,["description"],s);const i=c(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function Z9(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const s=c(t,["description"]);e!==void 0&&s!=null&&h(e,["description"],s);const i=c(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function ez(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","name"],we(t,r));const s=c(e,["config"]);return s!=null&&X9(s,n),n}function tz(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["config"]);return s!=null&&Z9(s,n),n}function nz(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const s=c(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&h(e,["parameters","safetySetting"],s);const i=c(t,["personGeneration"]);e!==void 0&&i!=null&&h(e,["parameters","personGeneration"],i);const o=c(t,["includeRaiReason"]);e!==void 0&&o!=null&&h(e,["parameters","includeRaiReason"],o);const a=c(t,["outputMimeType"]);e!==void 0&&a!=null&&h(e,["parameters","outputOptions","mimeType"],a);const l=c(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&h(e,["parameters","outputOptions","compressionQuality"],l);const u=c(t,["enhanceInputImage"]);e!==void 0&&u!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],u);const d=c(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const m=c(t,["labels"]);e!==void 0&&m!=null&&h(e,["labels"],m);const g=c(t,["numberOfImages"]);e!==void 0&&g!=null&&h(e,["parameters","sampleCount"],g);const v=c(t,["mode"]);return e!==void 0&&v!=null&&h(e,["parameters","mode"],v),n}function rz(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],we(t,r));const s=c(e,["image"]);s!=null&&h(n,["instances[0]","image"],Gn(s));const i=c(e,["upscaleFactor"]);i!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=c(e,["config"]);return o!=null&&nz(o,n),n}function sz(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>wf(i))),h(e,["generatedImages"],s)}return e}function iz(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&h(e,["videoBytes"],As(r));const s=c(t,["encoding"]);return s!=null&&h(e,["mimeType"],s),e}function oz(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],As(r));const s=c(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function az(t){const e={},n=c(t,["image"]);n!=null&&h(e,["_self"],Gn(n));const r=c(t,["maskMode"]);return r!=null&&h(e,["maskMode"],r),e}function lz(t){const e={},n=c(t,["image"]);n!=null&&h(e,["image"],Tf(n));const r=c(t,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function uz(t){const e={},n=c(t,["image"]);n!=null&&h(e,["image"],Gn(n));const r=c(t,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function eb(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const r=c(t,["videoBytes"]);r!=null&&h(e,["encodedVideo"],As(r));const s=c(t,["mimeType"]);return s!=null&&h(e,["encoding"],s),e}function tb(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const r=c(t,["videoBytes"]);r!=null&&h(e,["bytesBase64Encoded"],As(r));const s=c(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cz="Content-Type",dz="X-Server-Timeout",fz="User-Agent",$m="x-goog-api-client",hz="1.30.0",pz=`google-genai-sdk/${hz}`,mz="v1beta1",gz="v1beta",bE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class yz{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:mz,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:gz,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.unaryApiCall(s,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,i]of Object.entries(n))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.streamApiCall(s,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&vz(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await kE(s),new Om(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await kE(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return co(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield Re(s.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=i.decode(l,{stream:!0});try{const m=JSON.parse(u);if("error"in m){const g=JSON.parse(JSON.stringify(m.error)),v=g.status,w=g.code,C=`got status: ${v}. ${JSON.stringify(m)}`;if(w>=400&&w<600)throw new _f({message:C,status:w})}}catch(m){if(m.name==="ApiError")throw m}o+=u;let d=o.match(bE);for(;d;){const m=d[1];try{const g=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Re(new Om(g)),o=o.slice(d[0].length),d=o.match(bE)}catch(g){throw new Error(`exception parsing stream chunk ${m}. ${g}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=pz+" "+this.clientOptions.userAgentExtra;return e[fz]=n,e[$m]=n,e[cz]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,i]of Object.entries(e.headers))r.append(s,i);e.timeout&&e.timeout>0&&r.append(dz,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);s.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l={file:s},u=this.getFileName(e),d=K("upload/v1beta/files",l._url),m=await this.fetchUploadUrl(d,s.sizeBytes,s.mimeType,u,l,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var s;const i=this.clientOptions.uploader,o=await i.stat(n),a=String(o.size),l=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),m={};r!=null&&r.customMetadata&&(m.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(m.chunkingConfig=r.chunkingConfig);const g=await this.fetchUploadUrl(u,a,l,d,m,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,i,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const u=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function kE(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new _f({message:s,status:n}):new Error(s)}}function vz(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,o){const a=Object.assign({},i);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const u=o[l],d=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=r(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _z="mcp_used/unknown";let xz=!1;function nb(t){for(const e of t)if(wz(e)||typeof e=="object"&&"inputSchema"in e)return!0;return xz}function rb(t){var e;const n=(e=t[$m])!==null&&e!==void 0?e:"";t[$m]=(n+` ${_z}`).trimStart()}function wz(t){return t!==null&&typeof t=="object"&&t instanceof Pv}function Tz(t,e=100){return co(this,arguments,function*(){let r,s=0;for(;s<e;){const i=yield Re(t.listTools({cursor:r}));for(const o of i.tools)yield yield Re(o),s++;if(!i.nextCursor)break;r=i.nextCursor}})}class Pv{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Pv(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const i={},o=[];for(const d of this.mcpClients)try{for(var a=!0,l=(n=void 0,sl(Tz(d))),u;u=await l.next(),e=u.done,!e;a=!0){s=u.value,a=!1;const m=s;o.push(m);const g=m.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=d}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),p3(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Ez(t,e,n){const r=new o3;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class Iz{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=Az(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const d=new Promise(S=>{u=S}),m=e.callbacks,g=function(){u({})},v=this.apiClient,w={onopen:g,onmessage:S=>{Ez(v,m.onmessage,S)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(S){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(S){}},C=this.webSocketFactory.create(l,Cz(o),w);C.connect(),await d;const x={setup:{model:we(this.apiClient,e.model)}};return C.send(JSON.stringify(x)),new Sz(C,this.apiClient)}}class Sz{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=d$(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=c$(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Qi.PLAY)}pause(){this.sendPlaybackControl(Qi.PAUSE)}stop(){this.sendPlaybackControl(Qi.STOP)}resetContext(){this.sendPlaybackControl(Qi.RESET_CONTEXT)}close(){this.conn.close()}}function Cz(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Az(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nz="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Pz(t,e,n){const r=new i3;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(t.isVertexAI()){const o=p$(i);Object.assign(r,o)}else Object.assign(r,i);e(r)}class Rz{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new Iz(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,i,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&nb(e.config.tools)&&rb(m);const g=Mz(m);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,d);else{const A=this.apiClient.getApiKey();let P="BidiGenerateContent",k="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",k="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${P}?${k}=${A}`}let v=()=>{};const w=new Promise(A=>{v=A}),C=e.callbacks,R=function(){var A;(A=C==null?void 0:C.onopen)===null||A===void 0||A.call(C),v({})},E=this.apiClient,x={onopen:R,onmessage:A=>{Pz(E,C.onmessage,A)},onerror:(n=C==null?void 0:C.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=C==null?void 0:C.onclose)!==null&&r!==void 0?r:function(A){}},S=this.webSocketFactory.create(d,Dz(g),x);S.connect(),await w;let V=we(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const A=this.apiClient.getProject(),P=this.apiClient.getLocation();V=`projects/${A}/locations/${P}/`+V}let L={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[_d.AUDIO]}:e.config.responseModalities=[_d.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],I=[];for(const A of F)if(this.isCallableTool(A)){const P=A;I.push(await P.tool())}else I.push(A);I.length>0&&(e.config.tools=I);const T={model:V,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=u$(this.apiClient,T):L=l$(this.apiClient,T),delete L.config,S.send(JSON.stringify(L)),new kz(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const bz={turnComplete:!0};class kz{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Tn(n.turns),e.isVertexAI()||(r=r.map(s=>xf(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(Nz)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},bz),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:h$(e)}:n={realtimeInput:f$(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Dz(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Mz(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DE=10;function ME(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(fo(o)){s=!0;break}if(!s)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function fo(t){return"callTool"in t&&typeof t.callTool=="function"}function Vz(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>fo(s)))!==null&&r!==void 0?r:!1}function VE(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(fo(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function LE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lz extends Lr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,i,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Vz(n)||ME(n.config))return await this.generateContentInternal(l);const u=VE(n);if(u.length>0){const C=u.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let d,m;const g=Tn(l.contents),v=(i=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:DE;let w=0;for(;w<v&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){const C=d.candidates[0].content,R=[];for(const E of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(fo(E)){const S=await E.callTool(d.functionCalls);R.push(...S)}w++,m={role:"user",parts:R},l.contents=Tn(l.contents),l.contents.push(C),l.contents.push(m),LE(l.config)&&(g.push(C),g.push(m))}return LE(l.config)&&(d.automaticFunctionCallingHistory=g),d},this.generateContentStream=async n=>{var r,s,i,o,a;if(this.maybeMoveToResponseJsonSchem(n),ME(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const l=VE(n);if(l.length>0){const m=l.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(i=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,d=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let i;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:o.push(l);let a;return i?a={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new xi(Dr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,i,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async l=>fo(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&nb(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),rb(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,r,s;const i=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(fo(o)){const a=o,l=await a.tool();for(const u of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(i.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);i.set(u.name,a)}}return i}async processAfcStream(e){var n,r,s;const i=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:DE;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,d,m){var g,v;return co(this,arguments,function*(){for(var w,C,R,E;a<i;){o&&(a++,o=!1);const L=yield Re(u.processParamsMaybeAddMcpUsage(m)),F=yield Re(u.generateContentStreamInternal(L)),I=[],T=[];try{for(var x=!0,S=(C=void 0,sl(F)),V;V=yield Re(S.next()),w=V.done,!w;x=!0){E=V.value,x=!1;const A=E;if(yield yield Re(A),A.candidates&&(!((g=A.candidates[0])===null||g===void 0)&&g.content)){T.push(A.candidates[0].content);for(const P of(v=A.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<i&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(P.functionCall.name)){const k=yield Re(d.get(P.functionCall.name).callTool([P.functionCall]));I.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(A){C={error:A}}finally{try{!x&&!w&&(R=S.return)&&(yield Re(R.call(S)))}finally{if(C)throw C.error}}if(I.length>0){o=!0;const A=new Ta;A.candidates=[{content:{role:"user",parts:I}}],yield yield Re(A);const P=[];P.push(...T),P.push({role:"user",parts:I});const k=Tn(m.contents).concat(P);m.contents=k}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=NE(this.apiClient,e);return a=K("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=RE(d),g=new Ta;return Object.assign(g,m),g})}else{const u=AE(this.apiClient,e);return a=K("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=PE(d),g=new Ta;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=NE(this.apiClient,e);return a=K("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return co(this,arguments,function*(){var g,v,w,C;try{for(var R=!0,E=sl(m),x;x=yield Re(E.next()),g=x.done,!g;R=!0){C=x.value,R=!1;const S=C,V=RE(yield Re(S.json()));V.sdkHttpResponse={headers:S.headers};const L=new Ta;Object.assign(L,V),yield yield Re(L)}}catch(S){v={error:S}}finally{try{!R&&!g&&(w=E.return)&&(yield Re(w.call(E)))}finally{if(v)throw v.error}}})})}else{const u=AE(this.apiClient,e);return a=K("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return co(this,arguments,function*(){var g,v,w,C;try{for(var R=!0,E=sl(m),x;x=yield Re(E.next()),g=x.done,!g;R=!0){C=x.value,R=!1;const S=C,V=PE(yield Re(S.json()));V.sdkHttpResponse={headers:S.headers};const L=new Ta;Object.assign(L,V),yield yield Re(L)}}catch(S){v={error:S}}finally{try{!R&&!g&&(w=E.return)&&(yield Re(w.call(E)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=$$(this.apiClient,e);return a=K("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=H$(d),g=new dE;return Object.assign(g,m),g})}else{const u=G$(this.apiClient,e);return a=K("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=z$(d),g=new dE;return Object.assign(g,m),g})}}async generateImagesInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=r9(this.apiClient,e);return a=K("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=i9(d),g=new fE;return Object.assign(g,m),g})}else{const u=n9(this.apiClient,e);return a=K("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=s9(d),g=new fE;return Object.assign(g,m),g})}}async editImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=O$(this.apiClient,e);return i=K("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=q$(l),d=new K6;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=rz(this.apiClient,e);return i=K("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=sz(l),d=new J6;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=U9(this.apiClient,e);return i=K("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const u=O9(l),d=new Y6;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=z9(this.apiClient,e);return i=K("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const u=H9(l),d=new Q6;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=T9(this.apiClient,e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Gm(d))}else{const u=w9(this.apiClient,e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>jm(d))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=b9(this.apiClient,e);return a=K("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=D9(d),g=new hE;return Object.assign(g,m),g})}else{const u=R9(this.apiClient,e);return a=K("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=k9(d),g=new hE;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=tz(this.apiClient,e);return a=K("{model}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Gm(d))}else{const u=ez(this.apiClient,e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>jm(d))}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=V$(this.apiClient,e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=F$(d),g=new pE;return Object.assign(g,m),g})}else{const u=M$(this.apiClient,e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=L$(d),g=new pE;return Object.assign(g,m),g})}}async countTokens(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=b$(this.apiClient,e);return a=K("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=D$(d),g=new mE;return Object.assign(g,m),g})}else{const u=R$(this.apiClient,e);return a=K("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=k$(d),g=new mE;return Object.assign(g,m),g})}}async computeTokens(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=E$(this.apiClient,e);return i=K("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=I$(l),d=new X6;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=d9(this.apiClient,e);return a=K("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const m=u9(d),g=new xd;return Object.assign(g,m),g})}else{const u=c9(this.apiClient,e);return a=K("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=l9(d),g=new xd;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fz extends Lr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=j6(e);return a=K("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else{const u=B6(e);return a=K("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=M6(e);return i=K("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uz(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Oz(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Kz(i))),h(e,["parts"],s)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function qz(t,e,n){const r={},s=c(e,["expireTime"]);n!==void 0&&s!=null&&h(n,["expireTime"],s);const i=c(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&h(n,["newSessionExpireTime"],i);const o=c(e,["uses"]);n!==void 0&&o!=null&&h(n,["uses"],o);const a=c(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&h(n,["bidiGenerateContentSetup"],Wz(t,a));const l=c(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&h(n,["fieldMask"],l),r}function Bz(t,e){const n={},r=c(e,["config"]);return r!=null&&h(n,["config"],qz(t,r,n)),n}function jz(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Gz(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const s=c(t,["name"]);if(s!=null&&h(e,["name"],s),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $z(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function zz(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function Hz(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const s=c(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const i=c(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=c(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","seed"],d);const m=c(t,["speechConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","speechConfig"],Nv(m));const g=c(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const v=c(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],v);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&h(e,["setup","systemInstruction"],Oz(Nt(w)));const C=c(t,["tools"]);if(e!==void 0&&C!=null){let F=Ko(C);Array.isArray(F)&&(F=F.map(I=>Yz(Wo(I)))),h(e,["setup","tools"],F)}const R=c(t,["sessionResumption"]);e!==void 0&&R!=null&&h(e,["setup","sessionResumption"],Jz(R));const E=c(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&h(e,["setup","inputAudioTranscription"],E);const x=c(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","outputAudioTranscription"],x);const S=c(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const V=c(t,["contextWindowCompression"]);e!==void 0&&V!=null&&h(e,["setup","contextWindowCompression"],V);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&h(e,["setup","proactivity"],L),n}function Wz(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["setup","model"],we(t,r));const s=c(e,["config"]);return s!=null&&h(n,["config"],Hz(s,n)),n}function Kz(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const s=c(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const i=c(t,["fileData"]);i!=null&&h(e,["fileData"],jz(i));const o=c(t,["functionCall"]);o!=null&&h(e,["functionCall"],Gz(o));const a=c(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],Uz(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const d=c(t,["thought"]);d!=null&&h(e,["thought"],d);const m=c(t,["thoughtSignature"]);m!=null&&h(e,["thoughtSignature"],m);const g=c(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function Jz(t){const e={},n=c(t,["handle"]);if(n!=null&&h(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Yz(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),h(e,["functionDeclarations"],d)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const s=c(t,["computerUse"]);s!=null&&h(e,["computerUse"],s);const i=c(t,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],$z(a));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],zz(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qz(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${n}.${i}`);e.push(...s)}else e.push(n)}return e.join(",")}function Xz(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const i=Qz(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(u=>o.includes(u)?`generationConfig.${u}`:u));const l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class Zz extends Lr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=Bz(this.apiClient,e);i=K("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=Xz(a,e.config);return s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eH(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&h(e,["displayName"],r),n}function tH(t){const e={},n=c(t,["config"]);return n!=null&&eH(n,e),e}function nH(t,e){const n={},r=c(t,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),n}function rH(t){const e={},n=c(t,["name"]);n!=null&&h(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&nH(r,e),e}function sH(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function iH(t,e){const n={},r=c(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["customMetadata"],i)}const s=c(t,["chunkingConfig"]);return e!==void 0&&s!=null&&h(e,["chunkingConfig"],s),n}function oH(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const s=c(t,["done"]);s!=null&&h(e,["done"],s);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const o=c(t,["response"]);return o!=null&&h(e,["response"],lH(o)),e}function aH(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const r=c(t,["fileName"]);r!=null&&h(e,["fileName"],r);const s=c(t,["config"]);return s!=null&&iH(s,e),e}function lH(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&h(e,["parent"],r);const s=c(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function uH(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function cH(t){const e={},n=c(t,["config"]);return n!=null&&uH(n,e),e}function dH(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const s=c(t,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["fileSearchStores"],i)}return e}function fH(t,e){const n={},r=c(t,["mimeType"]);e!==void 0&&r!=null&&h(e,["mimeType"],r);const s=c(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const i=c(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["customMetadata"],a)}const o=c(t,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),n}function hH(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const r=c(t,["config"]);return r!=null&&fH(r,e),e}function pH(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mH(t,e){const n={},r=c(t,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),n}function gH(t){const e={},n=c(t,["name"]);n!=null&&h(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&mH(r,e),e}function yH(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function vH(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function _H(t){const e={},n=c(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const r=c(t,["config"]);return r!=null&&vH(r,e),e}function xH(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const s=c(t,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wH extends Lr{constructor(e){super(),this.apiClient=e,this.list=async n=>new xi(Dr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=yH(e);return i=K("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=gH(e);s=K("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_H(e);return i=K("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const u=xH(l),d=new Z6;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TH extends Lr{constructor(e,n=new wH(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new xi(Dr.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tH(e);return i=K("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=sH(e);return i=K("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=rH(e);s=K("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=cH(e);return i=K("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const u=dH(l),d=new e3;return Object.assign(d,u),d})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hH(e);return i=K("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const u=pH(l),d=new t3;return Object.assign(d,u),d})}}async importFile(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=aH(e);return i=K("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const u=oH(l),d=new Ev;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EH(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function IH(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function SH(t,e,n){const r={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=c(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&h(e,["displayName"],s),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=c(t,["epochCount"]);e!==void 0&&i!=null&&h(e,["tuningTask","hyperparameters","epochCount"],i);const o=c(t,["learningRateMultiplier"]);if(o!=null&&h(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=c(t,["batchSize"]);e!==void 0&&a!=null&&h(e,["tuningTask","hyperparameters","batchSize"],a);const l=c(t,["learningRate"]);if(e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","learningRate"],l),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function CH(t,e,n){const r={};let s=c(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const v=c(t,["validationDataset"]);e!==void 0&&v!=null&&h(e,["supervisedTuningSpec"],FE(v))}else if(s==="PREFERENCE_TUNING"){const v=c(t,["validationDataset"]);e!==void 0&&v!=null&&h(e,["preferenceOptimizationSpec"],FE(v))}const i=c(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&h(e,["tunedModelDisplayName"],i);const o=c(t,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);let a=c(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const v=c(t,["epochCount"]);e!==void 0&&v!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(a==="PREFERENCE_TUNING"){const v=c(t,["epochCount"]);e!==void 0&&v!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let l=c(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const v=c(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(l==="PREFERENCE_TUNING"){const v=c(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const v=c(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(u==="PREFERENCE_TUNING"){const v=c(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let d=c(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const v=c(t,["adapterSize"]);e!==void 0&&v!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(d==="PREFERENCE_TUNING"){const v=c(t,["adapterSize"]);e!==void 0&&v!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=c(t,["labels"]);e!==void 0&&m!=null&&h(e,["labels"],m);const g=c(t,["beta"]);return e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),r}function AH(t,e){const n={},r=c(t,["baseModel"]);r!=null&&h(n,["baseModel"],r);const s=c(t,["preTunedModel"]);s!=null&&h(n,["preTunedModel"],s);const i=c(t,["trainingDataset"]);i!=null&&UH(i);const o=c(t,["config"]);return o!=null&&SH(o,n),n}function NH(t,e){const n={},r=c(t,["baseModel"]);r!=null&&h(n,["baseModel"],r);const s=c(t,["preTunedModel"]);s!=null&&h(n,["preTunedModel"],s);const i=c(t,["trainingDataset"]);i!=null&&OH(i,n,e);const o=c(t,["config"]);return o!=null&&CH(o,n,e),n}function PH(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function RH(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function bH(t,e,n){const r={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const o=c(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),r}function kH(t,e,n){const r={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const o=c(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),r}function DH(t,e){const n={},r=c(t,["config"]);return r!=null&&bH(r,n),n}function MH(t,e){const n={},r=c(t,["config"]);return r!=null&&kH(r,n),n}function VH(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const s=c(t,["nextPageToken"]);s!=null&&h(n,["nextPageToken"],s);const i=c(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>sb(a))),h(n,["tuningJobs"],o)}return n}function LH(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const s=c(t,["nextPageToken"]);s!=null&&h(n,["nextPageToken"],s);const i=c(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>zm(a))),h(n,["tuningJobs"],o)}return n}function FH(t,e){const n={},r=c(t,["name"]);r!=null&&h(n,["model"],r);const s=c(t,["name"]);return s!=null&&h(n,["endpoint"],s),n}function UH(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=c(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),h(n,["examples","examples"],s)}return n}function OH(t,e,n){const r={};let s=c(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=c(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=c(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=c(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=c(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=c(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function sb(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const s=c(t,["name"]);s!=null&&h(n,["name"],s);const i=c(t,["state"]);i!=null&&h(n,["state"],OR(i));const o=c(t,["createTime"]);o!=null&&h(n,["createTime"],o);const a=c(t,["tuningTask","startTime"]);a!=null&&h(n,["startTime"],a);const l=c(t,["tuningTask","completeTime"]);l!=null&&h(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(n,["updateTime"],u);const d=c(t,["description"]);d!=null&&h(n,["description"],d);const m=c(t,["baseModel"]);m!=null&&h(n,["baseModel"],m);const g=c(t,["_self"]);return g!=null&&h(n,["tunedModel"],FH(g)),n}function zm(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const s=c(t,["name"]);s!=null&&h(n,["name"],s);const i=c(t,["state"]);i!=null&&h(n,["state"],OR(i));const o=c(t,["createTime"]);o!=null&&h(n,["createTime"],o);const a=c(t,["startTime"]);a!=null&&h(n,["startTime"],a);const l=c(t,["endTime"]);l!=null&&h(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(n,["updateTime"],u);const d=c(t,["error"]);d!=null&&h(n,["error"],d);const m=c(t,["description"]);m!=null&&h(n,["description"],m);const g=c(t,["baseModel"]);g!=null&&h(n,["baseModel"],g);const v=c(t,["tunedModel"]);v!=null&&h(n,["tunedModel"],v);const w=c(t,["preTunedModel"]);w!=null&&h(n,["preTunedModel"],w);const C=c(t,["supervisedTuningSpec"]);C!=null&&h(n,["supervisedTuningSpec"],C);const R=c(t,["preferenceOptimizationSpec"]);R!=null&&h(n,["preferenceOptimizationSpec"],R);const E=c(t,["tuningDataStats"]);E!=null&&h(n,["tuningDataStats"],E);const x=c(t,["encryptionSpec"]);x!=null&&h(n,["encryptionSpec"],x);const S=c(t,["partnerModelTuningSpec"]);S!=null&&h(n,["partnerModelTuningSpec"],S);const V=c(t,["customBaseModel"]);V!=null&&h(n,["customBaseModel"],V);const L=c(t,["experiment"]);L!=null&&h(n,["experiment"],L);const F=c(t,["labels"]);F!=null&&h(n,["labels"],F);const I=c(t,["outputUri"]);I!=null&&h(n,["outputUri"],I);const T=c(t,["pipelineJob"]);T!=null&&h(n,["pipelineJob"],T);const A=c(t,["serviceAccount"]);A!=null&&h(n,["serviceAccount"],A);const P=c(t,["tunedModelDisplayName"]);P!=null&&h(n,["tunedModelDisplayName"],P);const k=c(t,["veoTuningSpec"]);return k!=null&&h(n,["veoTuningSpec"],k),n}function qH(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const s=c(t,["name"]);s!=null&&h(n,["name"],s);const i=c(t,["metadata"]);i!=null&&h(n,["metadata"],i);const o=c(t,["done"]);o!=null&&h(n,["done"],o);const a=c(t,["error"]);return a!=null&&h(n,["error"],a),n}function FE(t,e){const n={},r=c(t,["gcsUri"]);r!=null&&h(n,["validationDatasetUri"],r);const s=c(t,["vertexDatasetResource"]);return s!=null&&h(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BH extends Lr{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new xi(Dr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Um.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=RH(e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>zm(d))}else{const u=PH(e);return a=K("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>sb(d))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=MH(e);return a=K("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=LH(d),g=new gE;return Object.assign(g,m),g})}else{const u=DH(e);return a=K("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=VH(d),g=new gE;return Object.assign(g,m),g})}}async cancel(e){var n,r,s,i;let o="",a={};if(this.apiClient.isVertexAI()){const l=IH(e);o=K("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=EH(e);o=K("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=NH(e,e);return i=K("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>zm(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=AH(e);return i=K("tunedModels",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>qH(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jH{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const GH=1024*1024*8,$H=3,zH=1e3,HH=2,Td="x-goog-upload-status";async function WH(t,e,n){var r;const s=await ib(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Td])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function KH(t,e,n){var r;const s=await ib(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Td])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=DR(i),a=new Iv;return Object.assign(a,o),a}async function ib(t,e,n){var r,s;let i=0,o=0,a=new Om(new Response),l="upload";for(i=t.size;o<i;){const u=Math.min(GH,i-o),d=t.slice(o,o+u);o+u>=i&&(l+=", finalize");let m=0,g=zH;for(;m<$H&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[Td]));)m++,await YH(g),g=g*HH;if(o+=u,((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Td])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function JH(t){return{size:t.size,type:t.type}}function YH(t){return new Promise(e=>setTimeout(e,t))}class QH{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WH(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KH(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JH(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XH{create(e,n,r){return new ZH(e,n,r)}}class ZH{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UE="x-goog-api-key";class e8{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(UE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(UE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t8="gl-node/";class n8{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=k6(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const s=new e8(this.apiKey);this.apiClient=new yz({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:t8+"web",uploader:new QH,downloader:new jH}),this.models=new Lz(this.apiClient),this.live=new Rz(this.apiClient,s,new XH),this.batches=new aG(this.apiClient),this.chats=new jG(this.models,this.apiClient),this.caches=new OG(this.apiClient),this.files=new XG(this.apiClient),this.operations=new Fz(this.apiClient),this.authTokens=new Zz(this.apiClient),this.tunings=new BH(this.apiClient),this.fileSearchStores=new TH(this.apiClient)}}const jh={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Qu={};const r8=()=>{try{if(typeof process<"u"&&(Qu!=null&&Qu.API_KEY))return Qu.API_KEY}catch{}try{return jh==null?void 0:jh.VITE_API_KEY}catch{return}},Ef=r8();Ef||console.warn("API Key is missing. Features relying on Gemini API will not work.");const ob=new n8({apiKey:Ef||"dummy-key"}),s8=Object.keys(JN).join(", "),i8={type:be.OBJECT,properties:{localName:{type:be.STRING,description:"Nome do estabelecimento comercial."},purchaseDate:{type:be.STRING,description:"Data da compra no formato YYYY-MM-DD."},items:{type:be.ARRAY,items:{type:be.OBJECT,properties:{name:{type:be.STRING},price:{type:be.NUMBER}},required:["name","price"]},description:"Lista de produtos ou servios adquiridos com seus respectivos preos unitrios ou totais do item."},total:{type:be.NUMBER,description:"Valor total final da nota fiscal."},category:{type:be.STRING,description:`A melhor categoria que se aplica a esta despesa. Opes: ${s8}`},subcategory:{type:be.STRING,description:"Uma subcategoria relevante baseada no contexto da categoria principal."},paymentMethod:{type:be.STRING,description:"Mtodo de pagamento (Crdito, Dbito, Pix, Dinheiro, etc)."}},required:["localName","purchaseDate","total","category","items"]},o8={type:be.ARRAY,items:{type:be.OBJECT,properties:{date:{type:be.STRING},description:{type:be.STRING},amount:{type:be.NUMBER},type:{type:be.STRING,enum:["DEBIT","CREDIT"]}},required:["date","description","amount","type"]}},a8=async t=>{if(!Ef)throw new Error("API_NOT_ENABLED");try{const e=await ob.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:t}},{text:"Analise esta imagem de cupom fiscal/recibo (NFC-e, SAT ou recibo comum). Extraia os dados estruturados. Para a data, procure a data de emisso. Liste todos os itens visveis com seus preos. Identifique o total pago. Categorize a despesa."}]},config:{responseMimeType:"application/json",responseSchema:i8}});if(!e.text)throw new Error("Resposta vazia da IA.");const n=JSON.parse(e.text);return{localName:n.localName||"Desconhecido",purchaseDate:n.purchaseDate||new Date().toISOString().split("T")[0],items:n.items||[],total:typeof n.total=="number"?n.total:0,category:n.category||"Outros",subcategory:n.subcategory||"Outros",isRecurring:!1,paymentMethod:n.paymentMethod||"Outro",type:"expense"}}catch(e){console.error("Gemini Error Full:",JSON.stringify(e,null,2));const n=e.message||"";throw n.includes("Generative Language API has not been used")||e.status===403||n.includes("PERMISSION_DENIED")||n.includes("API key not valid")?new Error("API_NOT_ENABLED"):new Error(`Erro ao processar imagem: ${n||"Tente novamente."}`)}},dW=async t=>{if(!Ef)throw new Error("API_NOT_ENABLED");try{const e=await ob.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:`Analise o texto deste extrato bancrio e extraia as transaes financeiras em JSON. Ignore saldos e cabealhos. Texto: ${t}`}]},config:{responseMimeType:"application/json",responseSchema:o8}});if(!e.text)return[];const n=JSON.parse(e.text);return Array.isArray(n)?n:[]}catch(e){console.error("Gemini PDF Error:",e);const n=e.message||"";throw n.includes("Generative Language API has not been used")||e.status===403||n.includes("PERMISSION_DENIED")?new Error("API_NOT_ENABLED"):new Error("Erro ao processar PDF.")}},l8=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>{const s=r.result;e(s.split(",")[1])},r.onerror=s=>n(s)}),Gh=t=>typeof t!="number"||isNaN(t)?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),u8=({isOpen:t,onClose:e,onSaveExpense:n,expenseToEdit:r,initialData:s,onAPISetupError:i})=>{const[o,a]=M.useState({localName:"",purchaseDate:new Date().toISOString().split("T")[0],total:0,category:"",subcategory:"",isRecurring:!1,paymentMethod:"",recurrenceFrequency:void 0,type:"expense"}),[l,u]=M.useState([]),[d,m]=M.useState(!1),[g,v]=M.useState(null),[w,C]=M.useState([]),[R,E]=M.useState(null),x=M.useRef(null),{showToast:S}=_i(),V=M.useCallback(()=>{a({localName:"",purchaseDate:new Date().toISOString().split("T")[0],total:0,category:"",subcategory:"",isRecurring:!1,paymentMethod:"",type:"expense"}),u([]),v(null),m(!1),C([]),E(null)},[]);M.useEffect(()=>{r?(a({localName:r.localName,purchaseDate:r.purchaseDate,total:r.total,category:r.category,subcategory:r.subcategory,isRecurring:r.isRecurring,paymentMethod:r.paymentMethod,recurrenceFrequency:r.recurrenceFrequency,type:r.type||"expense"}),u(r.items||[]),E(null)):s?(a({localName:s.localName,purchaseDate:s.purchaseDate,total:s.total,category:s.category,subcategory:s.subcategory,isRecurring:s.isRecurring,paymentMethod:s.paymentMethod,recurrenceFrequency:s.recurrenceFrequency,type:s.type||"expense"}),u(s.items||[])):V()},[r,s,t,V]),M.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]);const L=()=>{V(),e()},F=o.type==="income"?_4:ki,I=B=>{a(Y=>({...Y,category:B,subcategory:""}))};M.useEffect(()=>{o.category&&F[o.category]?C(F[o.category]):C([])},[o.category,o.type,F]);const T=B=>{a(Y=>({...Y,type:B,category:"",subcategory:""}))},A=async B=>{var ee,re,fe;const Y=(ee=B.target.files)==null?void 0:ee[0];if(Y){const je=URL.createObjectURL(Y);E(je),m(!0),v(null);try{const Ge=await l8(Y),ve=await a8(Ge);let cn=[],Ur=0;typeof ve.total=="number"&&!isNaN(ve.total)&&ve.total>0?Ur=ve.total:cn.push("Total no reconhecido. Ajuste manualmente.");const Cn=((re=ve.localName)==null?void 0:re.trim())!==""?ve.localName:"Despesa Escaneada";let kt=ve.purchaseDate||new Date().toISOString().split("T")[0];/^\d{4}-\d{2}-\d{2}$/.test(kt)||(kt=new Date().toISOString().split("T")[0]);const lr=ve.category||"",Dt=Object.keys(ki).includes(lr)?lr:"Outros",$n=ki[Dt]||[];let An="";$n.includes(ve.subcategory)?An=ve.subcategory:$n.length>0?An=$n[0]:((fe=ki.Outros)==null?void 0:fe.length)>0&&(An=ki.Outros[0]);const Ns=Yx.includes(ve.paymentMethod)?ve.paymentMethod:"Outro";a({localName:Cn,purchaseDate:kt,total:Ur,category:Dt,subcategory:An,isRecurring:!1,paymentMethod:Ns,type:"expense"}),u(Array.isArray(ve.items)?ve.items:[]);let Ps="Recibo lido com sucesso!";cn.length>0?(Ps+=" Verifique os detalhes.",S(Ps,"info")):S(Ps,"success")}catch(Ge){const ve=Ge;if(ve.message==="API_NOT_ENABLED"){i();return}const cn=ve.message;v(cn),S(cn,"error"),E(null)}finally{m(!1),x.current&&(x.current.value="")}}},P=()=>{var B;(B=x.current)==null||B.click()},k=()=>{E(null)},D=(B,Y,ee)=>{const re=[...l];if(Y==="name")re[B].name=ee;else{const fe=ee.replace(/\D/g,"");re[B].price=fe?parseInt(fe,10)/100:0}u(re)},b=()=>{u([...l,{name:"",price:0}])},Ie=B=>{const Y=l.filter((ee,re)=>re!==B);u(Y)},Me=()=>{const B=l.reduce((Y,ee)=>Y+ee.price,0);a(Y=>({...Y,total:B})),S(`Total atualizado para ${Gh(B)} baseado nos itens.`,"success")},te=B=>{B.preventDefault();let Y=!1,ee="Preencha todos os campos obrigatrios.";if(o.localName.trim()?o.total<=0?(Y=!0,ee="O valor total deve ser maior que zero."):o.category?o.subcategory?o.paymentMethod||(Y=!0,ee="Forma de Pagamento  obrigatria."):(Y=!0,ee="Subcategoria  obrigatria."):(Y=!0,ee="Categoria  obrigatria."):(Y=!0,ee=o.type==="income"?"Origem da receita  obrigatria.":"Nome do Local  obrigatrio."),Y){v(ee),S(ee,"error");return}v(null);const re={localName:o.localName,purchaseDate:o.purchaseDate,items:l.filter(fe=>fe.name.trim()!==""||fe.price>0),total:o.total,category:o.category,subcategory:o.subcategory,isRecurring:o.isRecurring,paymentMethod:o.paymentMethod,type:o.type};o.isRecurring&&o.recurrenceFrequency&&(re.recurrenceFrequency=o.recurrenceFrequency),n(re,r==null?void 0:r.id),L()},W=B=>{const Y=B.target.value.replace(/\D/g,"");if(Y===""){a(re=>({...re,total:0}));return}const ee=parseInt(Y,10)/100;a(re=>({...re,total:ee}))};if(!t)return null;const O="w-full p-3.5 bg-white text-gray-800 rounded-xl border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 disabled:bg-gray-50 disabled:text-gray-400 placeholder-gray-400",z="p-2.5 bg-white text-gray-800 rounded-lg border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm transition-all";return nD.createPortal(p.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm flex justify-center items-center z-[9999] p-4",role:"dialog","aria-modal":"true","aria-labelledby":"expense-modal-title",children:p.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden animate-fade-in",children:[p.jsxs("div",{className:"p-5 border-b border-gray-100 flex justify-between items-center bg-white z-10",children:[p.jsx("h2",{id:"expense-modal-title",className:"text-xl font-bold text-gray-800",children:r?"Editar Lanamento":s?"Revisar Lanamento":"Novo Lanamento"}),p.jsx("button",{onClick:L,className:"text-gray-400 hover:text-gray-600 p-1.5 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Fechar",children:p.jsx(Sn,{className:"text-2xl"})})]}),p.jsx("div",{className:"p-6 overflow-y-auto",children:d?p.jsxs("div",{className:"flex flex-col items-center justify-center h-64",role:"status","aria-live":"polite",children:[R&&p.jsx("div",{className:"absolute inset-0 z-0 opacity-20 bg-cover bg-center filter blur-sm",style:{backgroundImage:`url(${R})`}}),p.jsxs("div",{className:"relative w-20 h-20 z-10",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-blue-100 rounded-full opacity-30"}),p.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-transparent border-t-blue-600 rounded-full animate-spin"}),p.jsx(dd,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-blue-600 text-2xl"})]}),p.jsx("p",{className:"mt-4 text-gray-800 font-bold text-lg z-10",children:"Lendo notinha..."}),p.jsx("p",{className:"text-sm text-gray-500 z-10",children:"A IA est processando os dados."})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-2xl mb-6 shadow-inner",children:[p.jsxs("button",{type:"button",onClick:()=>T("expense"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all ${o.type==="expense"?"bg-white text-red-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[p.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_downward"}),"Despesa"]}),p.jsxs("button",{type:"button",onClick:()=>T("income"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all ${o.type==="income"?"bg-white text-green-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[p.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_upward"}),"Receita"]})]}),R&&p.jsxs("div",{className:"mb-6 relative group animate-fade-in",children:[p.jsxs("div",{className:"w-full h-48 bg-gray-100 rounded-2xl overflow-hidden border border-gray-200 relative",children:[p.jsx("img",{src:R,alt:"Recibo escaneado",className:"w-full h-full object-contain"}),p.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors pointer-events-none"})]}),p.jsx("button",{onClick:k,className:"absolute top-2 right-2 bg-white/90 text-red-500 p-1.5 rounded-full shadow-md hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100",title:"Remover imagem",children:p.jsx(Xx,{className:"text-lg"})}),p.jsxs("p",{className:"text-[10px] text-center text-gray-400 mt-1 flex items-center justify-center gap-1",children:[p.jsx("span",{className:"material-symbols-outlined text-xs",children:"visibility"}),"Use a imagem para conferir os dados abaixo"]})]}),!r&&!s&&!R&&o.type==="expense"&&p.jsx("div",{className:"mb-6",children:p.jsxs("button",{onClick:P,className:"w-full flex items-center justify-center gap-3 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-100 text-blue-700 font-bold rounded-2xl hover:from-blue-100 hover:to-indigo-100 transition-all shadow-sm hover:shadow-md group active:scale-[0.98]","aria-label":"Escanear recibo com a cmera",children:[p.jsx("div",{className:"bg-white w-12 h-12 min-w-[3rem] min-h-[3rem] flex items-center justify-center rounded-full shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:p.jsx(dd,{className:"text-xl"})}),"Escanear Nota Fiscal / Recibo"]})}),p.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:x,onChange:A,className:"hidden","aria-label":"Selecione um arquivo de imagem"}),g&&p.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 mb-4 text-sm rounded-xl flex items-center gap-2",role:"alert",children:[p.jsx("span",{className:"material-symbols-outlined",children:"error"}),g]}),p.jsxs("form",{onSubmit:te,className:"space-y-5",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"localName",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:o.type==="income"?"Origem (Quem pagou?)":"Local (Onde gastou?)"}),p.jsx("input",{id:"localName",type:"text",placeholder:o.type==="income"?"Ex: Empresa X, Cliente Y":"Ex: Supermercado",value:o.localName,onChange:B=>a({...o,localName:B.target.value}),className:O,required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"purchaseDate",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Data"}),p.jsx("input",{id:"purchaseDate",type:"date",value:o.purchaseDate,onChange:B=>a({...o,purchaseDate:B.target.value}),className:O,required:!0})]})]}),(o.type==="expense"||l.length>0)&&p.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-100",children:[p.jsxs("div",{className:"flex justify-between items-center mb-3",children:[p.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:["Itens (",l.length,")"]}),p.jsxs("button",{type:"button",onClick:b,className:"text-blue-600 text-xs font-bold hover:text-blue-700 hover:bg-blue-50 px-2 py-1 rounded-lg transition-colors flex items-center gap-1",children:[p.jsx(jy,{className:"text-sm"})," Adicionar"]})]}),l.length===0?p.jsx("div",{className:"text-center py-4 border-2 border-dashed border-gray-200 rounded-xl",children:p.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"Nenhum item adicionado."})}):p.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:l.map((B,Y)=>p.jsxs("div",{className:"flex gap-2 items-center animate-fade-in",children:[p.jsx("input",{type:"text",value:B.name,onChange:ee=>D(Y,"name",ee.target.value),placeholder:"Nome do item",className:`flex-1 ${z}`}),p.jsx("input",{type:"text",inputMode:"decimal",value:Gh(B.price),onChange:ee=>D(Y,"price",ee.target.value),className:`w-24 text-right ${z}`}),p.jsx("button",{type:"button",onClick:()=>Ie(Y),className:"text-gray-400 hover:text-red-500 p-2 hover:bg-red-50 rounded-lg transition-colors","aria-label":"Remover item",children:p.jsx(Xx,{className:"text-lg"})})]},Y))}),l.length>0&&p.jsx("div",{className:"mt-3 flex justify-end",children:p.jsxs("button",{type:"button",onClick:Me,className:"text-xs flex items-center gap-1 text-blue-600 font-bold bg-blue-50 px-3 py-1.5 rounded-lg hover:bg-blue-100 transition-colors border border-blue-100",children:[p.jsx(C4,{className:"text-sm"})," Somar itens no Total"]})})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"category",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Categoria"}),p.jsxs("select",{id:"category",value:o.category,onChange:B=>I(B.target.value),className:`${O} appearance-none`,required:!0,children:[p.jsx("option",{value:"",disabled:!0,children:"Selecione"}),Object.keys(F).map(B=>p.jsx("option",{value:B,children:B},B))]}),p.jsx("span",{className:"absolute right-4 bottom-3.5 pointer-events-none text-gray-400 material-symbols-outlined text-lg",children:"expand_more"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"subcategory",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Subcategoria"}),p.jsxs("select",{id:"subcategory",value:o.subcategory,onChange:B=>a({...o,subcategory:B.target.value}),className:`${O} appearance-none`,disabled:!o.category,required:!0,children:[p.jsx("option",{value:"",disabled:!0,children:"Selecione"}),w.map(B=>p.jsx("option",{value:B,children:B},B))]}),p.jsx("span",{className:"absolute right-4 bottom-3.5 pointer-events-none text-gray-400 material-symbols-outlined text-lg",children:"expand_more"})]})]}),p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"paymentMethod",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:o.type==="income"?"Conta de Destino / Meio":"Forma de Pagamento"}),p.jsxs("select",{id:"paymentMethod",value:o.paymentMethod,onChange:B=>a({...o,paymentMethod:B.target.value}),className:`${O} appearance-none`,required:!0,children:[p.jsx("option",{value:"",disabled:!0,children:"Selecione"}),Yx.map(B=>p.jsx("option",{value:B,children:B},B))]}),p.jsx("span",{className:"absolute right-4 bottom-3.5 pointer-events-none text-gray-400 material-symbols-outlined text-lg",children:"expand_more"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"total",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:o.type==="income"?"Valor Recebido":"Total da Despesa"}),p.jsxs("div",{className:"relative",children:[p.jsx("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 font-bold text-lg",children:"R$"}),p.jsx("input",{id:"total",type:"text",inputMode:"decimal",placeholder:"0,00",value:Gh(o.total).replace("R$","").trim(),onChange:W,className:`pl-12 ${O} font-bold text-xl tracking-tight ${o.type==="income"?"text-green-600":"text-red-600"}`,required:!0})]})]}),p.jsxs("div",{className:"flex items-center space-x-3 pt-2 bg-white p-3 rounded-xl border border-gray-200 shadow-sm",children:[p.jsx("input",{id:"isRecurring",type:"checkbox",checked:o.isRecurring,onChange:B=>a(Y=>({...Y,isRecurring:B.target.checked})),className:`w-5 h-5 bg-white border-gray-300 rounded focus:ring-2 transition-all ${o.type==="income"?"text-green-600 focus:ring-green-500":"text-blue-600 focus:ring-blue-500"}`}),p.jsx("label",{htmlFor:"isRecurring",className:"text-sm font-semibold text-gray-700 cursor-pointer select-none",children:o.type==="income"?"Receita Recorrente (Salrio/Aluguel)":"Despesa Recorrente (Assinatura)"})]}),o.isRecurring&&p.jsxs("div",{className:"animate-fade-in relative",children:[p.jsx("label",{htmlFor:"recurrenceFrequency",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Frequncia"}),p.jsxs("select",{id:"recurrenceFrequency",value:o.recurrenceFrequency||"",onChange:B=>a({...o,recurrenceFrequency:B.target.value}),className:`${O} appearance-none`,required:o.isRecurring,children:[p.jsx("option",{value:"",disabled:!0,children:"Selecione"}),p.jsx("option",{value:"daily",children:"Diariamente"}),p.jsx("option",{value:"weekly",children:"Semanalmente"}),p.jsx("option",{value:"monthly",children:"Mensalmente"}),p.jsx("option",{value:"annually",children:"Anualmente"})]}),p.jsx("span",{className:"absolute right-4 bottom-3.5 pointer-events-none text-gray-400 material-symbols-outlined text-lg",children:"expand_more"})]})]})]})}),p.jsx("div",{className:"p-5 border-t border-gray-100 bg-gray-50 z-10",children:p.jsx("button",{onClick:te,disabled:d,className:`w-full text-white font-bold py-4 px-4 rounded-xl transition-all shadow-lg shadow-blue-200 transform active:scale-[0.98] hover:-translate-y-0.5 ${o.type==="income"?"bg-green-600 hover:bg-green-700 disabled:bg-green-300":"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300"}`,children:d?"Processando...":"Salvar Lanamento"})})]})}),document.body)},OE=({title:t,price:e,description:n,tag:r,isSelected:s,onSelect:i})=>p.jsx(X.div,{layout:!0,onClick:i,whileTap:{scale:.98},className:`cursor-pointer p-5 border-2 rounded-xl relative transition-colors duration-200 flex items-center justify-between group ${s?"border-blue-600 bg-blue-50 shadow-sm ring-1 ring-blue-600":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 ${s?"border-blue-600 bg-blue-600":"border-gray-300 group-hover:border-blue-400"}`,children:s&&p.jsx(X.div,{layoutId:"checkmark",className:"w-2.5 h-2.5 rounded-full bg-white"})}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("h4",{className:`font-bold text-lg ${s?"text-blue-900":"text-gray-800"}`,children:t}),r&&p.jsx("span",{className:"text-[10px] font-bold text-white bg-blue-600 px-2 py-0.5 rounded-full shadow-sm tracking-wide",children:r})]}),p.jsx("p",{className:`font-medium ${s?"text-blue-700":"text-gray-600"}`,children:e}),p.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:n})]})]})}),c8=({isOpen:t,onClose:e})=>{const[n,r]=M.useState("annual"),{pricing:s,loading:i}=kR();if(!t)return null;const o=u=>u.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),a=s.annualPrice/12,l=()=>{const u=n==="annual"?"https://pay.kirvano.com/d5e20900-e9da-40fa-a226-03c484c321d4":"https://pay.kirvano.com/1f5acd83-e53a-4a80-8b72-42f87659a777";window.open(u,"_blank"),e()};return p.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-40 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md flex flex-col overflow-hidden animate-fade-in transform transition-all",children:[p.jsxs("div",{className:"p-5 border-b border-gray-100 flex justify-between items-center bg-white",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Seja Premium"}),p.jsx("p",{className:"text-xs text-gray-500",children:"Desbloqueie todo o potencial"})]}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 bg-white p-1.5 rounded-full shadow-sm border border-gray-200 hover:bg-gray-50 transition-colors",children:p.jsx(Sn,{className:"text-xl"})})]}),p.jsxs("div",{className:"p-6 space-y-4",children:[p.jsx("p",{className:"text-sm text-center text-gray-600 mb-2 leading-relaxed px-2",children:"Garanta acesso contnuo a leitura de notas com IA, relatrios ilimitados e backup na nuvem."}),i?p.jsx("div",{className:"flex justify-center py-8",children:p.jsx("span",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p.jsxs("div",{className:"space-y-3",children:[p.jsx(OE,{title:"Anual",price:`${o(a)} / ms`,description:`Cobrana nica de ${o(s.annualPrice)}`,tag:"-30% OFF",isSelected:n==="annual",onSelect:()=>r("annual")}),p.jsx(OE,{title:"Mensal",price:`${o(s.monthlyPrice)} / ms`,description:"Cancele quando quiser",isSelected:n==="monthly",onSelect:()=>r("monthly")})]})]}),p.jsxs("div",{className:"p-5 border-t border-gray-100 bg-gray-50/30 mt-auto",children:[p.jsxs("button",{onClick:l,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-4 px-4 rounded-xl hover:shadow-lg hover:from-blue-700 hover:to-indigo-700 transition-all transform active:scale-95 flex items-center justify-center gap-2",children:["Confirmar Assinatura ",n==="annual"?"Anual":"Mensal",p.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_forward"})]}),p.jsxs("p",{className:"text-[10px] text-center text-gray-400 mt-3 flex items-center justify-center gap-1",children:[p.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"lock"})," Pagamento seguro via Kirvano"]})]})]})})},d8=({isOpen:t,onClose:e,onAddReminder:n,onDeleteReminder:r,reminders:s})=>{const[i,o]=M.useState(""),[a,l]=M.useState(""),[u,d]=M.useState(""),[m,g]=M.useState("once"),[v,w]=M.useState(null),[C,R]=M.useState(!1),{showToast:E}=_i();M.useEffect(()=>{"Notification"in window&&R(Notification.permission==="granted")},[t]);const x=async()=>{if(!("Notification"in window)){E("Seu navegador no suporta notificaes.","error");return}const I=await Notification.requestPermission();R(I==="granted"),I==="granted"?(E("Notificaes ativadas! Voc ser avisado no horrio.","success"),new Notification("MeuGasto",{body:"As notificaes esto funcionando!"})):E("Permisso negada. No poderemos te avisar.","info")},S=I=>{I.preventDefault(),i&&a&&u&&(n({title:i,date:a,time:u,frequency:m}),o(""),l(""),d(""),g("once"),E("Lembrete agendado com sucesso!","success"))},V=(I,T)=>{const A=new Date,P=new Date(`${I}T${T}:00`),k=new Date;k.setHours(0,0,0,0);const D=new Date(P);return D.setHours(0,0,0,0),P<A?"overdue":D.getTime()===k.getTime()?"today":"upcoming"},L=M.useMemo(()=>[...s].sort((I,T)=>{const A=new Date(`${I.date}T${I.time}:00`),P=new Date(`${T.date}T${T.time}:00`);return A.getTime()-P.getTime()}),[s]);if(!t)return null;const F="w-full p-3 bg-white text-gray-900 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-colors duration-200 text-sm font-medium placeholder-gray-400";return p.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm flex justify-center items-center z-50 p-4 animate-fade-in",children:p.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md flex flex-col max-h-[90vh] overflow-hidden",children:[p.jsxs("div",{className:"p-5 border-b border-gray-100 flex justify-between items-center bg-white z-10",children:[p.jsxs("div",{children:[p.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[p.jsx(Zx,{className:"text-blue-600"}),"Lembretes"]}),p.jsx("p",{className:"text-xs text-gray-500",children:"No esquea de pagar suas contas"})]}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Fechar",children:p.jsx(Sn,{className:"text-2xl"})})]}),p.jsxs("div",{className:"p-5 bg-gray-50/50 border-b border-gray-100",children:[!C&&p.jsxs("div",{onClick:x,className:"mb-4 bg-blue-50 border border-blue-100 text-blue-700 p-3 rounded-xl flex items-center gap-3 cursor-pointer hover:bg-blue-100 transition-colors",children:[p.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm",children:p.jsx(Zx,{className:"text-blue-600 text-sm"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-xs font-bold",children:"Ativar Notificaes do Navegador"}),p.jsx("p",{className:"text-[10px] opacity-80",children:"Clique para receber alertas mesmo fora do app."})]})]}),p.jsxs("form",{onSubmit:S,className:"space-y-3",children:[p.jsx("input",{type:"text",placeholder:"Ex: Pagar Carto de Crdito...",value:i,onChange:I=>o(I.target.value),className:F,required:!0}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsx("input",{type:"date",value:a,onChange:I=>l(I.target.value),className:F,required:!0}),p.jsx("input",{type:"time",value:u,onChange:I=>d(I.target.value),className:F,required:!0})]}),p.jsxs("div",{className:"flex items-center gap-2 px-1",children:[p.jsx("input",{type:"checkbox",id:"monthlyFreq",checked:m==="monthly",onChange:I=>g(I.target.checked?"monthly":"once"),className:"w-4 h-4 bg-white border-gray-300 text-blue-600 rounded focus:ring-blue-500"}),p.jsx("label",{htmlFor:"monthlyFreq",className:"text-xs text-gray-600 font-medium",children:"Repetir mensalmente (Apenas visual)"})]}),p.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-3.5 px-4 rounded-xl hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-blue-200",children:[p.jsx(jy,{className:"text-xl"}),"Agendar Lembrete"]})]})]}),p.jsx("div",{className:"p-4 overflow-y-auto flex-1 bg-gray-50",children:L.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 opacity-60 mt-4",children:[p.jsx(b4,{className:"text-5xl mb-2"}),p.jsx("p",{className:"text-sm",children:"Nenhum lembrete pendente."})]}):p.jsx("ul",{className:"space-y-2.5",children:L.map(I=>{const T=V(I.date,I.time);let A="bg-gray-100 text-gray-500 border-gray-200",P="Em breve";return T==="overdue"?(A="bg-red-50 text-red-600 border-red-100",P="Atrasado"):T==="today"&&(A="bg-green-50 text-green-600 border-green-100",P="Hoje"),p.jsx("li",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col group hover:shadow-md transition-all",children:p.jsxs("div",{className:"flex justify-between items-start w-full",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full border ${A} uppercase tracking-wide`,children:P}),I.frequency==="monthly"&&p.jsx("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded-full bg-purple-50 text-purple-600 border border-purple-100 uppercase tracking-wide",children:"Mensal"})]}),p.jsx("p",{className:`font-bold text-base ${T==="overdue"?"text-red-600":"text-gray-800"}`,children:I.title}),p.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1 mt-1",children:[p.jsx("span",{className:"material-symbols-outlined text-sm",children:"event"}),new Date(I.date+"T00:00:00").toLocaleDateString("pt-BR",{day:"2-digit",month:"short"}),p.jsx("span",{className:"mx-1",children:""}),p.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),I.time]})]}),v===I.id?p.jsxs("div",{className:"flex flex-col gap-2 ml-2 animate-fade-in",children:[p.jsx("button",{onClick:()=>{r(I.id),w(null),E("Lembrete concludo!","success")},className:"bg-green-500 text-white p-2 rounded-lg shadow-sm hover:bg-green-600 transition-colors",title:"Confirmar Concluso",children:p.jsx(pm,{className:"text-lg"})}),p.jsx("button",{onClick:()=>w(null),className:"bg-gray-200 text-gray-600 p-2 rounded-lg hover:bg-gray-300 transition-colors",title:"Cancelar",children:p.jsx(Sn,{className:"text-lg"})})]}):p.jsx("button",{onClick:()=>w(I.id),className:"text-gray-300 hover:text-green-600 p-2 rounded-xl hover:bg-green-50 transition-all ml-2",title:"Concluir Lembrete",children:p.jsx(pm,{className:"text-2xl"})})]})},I.id)})})})]})})},f8=t=>typeof t!="number"||isNaN(t)?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),h8=({isOpen:t,onClose:e,onSaveGoal:n,goalToEdit:r})=>{const[s,i]=M.useState({name:"",category:"",targetAmount:0,startDate:new Date().toISOString().split("T")[0],endDate:""}),[o,a]=M.useState(null),{showToast:l}=_i(),u=M.useCallback(()=>{const w=new Date,C=new Date(w.getFullYear(),w.getMonth()+1,0).toISOString().split("T")[0];i({name:"",category:"",targetAmount:0,startDate:new Date(w.getFullYear(),w.getMonth(),1).toISOString().split("T")[0],endDate:C}),a(null)},[]);M.useEffect(()=>{r?i({name:r.name,category:r.category,targetAmount:r.targetAmount,startDate:r.startDate,endDate:r.endDate}):u()},[r,t,u]);const d=()=>{u(),e()},m=w=>{const C=w.target.value.replace(/\D/g,"");if(C===""){i(E=>({...E,targetAmount:0}));return}const R=parseInt(C,10)/100;i(E=>({...E,targetAmount:R}))},g=w=>{if(w.preventDefault(),!s.name.trim()||!s.category||s.targetAmount<=0||!s.startDate||!s.endDate){const R="Por favor, preencha todos os campos e certifique-se que o valor da meta  maior que zero.";a(R),l(R,"error");return}if(new Date(s.startDate)>new Date(s.endDate)){const R="A data de incio no pode ser posterior  data de trmino.";a(R),l(R,"error");return}a(null);const C={name:s.name,category:s.category,targetAmount:s.targetAmount,startDate:s.startDate,endDate:s.endDate};n(C,r==null?void 0:r.id),d()};if(!t)return null;const v="w-full p-3.5 bg-white text-gray-800 rounded-xl border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400";return p.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"goal-modal-title",children:p.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md flex flex-col overflow-hidden",children:[p.jsxs("div",{className:"p-5 border-b border-gray-100 flex justify-between items-center bg-white",children:[p.jsx("h2",{id:"goal-modal-title",className:"text-xl font-bold text-gray-800",children:r?"Editar Meta":"Adicionar Meta"}),p.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 p-1.5 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Fechar",children:p.jsx(Sn,{className:"text-2xl"})})]}),p.jsxs("form",{onSubmit:g,className:"flex-1 flex flex-col",children:[p.jsxs("div",{className:"p-6 space-y-5",children:[o&&p.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-600 p-3 rounded-xl text-sm flex items-center gap-2",role:"alert",children:[p.jsx("span",{className:"material-symbols-outlined text-lg",children:"error"}),o]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"goalName",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Nome da Meta"}),p.jsx("input",{id:"goalName",type:"text",placeholder:"Ex: Gastos com Lazer",value:s.name,onChange:w=>i({...s,name:w.target.value}),className:v,required:!0})]}),p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"goalCategory",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Categoria"}),p.jsxs("select",{id:"goalCategory",value:s.category,onChange:w=>i({...s,category:w.target.value}),className:`${v} appearance-none`,required:!0,children:[p.jsx("option",{value:"",disabled:!0,children:"Selecione a Categoria"}),Object.keys(JN).map(w=>p.jsx("option",{value:w,children:w},w))]}),p.jsx("span",{className:"absolute right-4 bottom-3.5 pointer-events-none text-gray-400 material-symbols-outlined text-lg",children:"expand_more"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"goalAmount",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Valor Mximo (Meta)"}),p.jsx("input",{id:"goalAmount",type:"text",inputMode:"decimal",placeholder:"R$ 0,00",value:f8(s.targetAmount),onChange:m,className:v,required:!0})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"goalStartDate",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Incio"}),p.jsx("input",{id:"goalStartDate",type:"date",value:s.startDate,onChange:w=>i({...s,startDate:w.target.value}),className:v,required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"goalEndDate",className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Trmino"}),p.jsx("input",{id:"goalEndDate",type:"date",value:s.endDate,onChange:w=>i({...s,endDate:w.target.value}),className:v,required:!0})]})]})]}),p.jsx("div",{className:"p-5 border-t border-gray-100 bg-gray-50 mt-auto",children:p.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-4 px-4 rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-200 transform active:scale-[0.98]",children:r?"Salvar Alteraes":"Salvar Meta"})})]})]})})},qE=t=>typeof t!="number"||isNaN(t)?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),p8=({isOpen:t,onClose:e,onSave:n,goalToEdit:r})=>{const[s,i]=M.useState({name:"",targetAmount:0,currentAmount:0,deadline:"",color:"blue"}),[o,a]=M.useState(null),{showToast:l}=_i();M.useEffect(()=>{i(r?{name:r.name,targetAmount:r.targetAmount,currentAmount:r.currentAmount,deadline:r.deadline,color:r.color||"blue"}:{name:"",targetAmount:0,currentAmount:0,deadline:"",color:"blue"}),a(null)},[r,t]);const u=(g,v)=>{const w=v.replace(/\D/g,""),C=w?parseInt(w,10)/100:0;i(R=>({...R,[g]:C}))},d=g=>{if(g.preventDefault(),!s.name.trim()||s.targetAmount<=0){a("Defina um nome e um valor alvo maior que zero.");return}n(s,r==null?void 0:r.id),e()};if(!t)return null;const m="w-full p-3.5 bg-white text-gray-800 rounded-xl border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 placeholder-gray-400";return p.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm flex justify-center items-center z-50 p-4 animate-fade-in",children:p.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md flex flex-col overflow-hidden",children:[p.jsxs("div",{className:"p-5 border-b border-gray-100 flex justify-between items-center bg-white",children:[p.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[p.jsx(D4,{className:"text-yellow-500"}),r?"Editar Meta de Economia":"Nova Meta de Economia"]}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors",children:p.jsx(Sn,{className:"text-2xl"})})]}),p.jsxs("form",{onSubmit:d,className:"flex-1 flex flex-col",children:[p.jsxs("div",{className:"p-6 space-y-5",children:[o&&p.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-xl text-sm",children:o}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Objetivo (Ex: Viagem, Carro)"}),p.jsx("input",{type:"text",value:s.name,onChange:g=>i({...s,name:g.target.value}),className:m,placeholder:"Qual o seu sonho?",required:!0})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Valor Alvo"}),p.jsx("input",{type:"text",value:qE(s.targetAmount),onChange:g=>u("targetAmount",g.target.value),className:m,required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"J Guardado"}),p.jsx("input",{type:"text",value:qE(s.currentAmount),onChange:g=>u("currentAmount",g.target.value),className:`${m} text-green-600 font-bold`})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 block ml-1",children:"Data Limite (Opcional)"}),p.jsx("input",{type:"date",value:s.deadline,onChange:g=>i({...s,deadline:g.target.value}),className:m})]})]}),p.jsx("div",{className:"p-5 border-t border-gray-100 bg-gray-50 mt-auto",children:p.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white font-bold py-4 px-4 rounded-xl hover:bg-green-700 transition-all shadow-lg shadow-green-200 transform active:scale-[0.98]",children:r?"Atualizar Meta":"Criar Meta"})})]})]})})},m8=({isOpen:t,onClose:e})=>{if(!t)return null;const n="meugasto-e6f64",r=`https://console.cloud.google.com/apis/api/generativelanguage.googleapis.com/overview?project=${n}`,s=`https://console.cloud.google.com/apis/credentials?project=${n}`;return p.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-[60] p-4",role:"dialog","aria-modal":"true","aria-labelledby":"api-error-modal-title",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md flex flex-col overflow-hidden",children:[p.jsxs("div",{className:"bg-red-50 p-4 border-b border-red-100 flex justify-between items-center",children:[p.jsxs("h2",{id:"api-error-modal-title",className:"text-lg font-bold text-red-800 flex items-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined",children:"lock_person"}),"Permisso Negada"]}),p.jsx("button",{onClick:e,className:"text-red-400 hover:text-red-600 transition-colors","aria-label":"Fechar",children:p.jsx(Sn,{className:"text-2xl"})})]}),p.jsxs("div",{className:"p-6 space-y-4 text-gray-700",children:[p.jsxs("div",{className:"flex flex-col items-center mb-4",children:[p.jsx(pf,{className:"text-blue-500 text-5xl mb-3"}),p.jsx("p",{className:"text-center font-semibold text-lg text-gray-800",children:"A Inteligncia Artificial est indisponvel."}),p.jsx("p",{className:"text-center text-sm mt-2 text-gray-600",children:'Para ler seus recibos e extratos, o Google exige que voc ative a "Generative Language API" no seu projeto. Isso  uma trava de segurana padro.'})]}),p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[p.jsxs("h3",{className:"font-bold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-base",children:"info"}),"Como resolver (leva 30 segundos):"]}),p.jsxs("ol",{className:"list-decimal list-inside text-sm space-y-2",children:[p.jsxs("li",{children:[p.jsx("span",{className:"font-semibold",children:"Ativar a API:"}),' Clique no boto abaixo. Na pgina do Google Cloud, clique em "ENABLE" (ATIVAR).']}),p.jsxs("li",{children:[p.jsx("span",{className:"font-semibold",children:"Verificar sua Chave de API:"}),' Aps ativar, v para a aba "Credenciais" (no menu  esquerda). Clique no Lpis (editar) da sua "Browser key".']}),p.jsxs("li",{children:[p.jsx("span",{className:"font-semibold",children:"Permisso da Chave:"}),' Em "Restries de API", garanta que a "Generative Language API" esteja marcada (ou mude para "No restringir chave" temporariamente). Salve as alteraes.']}),p.jsxs("li",{children:[p.jsx("span",{className:"font-semibold",children:"Aguarde:"})," Leva 1-2 minutos para as alteraes se propagarem. Tente escanear novamente aps esse tempo."]})]})]}),p.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-2 p-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors shadow-md","aria-label":"Abrir Google Cloud Console para ativar a API",children:[p.jsx("span",{className:"material-symbols-outlined",children:"launch"}),"Ativar API Agora"]}),p.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-2 p-3 bg-gray-100 text-gray-700 font-bold rounded-lg hover:bg-gray-200 transition-colors text-sm","aria-label":"Abrir Google Cloud Console para verificar credenciais",children:[p.jsx("span",{className:"material-symbols-outlined",children:"key"}),"Verificar Credenciais da Chave"]})]}),p.jsx("div",{className:"p-4 border-t mt-auto text-center",children:p.jsx("button",{onClick:e,className:"text-sm text-gray-600 hover:text-blue-600 font-medium","aria-label":"J ativei, fechar janela",children:"J ativei, fechar janela"})})]})})},g8=({userProfile:t,currentView:e,onSetView:n,onLogout:r})=>{const s=()=>{switch(e){case"dashboard":return"Dashboard";case"entries":return"Lanamentos";case"reports":return"Relatrios";case"profile":return"Perfil";case"goals":return"Planejamento";case"admin":return"Administrao";default:return"MeuGasto"}};return p.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white shadow-sm p-4 z-40 border-b border-gray-200",children:p.jsxs("div",{className:"flex justify-between items-center max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsx("div",{className:"flex items-center gap-4",children:p.jsxs("button",{onClick:()=>n("dashboard"),className:"text-2xl font-bold text-gray-800 mr-4 flex-shrink-0 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded flex items-center gap-2","aria-label":"MeuGasto - Voltar para o Dashboard",children:[p.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 text-white w-10 h-10 rounded-lg shadow-md shadow-blue-600/20 shrink-0 aspect-square flex items-center justify-center",children:p.jsx(fd,{className:"text-xl"})}),p.jsx("span",{className:"hidden sm:inline",children:"MeuGasto"})]})}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("h1",{className:"hidden md:block text-xl font-bold text-gray-800 whitespace-nowrap",children:s()}),p.jsx("button",{onClick:()=>n("profile"),className:"w-10 h-10 rounded-full overflow-hidden border-2 border-gray-200 hover:border-blue-500 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex-shrink-0 aspect-square","aria-label":"Ver perfil",children:p.jsx("img",{src:t.profileImage,alt:"Foto de Perfil",className:"w-full h-full object-cover"})}),p.jsxs("button",{onClick:r,className:"hidden lg:flex items-center text-red-600 hover:text-red-700 text-sm font-medium px-3 py-1 rounded-lg hover:bg-red-50 transition-colors","aria-label":"Sair da conta",children:[p.jsx(N4,{className:"text-xl mr-1"}),"Sair"]})]})]})})},Xu=({icon:t,label:e,isActive:n,onClick:r})=>{const s=i=>{switch(t){case"space_dashboard":return p.jsx(E4,{...i});case"receipt_long":return p.jsx(By,{...i});case"bar_chart":return p.jsx(I4,{...i});case"track_changes":return p.jsx(QN,{...i});case"account_circle":return p.jsx(S4,{...i});default:return p.jsx("span",{className:"material-symbols-outlined text-2xl",children:t})}};return p.jsxs("button",{onClick:r,className:`flex flex-col items-center justify-center flex-1 py-2 text-sm transition-colors duration-200 ${n?"text-blue-600 font-semibold":"text-gray-500 hover:text-gray-700"}`,"aria-current":n?"page":void 0,"aria-label":e,children:[p.jsx(s,{className:"text-2xl mb-1"}),p.jsx("span",{className:"text-xs",children:e})]})},Va=(t,e,n=[])=>{const[r,s]=M.useState([]),[i,o]=M.useState(!0),[a,l]=M.useState(null),u=M.useCallback(()=>!e||!t?null:LU(zt,"users",e,t),[e,t]);M.useEffect(()=>{const v=u();if(!v){o(!1);return}o(!0),l(null);const w=WU(v,...n),C=Vy(w,R=>{const E=[];R.forEach(x=>{E.push({id:x.id,...x.data()})}),s(E),o(!1)},R=>{console.error(`Firestore Error (${t}):`,R.code,R.message),l(R),o(!1)});return()=>C()},[u,t,e,n]);const d=M.useCallback(async v=>{const w=u();if(!w)return null;try{return(await XU(w,v)).id}catch(C){return console.error(`Error adding to ${t}:`,C),null}},[u,t]),m=M.useCallback(async(v,w)=>{const C=u();if(!C)return!1;try{const R=$t(C,v);return await Ya(R,w),!0}catch(R){return console.error(`Error updating ${t}:`,R),!1}},[u,t]),g=M.useCallback(async v=>{const w=u();if(!w)return!1;try{const C=$t(w,v);return await QU(C),!0}catch(C){return console.error(`Error deleting from ${t}:`,C),!1}},[u,t]);return{data:r,loading:i,error:a,addDocument:d,updateDocument:m,deleteDocument:g}},y8=(t,e=null)=>{const[n,r]=M.useState(e),[s,i]=M.useState(!0),[o,a]=M.useState(null),l=M.useCallback(()=>t?$t(zt,t):(console.warn("FirestoreDocument: docPath not provided."),null),[t]);M.useEffect(()=>{const m=l();if(!m){i(!1);return}i(!0),a(null);const g=Vy(m,v=>{var w;if(v.exists()){const C=v.data();t.startsWith("users/")&&console.log("useFirestoreDocument Debug: Profile Image from Firestore:",((w=C.profileImage)==null?void 0:w.substring(0,50))+"..."),r(C)}else r(null);i(!1)},v=>{console.error(`Error fetching document ${t}:`,v),a("Failed to load data."),i(!1)});return()=>g()},[l,e,t]);const u=M.useCallback(async m=>{const g=l();if(!g)return a("Document reference not available for update."),!1;try{return await Ya(g,m),!0}catch(v){return console.error(`Error updating document ${t}:`,v),a("Failed to update document."),!1}},[l,t]),d=M.useCallback(async m=>{const g=l();if(!g)return a("Document reference not available for set."),!1;try{return await Po(g,m,{merge:!0}),!0}catch(v){return console.error(`Error setting document ${t}:`,v),a("Failed to set document."),!1}},[l,t]);return{data:n,loading:s,error:o,updateDocument:u,setDocument:d}},$h=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},fW=(t,e,n,r)=>{let s,i;const o=new Date,a=new Date(o.getFullYear(),o.getMonth(),o.getDate());switch(e){case"this-month":s=new Date(o.getFullYear(),o.getMonth(),1),i=new Date(o.getFullYear(),o.getMonth()+1,0);break;case"last-month":s=new Date(o.getFullYear(),o.getMonth()-1,1),i=new Date(o.getFullYear(),o.getMonth(),0);break;case"last-7-days":s=new Date(a),s.setDate(a.getDate()-6),i=a;break;case"custom":s=n?new Date(n+"T00:00:00"):new Date(0),i=r?new Date(r+"T23:59:59"):new Date;break;default:s=new Date(o.getFullYear(),o.getMonth(),1),i=new Date(o.getFullYear(),o.getMonth()+1,0);break}return t.filter(l=>{const u=new Date(l.purchaseDate+"T00:00:00");return u>=s&&u<=i})},BE=M.lazy(()=>Ho(()=>import("./Dashboard-CGAQzjcd.js"),__vite__mapDeps([0,1])).then(t=>({default:t.Dashboard}))),v8=M.lazy(()=>Ho(()=>import("./Entries-CYQEQ8AR.js"),[]).then(t=>({default:t.Entries}))),_8=M.lazy(()=>Ho(()=>import("./Reports-q2ZPoiVB.js"),__vite__mapDeps([2,1])).then(t=>({default:t.Reports}))),x8=M.lazy(()=>Ho(()=>import("./Goals-ddZGTEY7.js"),[]).then(t=>({default:t.Goals}))),w8=M.lazy(()=>Ho(()=>import("./Profile-DsVRqPRb.js"),[]).then(t=>({default:t.Profile}))),T8=M.lazy(()=>Ho(()=>import("./AdminPanel-k45jHZDj.js"),[]).then(t=>({default:t.AdminPanel}))),E8=({currentUser:t,onOpenGlobalPrivacyPolicy:e,onOpenGlobalTermsOfService:n,onOpenSupport:r,expirationWarning:s,onViewChange:i})=>{const[o,a]=M.useState("dashboard"),[l,u]=M.useState(!1),[d,m]=M.useState(null),[g,v]=M.useState(null),[w,C]=M.useState(!1),[R,E]=M.useState(null),[x,S]=M.useState(!1),[V,L]=M.useState(null),[F,I]=M.useState(!1),[T,A]=M.useState(!1),[P,k]=M.useState(!1),{showToast:D}=_i();M.useEffect(()=>{i&&i(o)},[o,i]);const b=M.useMemo(()=>[ka("purchaseDate","desc")],[]),Ie=M.useMemo(()=>{const ie=new Date().toISOString().split("T")[0];return[KU("endDate",">=",ie),ka("endDate","asc")]},[]),Me=M.useMemo(()=>[ka("date","asc")],[]),te=M.useMemo(()=>[ka("targetAmount","desc")],[]),{data:W,loading:O,error:z,addDocument:B,updateDocument:Y,deleteDocument:ee}=Va("expenses",t.uid,b),{data:re,loading:fe,error:je,addDocument:Ge,updateDocument:ve,deleteDocument:cn}=Va("goals",t.uid,Ie),{data:Ur,addDocument:Cn,updateDocument:kt,deleteDocument:lr}=Va("savings_goals",t.uid,te),{data:Dt,error:$n,addDocument:An,deleteDocument:Ns}=Va("reminders",t.uid,Me),Ps=`users/${t.uid}`,{data:Xt,loading:ur}=y8(Ps);M.useEffect(()=>{if(!Dt||Dt.length===0)return;const oe=setInterval(()=>{if(Notification.permission!=="granted")return;const _e=new Date,Zt=_e.getHours()*60+_e.getMinutes(),qt=_e.toISOString().split("T")[0];Dt.forEach(dn=>{const[Hn,Xo,bs]=dn.date.split("-").map(Number),[du,ks]=dn.time.split(":").map(Number);let Zo=!1;if(dn.date===qt&&du*60+ks===Zt&&(Zo=!0),Zo){const Je=`notified_${dn.id}_${qt}_${dn.time}`;localStorage.getItem(Je)||(new Notification(`Lembrete: ${dn.title}`,{body:"Est na hora! Toque para ver.",icon:"/favicon.ico"}),localStorage.setItem(Je,"true"),setTimeout(()=>localStorage.removeItem(Je),61e3))}})},1e4);return()=>clearInterval(oe)},[Dt]),M.useEffect(()=>{const ie=z||je||$n;ie&&D(`Erro de conexo: ${ie.message}`,"error")},[z,je,$n,D]),M.useEffect(()=>{(async()=>{if(!ur&&!Xt){const oe=$t(zt,"users",t.uid);if(!(await cf(oe)).exists()){const Zt={uid:t.uid,name:t.name,email:t.email,phone:t.phone||"",profileImage:Za,reminderSettings:Xa,role:"user",status:"active",createdAt:new Date().toISOString(),subscriptionExpiresAt:null,xp:0,currentStreak:1,lastInteractionDate:$h()};try{await Po(oe,Zt)}catch(qt){console.error("Falha ao criar perfil:",qt)}}}else if(Xt){const oe=$h(),_e=Xt.lastInteractionDate;if(_e!==oe){const Zt=$t(zt,"users",t.uid),qt=new Date;qt.setDate(qt.getDate()-1);const dn=qt.getFullYear(),Hn=String(qt.getMonth()+1).padStart(2,"0"),Xo=String(qt.getDate()).padStart(2,"0"),bs=`${dn}-${Hn}-${Xo}`;_e===bs?await Ya(Zt,{currentStreak:um(1),lastInteractionDate:oe}):await Ya(Zt,{currentStreak:1,lastInteractionDate:oe})}}})()},[t,ur,Xt]);const zn=M.useMemo(()=>{var oe;const ie={uid:t.uid,name:t.name||((oe=t.email)==null?void 0:oe.split("@")[0])||"Usurio",email:t.email||"",phone:t.phone||"",profileImage:Za,reminderSettings:Xa,role:"user",status:"active",xp:0,currentStreak:0};return ur||!Xt?ie:{...ie,...Xt,profileImage:Xt.profileImage||Za,reminderSettings:Xt.reminderSettings||Xa,xp:Xt.xp||0,currentStreak:Xt.currentStreak||0}},[t,Xt,ur]),Nn=M.useCallback(async(ie,oe)=>{if(t.uid)try{const _e=$t(zt,"users",t.uid);await Ya(_e,{xp:um(ie),lastInteractionDate:$h()}),D(`+${ie} XP: ${oe}`,"success")}catch(_e){console.error("Error awarding XP:",_e)}},[t.uid,D]),Yo=M.useCallback(async()=>{const{success:ie,message:oe}=await hm();D(oe,ie?"success":"error")},[D]),Qo=M.useCallback(async(ie,oe)=>{if(oe){const _e=await Y(oe,ie);D(_e?"Despesa atualizada com sucesso!":"Erro ao atualizar despesa.",_e?"success":"error")}else await B(ie)?(D("Despesa adicionada com sucesso!","success"),Nn(20,"Lanamento adicionado")):D("Erro ao salvar a despesa.","error");m(null),v(null),u(!1)},[B,Y,D,Nn]),wi=M.useCallback(async ie=>{const oe=await ee(ie);D(oe?"Despesa excluda com sucesso!":"Erro ao excluir despesa.",oe?"success":"error")},[ee,D]),au=M.useCallback(async(ie,oe)=>{if(oe){const _e=await ve(oe,ie);D(_e?"Oramento atualizado!":"Erro ao atualizar oramento.",_e?"success":"error")}else{const _e=await Ge(ie);D(_e?"Oramento criado!":"Erro ao criar oramento.",_e?"success":"error"),Nn(30,"Oramento definido")}E(null),C(!1)},[Ge,ve,D,Nn]),tt=M.useCallback(async ie=>{const oe=await cn(ie);D(oe?"Oramento excludo!":"Erro ao excluir.",oe?"success":"error")},[cn,D]),ut=M.useCallback(async(ie,oe)=>{if(oe){const _e=await kt(oe,ie);D(_e?"Meta atualizada!":"Erro ao atualizar meta.",_e?"success":"error")}else{const _e=await Cn(ie);D(_e?"Meta de economia criada!":"Erro ao criar meta.",_e?"success":"error"),Nn(50,"Sonho criado")}L(null),S(!1)},[Cn,kt,D,Nn]),Rs=M.useCallback(async ie=>{const oe=await lr(ie);D(oe?"Meta excluda.":"Erro ao excluir meta.",oe?"success":"error")},[lr,D]),lu=M.useCallback(async ie=>{const oe=await An(ie);D(oe?"Lembrete adicionado!":"Erro ao adicionar lembrete.",oe?"success":"error"),oe&&Nn(10,"Lembrete criado")},[An,D,Nn]),uu=M.useCallback(async ie=>{const oe=await Ns(ie);D(oe?"Lembrete concludo/excludo!":"Erro ao excluir lembrete.",oe?"success":"error")},[Ns,D]),cu=M.useCallback(async ie=>{const oe=$t(zt,"users",t.uid);try{return await Po(oe,{profileImage:ie},{merge:!0}),!0}catch{return!1}},[t.uid]),Or=M.useCallback(()=>I(!0),[]),Ti=M.useCallback(()=>A(!0),[]),Ei=M.useCallback(()=>{k(!0)},[]),Ot=M.useMemo(()=>{if(!t.createdAt)return!1;const ie=new Date(t.createdAt),_e=Math.abs(new Date().getTime()-ie.getTime());return Math.ceil(_e/(1e3*60*60*24))<30},[t.createdAt]),If=M.useCallback(()=>p.jsx(M.Suspense,{fallback:p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-180px)] text-center text-gray-500",children:[p.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mb-4"}),p.jsx("p",{children:"Carregando..."})]}),children:(()=>{switch(o){case"dashboard":return p.jsx(BE,{expenses:W,isLoading:O,userProfile:zn,onManageReminders:Ti,reminders:Dt,onViewAll:()=>a("entries"),goals:re});case"entries":return p.jsx(v8,{expenses:W,onDeleteExpense:wi,onEditExpense:ie=>{m(ie),u(!0)},isLoading:O,onAddExpense:async(ie,oe)=>{oe?(v(ie),u(!0)):await B(ie)},onAPISetupError:Ei});case"reports":return p.jsx(_8,{expenses:W,isLoadingExpenses:O});case"goals":return p.jsx(x8,{goals:re,savingsGoals:Ur,expenses:W,onOpenGoalModal:()=>C(!0),onOpenSavingsModal:()=>S(!0),onEditGoal:ie=>{E(ie),C(!0)},onEditSavingsGoal:ie=>{L(ie),S(!0)},onDeleteGoal:tt,onDeleteSavingsGoal:Rs,isLoading:fe});case"profile":return p.jsx(w8,{userProfile:zn,handleLogout:Yo,onManageSubscription:Or,onUpdateProfileImage:cu,isLoading:ur,onOpenPrivacyPolicy:e,onOpenTermsOfService:n,onOpenSupport:r});case"admin":return p.jsx(T8,{currentUser:zn});default:return p.jsx(BE,{expenses:W,isLoading:O,userProfile:zn,onManageReminders:Ti,reminders:Dt,onViewAll:()=>a("entries"),goals:re})}})()}),[o,W,re,Ur,Dt,Yo,wi,tt,Rs,Or,Ti,cu,zn,O,fe,ur,e,n,r,Ei,B,!0]);return p.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[p.jsx(g8,{userProfile:zn,currentView:o,onSetView:a,onLogout:Yo}),(s==null?void 0:s.show)&&p.jsx("div",{className:"fixed z-30 top-[80px] left-0 right-0 flex justify-center px-4 animate-in fade-in slide-in-from-top-2 duration-300",children:p.jsxs("div",{className:`backdrop-blur-md border rounded-2xl shadow-xl p-3 w-full max-w-2xl flex items-center justify-between gap-3 ring-1 ring-black/5 ${Ot?"bg-indigo-50/95 border-indigo-200 shadow-indigo-500/10":"bg-white/95 border-orange-100 shadow-orange-500/10"}`,children:[p.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[p.jsx("div",{className:`p-2.5 rounded-xl shrink-0 flex items-center justify-center ${Ot?"bg-indigo-100":"bg-orange-50"}`,children:p.jsx("span",{className:`material-symbols-outlined text-xl ${Ot?"text-indigo-600":"text-orange-500"}`,children:Ot?"hourglass_top":"av_timer"})}),p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsx("span",{className:`font-bold text-sm truncate ${Ot?"text-indigo-900":"text-gray-800"}`,children:Ot?"Teste Grtis Acabando":"Renovao Necessria"}),p.jsxs("span",{className:"text-gray-500 text-xs truncate",children:[Ot?"Restam":"Vence em"," ",p.jsxs("span",{className:`font-bold ${Ot?"text-indigo-600":"text-orange-600"}`,children:[s.days," dia(s)"]}),"."]})]})]}),p.jsx("button",{onClick:()=>I(!0),className:`text-xs font-bold px-5 py-2.5 rounded-xl shadow-md hover:shadow-lg transform active:scale-95 transition-all whitespace-nowrap text-white ${Ot?"bg-gradient-to-r from-indigo-600 to-purple-600":"bg-gradient-to-r from-orange-500 to-amber-500"}`,children:Ot?"Garantir Acesso":"Renovar Agora"})]})}),p.jsx("main",{className:`flex-1 overflow-y-auto pb-20 view-transition max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 ${s!=null&&s.show?"pt-36":"pt-28"}`,children:If()}),o!=="admin"&&p.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-40",children:p.jsxs("div",{className:"grid grid-cols-5 h-16 max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8",children:[p.jsx(Xu,{icon:"space_dashboard",label:"Dashboard",isActive:o==="dashboard",onClick:()=>a("dashboard")}),p.jsx(Xu,{icon:"receipt_long",label:"Lanamentos",isActive:o==="entries",onClick:()=>a("entries")}),p.jsx("div",{className:"relative flex justify-center items-center z-50",children:p.jsx("button",{onClick:()=>{v(null),m(null),u(!0)},className:"absolute -top-8 w-16 h-16 bg-blue-600 text-white rounded-full shadow-xl shadow-blue-600/40 flex items-center justify-center hover:bg-blue-700 transition-all transform hover:scale-105 active:scale-95 focus:outline-none border-4 border-gray-50",children:p.jsx(jy,{className:"text-3xl"})})}),p.jsx(Xu,{icon:"track_changes",label:"Planejamento",isActive:o==="goals",onClick:()=>a("goals")}),p.jsx(Xu,{icon:"bar_chart",label:"Relatrios",isActive:o==="reports",onClick:()=>a("reports")})]})}),p.jsx(u8,{isOpen:l,onClose:()=>{u(!1),m(null)},onSaveExpense:Qo,expenseToEdit:d,initialData:g,onAPISetupError:Ei}),p.jsx(h8,{isOpen:w,onClose:()=>{C(!1),E(null)},onSaveGoal:au,goalToEdit:R}),p.jsx(p8,{isOpen:x,onClose:()=>{S(!1),L(null)},onSave:ut,goalToEdit:V}),p.jsx(c8,{isOpen:F,onClose:()=>I(!1)}),p.jsx(d8,{isOpen:T,onClose:()=>A(!1),onAddReminder:lu,onDeleteReminder:uu,reminders:Dt}),p.jsx(m8,{isOpen:P,onClose:()=>k(!1)})]})},I8=({onContinue:t})=>p.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[p.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none",children:[p.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),p.jsx("div",{className:"absolute top-10 right-10 w-64 h-64 bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),p.jsx("div",{className:"absolute bottom-20 left-1/2 w-64 h-64 bg-pink-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"})]}),p.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-3xl shadow-xl max-w-lg w-full text-center relative z-10 border border-gray-100",children:[p.jsx("div",{className:"flex justify-center mb-6",children:p.jsx("div",{className:"bg-green-100 p-4 rounded-full shrink-0 aspect-square flex items-center justify-center",children:p.jsx(pm,{className:"text-6xl text-green-500"})})}),p.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:"Obrigado!"}),p.jsx("h2",{className:"text-xl font-semibold text-blue-600 mb-6",children:"Sua assinatura foi confirmada."}),p.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"Voc acaba de dar um grande passo para organizar sua vida financeira. Seus recursos Premium j esto liberados. Faa login para acessar seu painel."}),p.jsx("div",{className:"space-y-4",children:p.jsxs("button",{onClick:t,className:"w-full bg-blue-600 text-white font-bold py-4 px-6 rounded-xl hover:bg-blue-700 transition-all shadow-lg hover:shadow-blue-200 transform hover:-translate-y-1 flex items-center justify-center gap-2",children:["Acessar minha conta",p.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})})]}),p.jsxs("div",{className:"mt-8 flex items-center gap-2 opacity-60",children:[p.jsx(fd,{className:"text-gray-400"}),p.jsx("span",{className:"font-bold text-gray-500",children:"MeuGasto"})]})]}),S8=({isOpen:t,onClose:e})=>t?p.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-25 backdrop-blur-sm flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"privacy-policy-modal-title",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[p.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[p.jsx("h2",{id:"privacy-policy-modal-title",className:"text-xl font-medium text-gray-800",children:"Poltica de Privacidade"}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600","aria-label":"Fechar",children:p.jsx(Sn,{className:"text-2xl"})})]}),p.jsxs("div",{className:"p-6 overflow-y-auto text-gray-700 text-sm leading-relaxed",children:[p.jsx("p",{className:"mb-4",children:"A sua privacidade  de extrema importncia para ns do MeuGasto. Esta poltica descreve como coletamos, usamos e protegemos suas informaes pessoais ao utilizar nosso aplicativo."}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"1. Coleta de Informaes"}),p.jsx("p",{className:"mb-4",children:"Coletamos informaes que voc nos fornece diretamente ao criar uma conta, como nome, e-mail e nmero de telefone. Tambm coletamos dados relacionados s suas despesas, categorias e oramentos inseridos no aplicativo, incluindo informaes extradas de recibos e extratos bancrios processados por inteligncia artificial."}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"2. Uso das Informaes"}),p.jsx("p",{className:"mb-4",children:"Utilizamos suas informaes para fornecer, manter e melhorar nossos servios, personalizar sua experincia, monitorar e analisar tendncias, enviar notificaes relacionadas ao servio e cumprir obrigaes legais. As informaes de despesas so usadas para gerar relatrios, categorizaes e insights financeiros personalizados para voc."}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"3. Compartilhamento de Informaes"}),p.jsx("p",{className:"mb-4",children:"No compartilhamos suas informaes pessoais com terceiros, exceto quando necessrio para operar o servio (por exemplo, com provedores de nuvem para armazenamento de dados), para cumprir a lei ou com seu consentimento. Dados anonimizados e agregados podem ser usados para anlise e melhoria do produto."}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"4. Segurana dos Dados"}),p.jsx("p",{className:"mb-4",children:"Empregamos medidas de segurana robustas para proteger suas informaes contra acesso, alterao, divulgao ou destruio no autorizados. Isso inclui criptografia, firewalls e controles de acesso rigorosos."}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"5. Seus Direitos"}),p.jsx("p",{className:"mb-4",children:"Voc tem o direito de acessar, corrigir, atualizar ou solicitar a excluso de suas informaes pessoais. Para exercer esses direitos, entre em contato conosco atravs do suporte no aplicativo."}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"6. Alteraes na Poltica"}),p.jsx("p",{children:"Podemos atualizar esta poltica de privacidade periodicamente. Notificaremos voc sobre quaisquer alteraes significativas atravs do aplicativo ou por e-mail."}),p.jsx("p",{className:"mt-6 text-xs text-gray-500",children:"ltima atualizao: 10 de Julho de 2024."})]}),p.jsx("div",{className:"p-4 border-t mt-auto",children:p.jsx("button",{onClick:e,className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Entendi"})})]})}):null,C8=({isOpen:t,onClose:e})=>t?p.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-25 backdrop-blur-sm flex justify-center items-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"terms-of-service-modal-title",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[p.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[p.jsx("h2",{id:"terms-of-service-modal-title",className:"text-xl font-medium text-gray-800",children:"Termos de Servio"}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600","aria-label":"Fechar",children:p.jsx(Sn,{className:"text-2xl"})})]}),p.jsxs("div",{className:"p-6 overflow-y-auto text-gray-700 text-sm leading-relaxed",children:[p.jsx("p",{className:"mb-4",children:"Bem-vindo ao MeuGasto! Ao acessar ou usar nosso aplicativo, voc concorda em cumprir e estar vinculado aos seguintes termos e condies de servio."}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"1. Aceitao dos Termos"}),p.jsx("p",{className:"mb-4",children:"Ao utilizar o MeuGasto, voc reconhece que leu, entendeu e concorda com estes Termos de Servio e nossa Poltica de Privacidade. Se voc no concordar com estes termos, no utilize o aplicativo."}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"2. Uso do Servio"}),p.jsx("p",{className:"mb-4",children:"O MeuGasto  fornecido para seu uso pessoal e no comercial, com o objetivo de auxiliar no controle de suas finanas. Voc concorda em no usar o aplicativo para fins ilegais ou no autorizados."}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"3. Sua Conta"}),p.jsx("p",{className:"mb-4",children:"Voc  responsvel por manter a confidencialidade de suas informaes de conta, incluindo sua senha, e por todas as atividades que ocorrem em sua conta. Voc concorda em nos notificar imediatamente sobre qualquer uso no autorizado de sua conta."}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"4. Contedo do Usurio"}),p.jsx("p",{className:"mb-4",children:"Voc  o nico responsvel por todas as informaes e dados (incluindo recibos e extratos) que voc carrega, publica ou exibe atravs do servio. Voc concede ao MeuGasto uma licena mundial, no exclusiva, livre de royalties para usar, reproduzir, adaptar e distribuir esse contedo apenas para operar e melhorar o servio."}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"5. Assinatura e Pagamento"}),p.jsx("p",{className:"mb-4",children:'Alguns recursos do MeuGasto podem exigir uma assinatura paga. Ao assinar, voc concorda em pagar as taxas aplicveis e quaisquer impostos. As assinaturas so cobradas automaticamente, a menos que voc as cancele antes da renovao. Consulte a pgina de "Assinatura Premium" no aplicativo para detalhes de planos e cancelamento.'}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"6. Limitao de Responsabilidade"}),p.jsx("p",{className:"mb-4",children:'O MeuGasto  fornecido "como est", sem garantias de qualquer tipo. No nos responsabilizamos por perdas diretas, indiretas, incidentais ou consequenciais decorrentes do uso ou da incapacidade de usar o servio.'}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"7. Alteraes nos Termos"}),p.jsx("p",{children:"Reservamo-nos o direito de modificar estes Termos a qualquer momento. Quaisquer alteraes sero publicadas no aplicativo. Seu uso continuado do servio aps tais alteraes constitui sua aceitao dos novos Termos."}),p.jsx("p",{className:"mt-6 text-xs text-gray-500",children:"ltima atualizao: 10 de Julho de 2024."})]}),p.jsx("div",{className:"p-4 border-t mt-auto",children:p.jsx("button",{onClick:e,className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Entendi"})})]})}):null,jE=()=>{const e=new Date().getHours();return e>=9&&e<18},A8=t=>{const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(n);r.setDate(r.getDate()-1);const s=new Date(t.getFullYear(),t.getMonth(),t.getDate());return s.getTime()===n.getTime()?"Hoje":s.getTime()===r.getTime()?"Ontem":t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})},zh="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",N8=({isOpen:t,onClose:e,currentUser:n})=>{const[r,s]=M.useState(""),[i,o]=M.useState(jE()),[a,l]=M.useState(""),[u,d]=M.useState(""),[m,g]=M.useState(""),[v,w]=M.useState(""),[C,R]=M.useState(!1),E=M.useRef(null),x=M.useRef(null),{showToast:S}=_i();M.useEffect(()=>{const te=setInterval(()=>{o(jE())},6e4);return()=>clearInterval(te)},[]),M.useEffect(()=>{x.current&&(x.current.style.height="auto",x.current.style.height=x.current.scrollHeight+"px")},[r]);const V=M.useMemo(()=>[ka("timestamp","asc")],[]),{data:L,loading:F,addDocument:I}=Va("support_messages",(n==null?void 0:n.uid)||"",V),T=()=>{E.current&&E.current.scrollIntoView({behavior:"smooth"})};if(M.useEffect(()=>{t&&setTimeout(T,300)},[t,L,C]),!t)return null;const A=async te=>{if(te.preventDefault(),!!r.trim()&&n)try{const W={text:r.trim(),sender:"user",timestamp:Bx(),read:!1};await I(W);const O=$t(zt,"tickets",n.uid),z=await cf(O),B={userId:n.uid,userName:n.name||"Usurio",userEmail:n.email||"",lastMessage:r.trim(),lastMessageSender:"user",updatedAt:Bx(),status:z.exists()&&z.data().status!=="resolved"?z.data().status:"open",unreadCount:um(1)};await Po(O,B,{merge:!0}),s(""),x.current&&(x.current.style.height="auto")}catch(W){console.error("Error sending message:",W),S("Erro ao enviar mensagem.","error")}},P=async te=>{if(te.preventDefault(),!a||!u||!m||!v){S("Por favor, preencha todos os campos.","error");return}R(!0),S("Mensagem enviada! Entraremos em contato.","success")},k=te=>{const W=te.target.value.replace(/\D/g,"").slice(0,11);let O=W;W.length>7?O=`(${W.slice(0,2)}) ${W.slice(2,7)}-${W.slice(7)}`:W.length>2&&(O=`(${W.slice(0,2)}) ${W.slice(2)}`),g(O)},D=()=>p.jsxs("div",{className:"p-6 flex flex-col h-full bg-white overflow-y-auto custom-scrollbar",children:[p.jsxs("div",{className:"mb-6 text-center",children:[p.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4 border-4 border-white shadow-lg overflow-hidden",children:p.jsx("img",{src:zh,alt:"Atendente",className:"w-full h-full object-cover"})}),p.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Fale com a gente"}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Preencha seus dados e responderemos o mais rpido possvel."})]}),p.jsxs("form",{onSubmit:P,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1.5",children:"Nome"}),p.jsx("input",{type:"text",className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"Seu nome",value:a,onChange:te=>l(te.target.value),required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1.5",children:"Email"}),p.jsx("input",{type:"email",className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"seu@email.com",value:u,onChange:te=>d(te.target.value),required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1.5",children:"WhatsApp / Celular"}),p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2 pointer-events-none z-10 border-r border-gray-300 pr-2",children:[p.jsx("img",{src:"https://flagcdn.com/w40/br.png",alt:"Brasil",className:"w-5 h-auto rounded-sm shadow-sm"}),p.jsx("span",{className:"text-gray-500 font-medium text-xs",children:"+55"})]}),p.jsx("input",{type:"tel",className:"w-full p-3 pl-[5.5rem] bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"(00) 00000-0000",value:m,onChange:k,required:!0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1.5",children:"Como podemos ajudar?"}),p.jsx("textarea",{className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all resize-none h-24",placeholder:"Descreva sua dvida...",value:v,onChange:te=>w(te.target.value),required:!0})]}),p.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-3.5 rounded-xl hover:bg-blue-700 transition-colors shadow-lg active:scale-95 mt-2",children:"Enviar Mensagem"})]})]}),b=()=>p.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center bg-white",children:[p.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6 text-green-600 animate-fade-in",children:p.jsx("span",{className:"material-symbols-outlined text-4xl",children:"check"})}),p.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Mensagem Enviada!"}),p.jsxs("p",{className:"text-gray-500 mb-8",children:["Obrigado, ",p.jsx("strong",{children:a}),". Nossa equipe entrar em contato pelo nmero ",p.jsx("strong",{children:m})," ou email ",p.jsx("strong",{children:u})," em breve."]}),p.jsx("button",{onClick:e,className:"text-blue-600 font-bold hover:underline",children:"Fechar Janela"})]}),Ie=()=>{if(F)return p.jsx("div",{className:"flex justify-center py-8",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(L.length===0)return p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-400 p-8",children:[p.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4 overflow-hidden border-2 border-white shadow-sm",children:p.jsx("img",{src:zh,alt:"Suporte",className:"w-full h-full object-cover opacity-80 grayscale"})}),p.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Como podemos ajudar voc hoje?"}),p.jsx("p",{className:"text-xs mt-1",children:"Envie sua dvida abaixo."})]});let te="";return L.map((W,O)=>{let z=new Date;W.timestamp&&(typeof W.timestamp.toMillis=="function"?z=new Date(W.timestamp.toMillis()):W.timestamp instanceof Date&&(z=W.timestamp));const B=A8(z),Y=B!==te;te=B;const ee=z.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),re=W.sender==="user",fe=L[O+1],je=!fe||fe.sender!==W.sender||fe.timestamp&&Math.abs((typeof fe.timestamp.toMillis=="function"?fe.timestamp.toMillis():fe.timestamp.getTime())-z.getTime())>6e4*5;let Ge="rounded-2xl";return re?Ge=je?"rounded-2xl rounded-tr-sm":"rounded-2xl rounded-tr-sm rounded-br-sm mb-1":Ge=je?"rounded-2xl rounded-tl-sm":"rounded-2xl rounded-tl-sm rounded-bl-sm mb-1",p.jsxs(eI.Fragment,{children:[Y&&p.jsx("div",{className:"flex justify-center my-4",children:p.jsx("span",{className:"text-[10px] font-bold text-gray-400 bg-gray-100 px-3 py-1 rounded-full uppercase tracking-wider shadow-sm",children:B})}),p.jsx("div",{className:`flex w-full ${re?"justify-end":"justify-start"} ${je?"mb-3":"mb-1"} group`,children:p.jsxs("div",{className:`max-w-[80%] relative ${re?"items-end":"items-start"} flex flex-col`,children:[p.jsx("div",{className:`px-4 py-2.5 text-sm shadow-sm relative break-words w-full ${Ge} ${re?"bg-black text-white":"bg-white text-gray-800 border border-gray-100"}`,children:W.text}),je&&p.jsx("span",{className:`text-[10px] mt-1 px-1 ${re?"text-gray-400 text-right":"text-gray-400 text-left"}`,children:ee})]})})]},W.id)})},Me={hidden:{opacity:0,transition:{duration:.1}},visible:{opacity:1,transition:{delay:.2,duration:.2}},exit:{opacity:0,transition:{duration:.1}}};return p.jsx(X.div,{layoutId:"support-chat-container",className:"fixed z-[9999] bg-gray-50 flex flex-col overflow-hidden shadow-2xl origin-bottom-right",style:{bottom:window.innerWidth<640?0:"1.5rem",right:window.innerWidth<640?0:"1.5rem",width:window.innerWidth<640?"100%":"420px",height:window.innerWidth<640?"100%":"650px",borderRadius:window.innerWidth<640?"0":"1.5rem",maxHeight:window.innerWidth<640?"100vh":"90vh"},transition:{type:"spring",stiffness:350,damping:30},onClick:te=>te.stopPropagation(),children:p.jsxs(X.div,{className:"flex flex-col h-full w-full",variants:Me,initial:"hidden",animate:"visible",exit:"exit",children:[p.jsxs("div",{className:"bg-white border-b border-gray-100 p-4 flex justify-between items-center shadow-sm z-20",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"relative w-12 h-12 shrink-0",children:[p.jsx("div",{className:"w-full h-full rounded-full overflow-hidden border border-gray-200 shadow-inner",children:p.jsx("img",{src:zh,alt:"Julia",className:"w-full h-full object-cover"})}),p.jsx("span",{className:`absolute bottom-0 right-0 w-3.5 h-3.5 rounded-full border-2 border-white shadow-sm ${i?"bg-green-500":"bg-gray-400"}`})]}),p.jsxs("div",{children:[p.jsx("h2",{className:"font-bold text-gray-800 text-base",children:"Suporte MeuGasto"}),p.jsx("p",{className:"text-xs text-gray-500 flex items-center gap-1.5 font-medium",children:i?"Julia - Online agora":"Julia - Fora do horrio"})]})]}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 bg-gray-50 hover:bg-gray-100 p-2 rounded-full transition-colors w-10 h-10 flex items-center justify-center shrink-0 aspect-square",children:p.jsx(Sn,{className:"text-xl"})})]}),p.jsx("div",{className:"flex-1 overflow-hidden relative bg-[#f8fafc]",children:!n&&!C?D():!n&&C?b():p.jsxs(p.Fragment,{children:[!i&&p.jsxs("div",{className:"bg-amber-50 px-4 py-3 text-xs text-amber-800 font-medium text-center border-b border-amber-100 flex items-center justify-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),"Atendimento: Seg a Sex, 09h s 18h. Deixe sua mensagem!"]}),p.jsxs("div",{className:"h-full overflow-y-auto p-4 space-y-1 custom-scrollbar",children:[Ie(),p.jsx("div",{ref:E})]})]})}),n&&p.jsx("div",{className:"p-3 bg-white border-t border-gray-100 z-20",children:p.jsxs("form",{onSubmit:A,className:"flex items-end gap-2 bg-gray-50 p-1.5 rounded-[1.5rem] border border-gray-200 focus-within:border-gray-400 focus-within:ring-4 focus-within:ring-gray-100 transition-all shadow-sm",children:[p.jsx("textarea",{ref:x,value:r,onChange:te=>s(te.target.value),placeholder:"Digite sua mensagem...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm text-gray-800 placeholder-gray-400 resize-none max-h-32 py-3 px-4 min-h-[44px]",rows:1,onKeyDown:te=>{te.key==="Enter"&&!te.shiftKey&&(te.preventDefault(),A(te))}}),p.jsx("button",{type:"submit",disabled:!r.trim(),className:`
                            group flex items-center justify-center shrink-0
                            w-11 h-11 rounded-full 
                            bg-gradient-to-r from-blue-600 to-indigo-600 text-white 
                            shadow-md shadow-blue-500/20 
                            transition-all duration-300 ease-out
                            hover:shadow-lg hover:shadow-blue-500/40 hover:scale-105 hover:from-blue-500 hover:to-indigo-500
                            active:scale-95 active:shadow-sm
                            disabled:bg-none disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed disabled:shadow-none disabled:scale-100
                            mb-0.5 mr-0.5
                        `,children:p.jsx(V4,{className:"text-xl relative left-0.5 top-0.5 transition-transform duration-300 group-hover:-translate-y-0.5 group-hover:translate-x-0.5 group-disabled:transform-none"})})]})})]})})},P8=()=>{const[t,e]=M.useState("landing"),[n,r]=M.useState("login"),[s,i]=M.useState(null),[o,a]=M.useState(Date.now()),[l,u]=M.useState(null),[d,m]=M.useState(!0),[g,v]=M.useState({show:!1,days:0}),[w,C]=M.useState(!1),[R,E]=M.useState(!1),[x,S]=M.useState(!1),[V,L]=M.useState("dashboard"),F=O=>{try{window.history.pushState({},"",O)}catch(z){console.warn("History pushState failed (likely environment restriction):",z)}};M.useEffect(()=>{const O=window.location.pathname;O==="/login"?(e("auth"),r("login")):O==="/cadastro"?(e("auth"),r("register")):O==="/obrigado"&&e("thankyou");const z=()=>{const B=window.location.pathname;B==="/login"?(e("auth"),r("login")):B==="/cadastro"?(e("auth"),r("register")):B==="/obrigado"?e("thankyou"):B==="/"&&(t==="auth"||t==="thankyou")&&e("landing")};return window.addEventListener("popstate",z),()=>window.removeEventListener("popstate",z)},[t]);const I=M.useCallback(async(O,z=!1)=>{var B,Y;z||m(!0),v({show:!1,days:0});try{const ee=$t(zt,"users",O),re=await cf(ee);let fe;if(re.exists()?fe={...re.data(),uid:O}:fe={uid:O,name:((B=mn.currentUser)==null?void 0:B.displayName)||"Usurio",email:((Y=mn.currentUser)==null?void 0:Y.email)||"",role:"user",status:"active"},fe.status==="blocked"){await mn.signOut(),u(null),e("landing"),F("/"),z||alert("Sua conta est bloqueada. Entre em contato com o administrador."),m(!1);return}if(fe.role!=="admin"&&fe.subscriptionExpiresAt){const je=new Date;je.setHours(0,0,0,0);const[Ge,ve,cn]=fe.subscriptionExpiresAt.split("-").map(Number),Cn=new Date(Ge,ve-1,cn).getTime()-je.getTime(),kt=Math.ceil(Cn/(1e3*60*60*24));if(kt<0){u({...fe,role:fe.role||"user",status:fe.status||"active"}),e("expired"),m(!1);return}else kt<=5&&v({show:!0,days:kt})}u({...fe,role:fe.role||"user",status:fe.status||"active"}),z||window.location.pathname!=="/obrigado"&&(e("app"),window.location.pathname!=="/"&&F("/"))}catch(ee){console.error("Erro ao validar sesso:",ee),z||(e("landing"),u(null))}finally{z||m(!1)}},[]);M.useEffect(()=>{if(!fm){m(!1);return}if(!mn){console.error("Auth object is undefined."),m(!1);return}try{const O=qV(mn,async z=>{if(z)await I(z.uid);else{u(null);const B=window.location.pathname;B!=="/login"&&B!=="/cadastro"&&B!=="/obrigado"&&e("landing"),m(!1)}},z=>{console.error("Auth State Change Error:",z),m(!1)});return()=>O()}catch(O){console.error("Critical Auth Error:",O),m(!1)}},[I]),M.useEffect(()=>{let O;return t==="app"&&(l!=null&&l.uid)&&(O=setInterval(()=>{console.log("Verificando status da assinatura em segundo plano..."),I(l.uid,!0)},6e4)),()=>{O&&clearInterval(O)}},[t,l==null?void 0:l.uid,I]);const T=M.useCallback(O=>{m(!0),I(O.uid)},[I]),A=M.useCallback(async()=>{await hm(),e("landing"),u(null),F("/")},[]),P=M.useCallback(async()=>{await hm(),i("pricing"),e("landing"),u(null),F("/")},[]),k=M.useCallback(O=>{O==="privacy"?(C(!0),e("landing")):O==="terms"?(E(!0),e("landing")):(a(Date.now()),r(O),e("auth"),F(O==="login"?"/login":"/cadastro"))},[]),D=M.useCallback(()=>{e("landing"),F("/")},[]),b=M.useCallback(()=>C(!0),[]),Ie=M.useCallback(()=>E(!0),[]),Me=M.useCallback(()=>S(!0),[]);if(!fm||KN)return p.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-6 text-center",children:[p.jsx("div",{className:"text-red-500 mb-6 bg-red-100 p-4 rounded-full",children:p.jsx("span",{className:"material-symbols-outlined text-5xl",children:"cloud_off"})}),p.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Erro de Conexo"}),p.jsx("p",{className:"text-gray-600 max-w-md mb-6",children:"No foi possvel inicializar os servios do Firebase. Verifique sua conexo com a internet ou as configuraes do projeto."}),p.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:"Tentar Novamente"})]});if(d)return p.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center flex-col",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),p.jsx("p",{className:"text-gray-600 font-medium animate-pulse",children:"Carregando..."})]});const te=t==="auth"||t==="thankyou"?!1:t==="landing"||t==="app",W=t==="app"?V==="profile"?"flex":"hidden md:flex":"flex";return p.jsxs(F4,{children:[t==="landing"&&p.jsx(C6,{onStart:k,scrollTarget:s,clearScrollTarget:()=>i(null)}),t==="auth"&&p.jsx(U4,{onLoginSuccess:T,onBack:D,initialView:n},o),t==="thankyou"&&p.jsx(I8,{onContinue:()=>k("login")}),t==="expired"&&p.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border border-gray-100",children:[p.jsx("div",{className:"bg-red-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:p.jsx("span",{className:"material-symbols-outlined text-4xl text-red-600",children:"sentiment_sad"})}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Assinatura Expirada"}),p.jsxs("p",{className:"text-gray-600 mb-6 leading-relaxed",children:["Ol, ",p.jsx("span",{className:"font-semibold",children:l==null?void 0:l.name}),". ",p.jsx("br",{}),"O perodo de acesso da sua conta encerrou. Renove sua assinatura agora para continuar controlando suas finanas."]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("button",{onClick:P,className:"w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors shadow-md flex items-center justify-center gap-2",children:[p.jsx("span",{className:"material-symbols-outlined",children:"workspace_premium"}),"Renovar Agora"]}),p.jsx("button",{onClick:A,className:"w-full bg-gray-100 text-gray-600 font-semibold py-3 px-6 rounded-lg hover:bg-gray-200 transition-colors",children:"Sair da Conta"})]})]})}),t==="app"&&l&&p.jsx(E8,{currentUser:l,onOpenGlobalPrivacyPolicy:b,onOpenGlobalTermsOfService:Ie,expirationWarning:g,onOpenSupport:Me,onViewChange:L},l.uid),t==="app"&&!l&&p.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600"}),p.jsx("p",{className:"ml-4 text-gray-600",children:"Carregando dados do usurio..."})]}),p.jsx(S8,{isOpen:w,onClose:()=>C(!1)}),p.jsx(C8,{isOpen:R,onClose:()=>E(!1)}),p.jsx(ko,{mode:"wait",children:x?p.jsx(N8,{isOpen:x,onClose:()=>S(!1),currentUser:l},"chat-modal"):te&&p.jsxs(X.button,{layoutId:"support-chat-container",onClick:Me,style:{borderRadius:"50%"},className:`fixed right-6 w-14 h-14 bg-black hover:scale-110 text-white rounded-full shadow-2xl shadow-black/40 items-center justify-center z-50 group overflow-hidden ${W} ${t==="app"?"bottom-24":"bottom-6"}`,whileHover:{scale:1.1},whileTap:{scale:.95},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8,transition:{duration:.2}},transition:{type:"spring",stiffness:350,damping:30},"aria-label":"Abrir Suporte",children:[p.jsx("div",{className:"absolute inset-0 w-[200%] h-[200%] bg-gray-800 rounded-[40%] top-[90%] left-[-50%] z-0 liquid-wave opacity-50 pointer-events-none"}),p.jsx("div",{className:"absolute inset-0 w-[200%] h-[200%] bg-gray-700 rounded-[45%] top-[95%] left-[-50%] z-0 liquid-wave opacity-40 pointer-events-none",style:{animationDuration:"7s"}}),p.jsx("div",{className:"relative z-10",children:p.jsx(M4,{className:"text-2xl"})}),p.jsx("span",{className:"absolute right-full mr-3 bg-black text-white text-xs font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Suporte"})]},"chat-button")})]})},ab=document.getElementById("root");if(!ab)throw new Error("Could not find root element to mount to");const R8=Hh.createRoot(ab);R8.render(p.jsx(eI.StrictMode,{children:p.jsx(P8,{})}));export{Ya as $,aW as A,uW as B,dd as C,W8 as D,ki as E,G8 as F,Y8 as G,Q8 as H,iW as I,N4 as J,WU as K,Sh as L,K8 as M,Zx as N,ka as O,jy as P,LU as Q,eI as R,lW as S,D4 as T,zt as U,k4 as V,fd as W,Sn as X,Vy as Y,V4 as Z,$t as _,sW as a,XU as a0,Bx as a1,kR as a2,Z8 as a3,M4 as a4,rW as a5,X8 as a6,pm as a7,R4 as a8,b4 as a9,eW as aa,H8 as ab,tW as ac,nW as ad,V8 as ae,P4 as af,Po as ag,T4 as ah,F8 as ai,L8 as b,$h as c,nD as d,QN as e,oW as f,GE as g,j8 as h,By as i,p as j,$8 as k,q8 as l,U8 as m,dW as n,Xx as o,z8 as p,fW as q,M as r,A4 as s,O8 as t,_i as u,b8 as v,Za as w,B8 as x,YN as y,J8 as z};
//# sourceMappingURL=index-DaCuWBGK.js.map
