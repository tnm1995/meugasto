{"version":3,"file":"AdminPanel-k45jHZDj.js","sources":["../../components/AdminSupport.tsx","../../components/AdminPanel.tsx"],"sourcesContent":["\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { db } from '../services/firebaseService';\nimport { collection, query, orderBy, onSnapshot, doc, updateDoc, addDoc, serverTimestamp, getDocs, where } from 'firebase/firestore';\nimport { Ticket, TicketStatus, TicketTag, ChatMessage, User } from '../types';\nimport { useToast } from '../contexts/ToastContext';\nimport { \n    SearchIcon, \n    CheckCircleIcon, \n    SupportAgentIcon, \n    SendIcon, \n    DescriptionIcon, \n    MoreVertIcon, \n    XMarkIcon \n} from './Icons';\n\ninterface AdminSupportProps {\n    currentUser: User;\n    allUsers: User[]; // Para atribui√ß√£o de admins\n}\n\nconst MACROS = [\n    { label: \"Sauda√ß√£o\", text: \"Ol√°! Como posso ajudar voc√™ hoje?\" },\n    { label: \"Pedir Detalhes\", text: \"Poderia me dar mais detalhes sobre o problema que est√° enfrentando?\" },\n    { label: \"Analisando\", text: \"Estou analisando sua conta, s√≥ um momento por favor.\" },\n    { label: \"Encerrar\", text: \"H√° algo mais em que eu possa ajudar? Se n√£o, vou encerrar este chamado.\" },\n    { label: \"Pagamento\", text: \"Para quest√µes de pagamento, verifique se seu cart√£o est√° habilitado para compras online.\" }\n];\n\nconst TICKET_TAGS: { value: TicketTag, label: string, color: string }[] = [\n    { value: 'financeiro', label: 'Financeiro', color: 'bg-green-100 text-green-700' },\n    { value: 'bug', label: 'Bug/Erro', color: 'bg-red-100 text-red-700' },\n    { value: 'cancelamento', label: 'Cancelamento', color: 'bg-gray-200 text-gray-700' },\n    { value: 'duvida', label: 'D√∫vida', color: 'bg-blue-100 text-blue-700' },\n    { value: 'feature', label: 'Sugest√£o', color: 'bg-purple-100 text-purple-700' },\n];\n\nexport const AdminSupport: React.FC<AdminSupportProps> = ({ currentUser, allUsers }) => {\n    const [tickets, setTickets] = useState<Ticket[]>([]);\n    const [selectedTicketId, setSelectedTicketId] = useState<string | null>(null);\n    const [messages, setMessages] = useState<ChatMessage[]>([]);\n    const [filterStatus, setFilterStatus] = useState<TicketStatus | 'all'>('open');\n    const [replyText, setReplyText] = useState('');\n    const [searchTerm, setSearchTerm] = useState('');\n    \n    // Ticket Details State (Optimistic UI)\n    const [internalNote, setInternalNote] = useState('');\n    const [loadingMessages, setLoadingMessages] = useState(false);\n\n    const messagesEndRef = useRef<HTMLDivElement>(null);\n    const { showToast } = useToast();\n\n    const admins = useMemo(() => allUsers.filter(u => u.role && ['admin', 'super_admin', 'operational_admin', 'support_admin'].includes(u.role)), [allUsers]);\n\n    // 1. Fetch Tickets\n    useEffect(() => {\n        const q = query(collection(db, 'tickets'), orderBy('updatedAt', 'desc'));\n        const unsubscribe = onSnapshot(q, (snapshot) => {\n            const ticketList: Ticket[] = [];\n            snapshot.forEach(doc => {\n                ticketList.push({ id: doc.id, ...doc.data() } as Ticket);\n            });\n            setTickets(ticketList);\n        });\n        return () => unsubscribe();\n    }, []);\n\n    // 2. Fetch Messages for Selected Ticket\n    useEffect(() => {\n        if (!selectedTicketId) {\n            setMessages([]);\n            return;\n        }\n\n        setLoadingMessages(true);\n        // Messages are stored in: users/{userId}/support_messages\n        // Ticket ID IS the User ID in this simplified schema\n        const messagesRef = collection(db, 'users', selectedTicketId, 'support_messages');\n        const q = query(messagesRef, orderBy('timestamp', 'asc'));\n\n        const unsubscribe = onSnapshot(q, (snapshot) => {\n            const msgList: ChatMessage[] = [];\n            snapshot.forEach(doc => {\n                msgList.push({ id: doc.id, ...doc.data() } as ChatMessage);\n            });\n            setMessages(msgList);\n            setLoadingMessages(false);\n            setTimeout(() => messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' }), 100);\n        });\n\n        // Set initial internal note\n        const currentTicket = tickets.find(t => t.id === selectedTicketId);\n        if (currentTicket) setInternalNote(currentTicket.internalNotes || '');\n\n        return () => unsubscribe();\n    }, [selectedTicketId]);\n\n    const handleSendMessage = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!replyText.trim() || !selectedTicketId) return;\n\n        try {\n            // 1. Add to User's subcollection\n            const messagesRef = collection(db, 'users', selectedTicketId, 'support_messages');\n            await addDoc(messagesRef, {\n                text: replyText,\n                sender: 'support',\n                timestamp: serverTimestamp(),\n                read: false\n            });\n\n            // 2. Update Ticket Metadata\n            const ticketRef = doc(db, 'tickets', selectedTicketId);\n            await updateDoc(ticketRef, {\n                lastMessage: replyText,\n                lastMessageSender: 'support',\n                updatedAt: serverTimestamp(),\n                status: 'in_progress', // Auto move to in progress\n                unreadCount: 0 // Reset unread\n            });\n\n            setReplyText('');\n        } catch (error) {\n            console.error(error);\n            showToast('Erro ao enviar mensagem.', 'error');\n        }\n    };\n\n    const updateTicketField = async (field: keyof Ticket, value: any) => {\n        if (!selectedTicketId) return;\n        try {\n            const ticketRef = doc(db, 'tickets', selectedTicketId);\n            await updateDoc(ticketRef, { [field]: value });\n            showToast('Ticket atualizado.', 'success');\n        } catch (error) {\n            showToast('Erro ao atualizar.', 'error');\n        }\n    };\n\n    const handleSaveNote = async () => {\n        await updateTicketField('internalNotes', internalNote);\n    };\n\n    const filteredTickets = tickets.filter(t => {\n        const matchesStatus = filterStatus === 'all' ? true : t.status === filterStatus;\n        const matchesSearch = t.userName.toLowerCase().includes(searchTerm.toLowerCase()) || t.userEmail.toLowerCase().includes(searchTerm.toLowerCase());\n        return matchesStatus && matchesSearch;\n    });\n\n    const selectedTicket = tickets.find(t => t.id === selectedTicketId);\n\n    const getStatusBadge = (status: TicketStatus) => {\n        switch (status) {\n            case 'open': return <span className=\"px-2 py-0.5 rounded-full text-[10px] font-bold bg-red-100 text-red-700 uppercase tracking-wide\">Aberto</span>;\n            case 'in_progress': return <span className=\"px-2 py-0.5 rounded-full text-[10px] font-bold bg-blue-100 text-blue-700 uppercase tracking-wide\">Em Andamento</span>;\n            case 'resolved': return <span className=\"px-2 py-0.5 rounded-full text-[10px] font-bold bg-green-100 text-green-700 uppercase tracking-wide\">Resolvido</span>;\n        }\n    };\n\n    return (\n        <div className=\"flex h-[calc(100vh-140px)] bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden\">\n            \n            {/* LEFT SIDEBAR: Ticket List */}\n            <div className=\"w-1/3 min-w-[300px] border-r border-gray-200 flex flex-col bg-gray-50\">\n                <div className=\"p-4 border-b border-gray-200 bg-white\">\n                    <div className=\"relative mb-4\">\n                        <SearchIcon className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm\" />\n                        <input \n                            type=\"text\" \n                            placeholder=\"Buscar usu√°rio...\" \n                            className=\"w-full pl-9 pr-4 py-2 bg-gray-100 border-transparent focus:bg-white focus:border-blue-500 rounded-lg text-sm transition-all outline-none border\"\n                            value={searchTerm}\n                            onChange={e => setSearchTerm(e.target.value)}\n                        />\n                    </div>\n                    <div className=\"flex gap-2 overflow-x-auto pb-2 scrollbar-hide\">\n                        {(['open', 'in_progress', 'resolved', 'all'] as const).map(status => (\n                            <button\n                                key={status}\n                                onClick={() => setFilterStatus(status)}\n                                className={`px-3 py-1.5 rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${filterStatus === status ? 'bg-gray-800 text-white shadow-md' : 'bg-gray-200 text-gray-600 hover:bg-gray-300'}`}\n                            >\n                                {status === 'all' ? 'Todos' : (status === 'open' ? 'Abertos' : (status === 'in_progress' ? 'Andamento' : 'Resolvidos'))}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\n                    {filteredTickets.length === 0 ? (\n                        <div className=\"p-8 text-center text-gray-400 text-sm\">Nenhum ticket encontrado.</div>\n                    ) : (\n                        filteredTickets.map(ticket => (\n                            <div \n                                key={ticket.id}\n                                onClick={() => setSelectedTicketId(ticket.id)}\n                                className={`p-4 border-b border-gray-100 cursor-pointer hover:bg-white transition-colors relative ${selectedTicketId === ticket.id ? 'bg-white border-l-4 border-l-blue-600 shadow-sm' : ''}`}\n                            >\n                                <div className=\"flex justify-between items-start mb-1\">\n                                    <h4 className={`font-bold text-sm ${ticket.unreadCount > 0 ? 'text-gray-900' : 'text-gray-700'}`}>{ticket.userName}</h4>\n                                    <span className=\"text-[10px] text-gray-400\">{new Date(ticket.updatedAt?.toMillis?.() || Date.now()).toLocaleDateString('pt-BR', {day:'2-digit', month:'short'})}</span>\n                                </div>\n                                <p className={`text-xs truncate mb-2 ${ticket.unreadCount > 0 ? 'font-bold text-gray-800' : 'text-gray-500'}`}>\n                                    {ticket.lastMessageSender === 'user' ? 'üë§ ' : 'Support: '} {ticket.lastMessage}\n                                </p>\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex gap-1\">\n                                        {getStatusBadge(ticket.status)}\n                                        {ticket.tags && ticket.tags.length > 0 && (\n                                            <span className={`px-1.5 py-0.5 rounded-full text-[9px] font-bold uppercase ${TICKET_TAGS.find(t=>t.value === ticket.tags![0])?.color || 'bg-gray-100'}`}>\n                                                {ticket.tags[0].slice(0,3)}\n                                            </span>\n                                        )}\n                                    </div>\n                                    {ticket.unreadCount > 0 && (\n                                        <span className=\"bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center\">{ticket.unreadCount}</span>\n                                    )}\n                                </div>\n                            </div>\n                        ))\n                    )}\n                </div>\n            </div>\n\n            {/* MAIN CONTENT: Chat */}\n            {selectedTicket ? (\n                <div className=\"flex-1 flex flex-col min-w-0 bg-white relative\">\n                    {/* Header Chat */}\n                    <div className=\"h-16 border-b border-gray-100 flex justify-between items-center px-6 bg-white shrink-0\">\n                        <div>\n                            <h3 className=\"font-bold text-gray-800\">{selectedTicket.userName}</h3>\n                            <p className=\"text-xs text-gray-500\">{selectedTicket.userEmail}</p>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                            <select \n                                value={selectedTicket.status}\n                                onChange={(e) => updateTicketField('status', e.target.value)}\n                                className=\"bg-gray-50 border border-gray-200 text-xs font-bold rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n                            >\n                                <option value=\"open\">Aberto</option>\n                                <option value=\"in_progress\">Em Andamento</option>\n                                <option value=\"resolved\">Resolvido</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    {/* Messages Area */}\n                    <div className=\"flex-1 overflow-y-auto p-6 bg-gray-50/50 space-y-4 custom-scrollbar\">\n                        {messages.map((msg) => {\n                            const isSupport = msg.sender !== 'user';\n                            return (\n                                <div key={msg.id} className={`flex ${isSupport ? 'justify-end' : 'justify-start'}`}>\n                                    <div className={`max-w-[70%] p-3 rounded-2xl text-sm shadow-sm ${isSupport ? 'bg-blue-600 text-white rounded-tr-none' : 'bg-white border border-gray-200 text-gray-700 rounded-tl-none'}`}>\n                                        <p>{msg.text}</p>\n                                        <span className={`text-[10px] block mt-1 opacity-70 ${isSupport ? 'text-blue-100 text-right' : 'text-gray-400'}`}>\n                                            {msg.timestamp?.toDate ? msg.timestamp.toDate().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) : '...'}\n                                        </span>\n                                    </div>\n                                </div>\n                            );\n                        })}\n                        <div ref={messagesEndRef} />\n                    </div>\n\n                    {/* Reply Area */}\n                    <div className=\"p-4 border-t border-gray-100 bg-white\">\n                        {/* Macros */}\n                        <div className=\"flex gap-2 overflow-x-auto mb-3 pb-1 scrollbar-hide\">\n                            {MACROS.map((macro, idx) => (\n                                <button\n                                    key={idx}\n                                    onClick={() => setReplyText(macro.text)}\n                                    className=\"px-3 py-1.5 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-full text-xs text-gray-600 whitespace-nowrap transition-colors\"\n                                >\n                                    {macro.label}\n                                </button>\n                            ))}\n                        </div>\n                        <form onSubmit={handleSendMessage} className=\"relative\">\n                            <input \n                                type=\"text\" \n                                value={replyText}\n                                onChange={e => setReplyText(e.target.value)}\n                                placeholder=\"Escreva uma resposta...\"\n                                className=\"w-full pl-4 pr-12 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-sm\"\n                            />\n                            <button \n                                type=\"submit\"\n                                disabled={!replyText.trim()}\n                                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed\"\n                            >\n                                <SendIcon className=\"text-sm\" />\n                            </button>\n                        </form>\n                    </div>\n                </div>\n            ) : (\n                <div className=\"flex-1 flex flex-col items-center justify-center text-gray-400 bg-gray-50\">\n                    <SupportAgentIcon className=\"text-6xl mb-4 opacity-20\" />\n                    <p className=\"font-medium\">Selecione um ticket para iniciar o atendimento</p>\n                </div>\n            )}\n\n            {/* RIGHT SIDEBAR: Details */}\n            {selectedTicket && (\n                <div className=\"w-1/4 min-w-[250px] border-l border-gray-200 bg-white flex flex-col p-5 overflow-y-auto\">\n                    \n                    {/* Atribui√ß√£o */}\n                    <div className=\"mb-6\">\n                        <label className=\"text-xs font-bold text-gray-500 uppercase tracking-wide block mb-2\">Atribuir a</label>\n                        <select \n                            value={selectedTicket.assignedTo || ''}\n                            onChange={(e) => updateTicketField('assignedTo', e.target.value)}\n                            className=\"w-full p-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none\"\n                        >\n                            <option value=\"\">N√£o atribu√≠do</option>\n                            {admins.map(admin => (\n                                <option key={admin.uid} value={admin.uid}>{admin.name}</option>\n                            ))}\n                        </select>\n                    </div>\n\n                    {/* Tags */}\n                    <div className=\"mb-6\">\n                        <label className=\"text-xs font-bold text-gray-500 uppercase tracking-wide block mb-2\">Tags</label>\n                        <div className=\"flex flex-wrap gap-2\">\n                            {TICKET_TAGS.map(tag => {\n                                const isSelected = selectedTicket.tags?.includes(tag.value);\n                                return (\n                                    <button\n                                        key={tag.value}\n                                        onClick={() => {\n                                            const currentTags = selectedTicket.tags || [];\n                                            const newTags = isSelected \n                                                ? currentTags.filter(t => t !== tag.value)\n                                                : [...currentTags, tag.value];\n                                            updateTicketField('tags', newTags);\n                                        }}\n                                        className={`px-2 py-1 rounded-md text-xs font-medium border transition-all ${isSelected ? tag.color + ' border-transparent ring-1 ring-offset-1' : 'bg-white border-gray-200 text-gray-500 hover:bg-gray-50'}`}\n                                    >\n                                        {tag.label}\n                                    </button>\n                                );\n                            })}\n                        </div>\n                    </div>\n\n                    {/* Notas Internas */}\n                    <div className=\"flex-1 flex flex-col\">\n                        <label className=\"text-xs font-bold text-gray-500 uppercase tracking-wide block mb-2 flex items-center gap-1\">\n                            <DescriptionIcon className=\"text-sm\" /> Nota Interna (Privado)\n                        </label>\n                        <textarea \n                            className=\"w-full flex-1 p-3 bg-yellow-50 border border-yellow-200 rounded-xl text-sm text-gray-700 resize-none focus:ring-2 focus:ring-yellow-400 outline-none placeholder-yellow-700/30\"\n                            placeholder=\"Escreva observa√ß√µes sobre o cliente ou problema...\"\n                            value={internalNote}\n                            onChange={(e) => setInternalNote(e.target.value)}\n                            onBlur={handleSaveNote}\n                        />\n                        <p className=\"text-[10px] text-gray-400 mt-2 text-right\">Salvo automaticamente ao sair.</p>\n                    </div>\n\n                </div>\n            )}\n        </div>\n    );\n};\n","\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { db } from '../services/firebaseService';\nimport { collection, getDocs, doc, updateDoc, setDoc, addDoc, serverTimestamp, query, orderBy, onSnapshot } from 'firebase/firestore';\nimport { sendPasswordResetEmail, adminCreateUser } from '../services/authService';\nimport { User, UserStatus, UserRole, PricingSettings, ROLE_LABELS, AdminLog } from '../types';\nimport { useToast } from '../contexts/ToastContext';\nimport { useSystemSettings } from '../hooks/useSystemSettings';\nimport { AdminSupport } from './AdminSupport'; \nimport { \n    SearchIcon, \n    GroupIcon, \n    CheckCircleIcon, \n    LockIcon, \n    LockOpenIcon,\n    CalendarClockIcon,\n    EditIcon,\n    EmailIcon,\n    KeyIcon,\n    XMarkIcon,\n    AdminPanelSettingsIcon,\n    AttachMoneyIcon,\n    PlusIcon,\n    ShieldCheckIcon, \n    SupportAgentIcon,\n    DescriptionIcon,\n    ChatBubbleIcon,\n    HistoryIcon\n} from './Icons';\n\nconst formatDate = (isoDate: string | null | undefined) => {\n    if (!isoDate) return '-';\n    const datePart = isoDate.split('T')[0];\n    const [year, month, day] = datePart.split('-');\n    return `${day}/${month}/${year}`;\n};\n\nconst formatCurrency = (value: number) => {\n    return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value);\n};\n\ninterface AdminPanelProps {\n    currentUser: User;\n}\n\nexport const AdminPanel: React.FC<AdminPanelProps> = ({ currentUser }) => {\n    const [users, setUsers] = useState<User[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [searchTerm, setSearchTerm] = useState('');\n    const { showToast } = useToast();\n    const { pricing, loading: loadingPricing } = useSystemSettings();\n\n    // Logs States\n    const [logs, setLogs] = useState<AdminLog[]>([]);\n    const [loadingLogs, setLoadingLogs] = useState(false);\n\n    // Estados locais para edi√ß√£o de pre√ßos\n    const [editMonthlyPrice, setEditMonthlyPrice] = useState('');\n    const [editAnnualPrice, setEditAnnualPrice] = useState('');\n    const [isSavingPricing, setIsSavingPricing] = useState(false);\n\n    // Modal States (Edi√ß√£o)\n    const [editingUser, setEditingUser] = useState<User | null>(null);\n    const [newEmail, setNewEmail] = useState('');\n    const [newName, setNewName] = useState('');\n    const [subscriptionDate, setSubscriptionDate] = useState('');\n    const [newRole, setNewRole] = useState<UserRole>('user');\n    const [internalNotes, setInternalNotes] = useState(''); \n\n    // Modal States (Cria√ß√£o de Usu√°rio)\n    const [isCreateUserModalOpen, setIsCreateUserModalOpen] = useState(false);\n    const [createName, setCreateName] = useState('');\n    const [createEmail, setCreateEmail] = useState('');\n    const [createPassword, setCreatePassword] = useState('');\n    const [createRole, setCreateRole] = useState<UserRole>('user');\n    const [isCreatingUser, setIsCreatingUser] = useState(false);\n    \n    // Aba ativa\n    const [activeTab, setActiveTab] = useState<'users' | 'support' | 'settings' | 'logs'>('users');\n\n    // --- PERMISSIONS LOGIC ---\n    const userRole = currentUser.role || 'user';\n    \n    const isSuperAdmin = userRole === 'super_admin' || userRole === 'admin';\n    const isOperationalAdmin = userRole === 'operational_admin';\n    const isSupportAdmin = userRole === 'support_admin';\n\n    const canManagePricing = isSuperAdmin;\n    const canManageAdmins = isSuperAdmin;\n    const canEditUsers = isSuperAdmin || isOperationalAdmin;\n    const canCreateUsers = isSuperAdmin || isOperationalAdmin;\n    const canBlockUsers = isSuperAdmin || isOperationalAdmin;\n    const canViewLogs = isSuperAdmin || isOperationalAdmin;\n    \n    useEffect(() => {\n        if (!loadingPricing && pricing) {\n            setEditMonthlyPrice(pricing.monthlyPrice.toString());\n            setEditAnnualPrice(pricing.annualPrice.toString());\n        }\n    }, [loadingPricing, pricing]);\n\n    // --- LOGGING HELPER ---\n    const logAction = async (action: string, details: string, targetUser?: User) => {\n        try {\n            await addDoc(collection(db, 'admin_logs'), {\n                adminId: currentUser.uid,\n                adminName: currentUser.name || 'Admin',\n                action,\n                details,\n                targetUserId: targetUser?.uid || null,\n                targetUserName: targetUser?.name || null,\n                timestamp: serverTimestamp()\n            });\n        } catch (error) {\n            console.error(\"Failed to log admin action:\", error);\n        }\n    };\n\n    // --- DATA FETCHING ---\n    const fetchUsers = async () => {\n        try {\n            setIsLoading(true);\n            const querySnapshot = await getDocs(collection(db, 'users'));\n            const userList: User[] = [];\n            querySnapshot.forEach((doc) => {\n                const data = doc.data() as User;\n                userList.push({\n                    ...data,\n                    uid: doc.id,\n                    role: data.role || 'user',\n                    status: data.status || 'active'\n                });\n            });\n            setUsers(userList);\n        } catch (error) {\n            console.error(\"Erro ao buscar usu√°rios:\", error);\n            showToast('Erro ao carregar lista de usu√°rios.', 'error');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchUsers();\n    }, [showToast]);\n\n    // Fetch Logs Realtime\n    useEffect(() => {\n        if (activeTab === 'logs' && canViewLogs) {\n            setLoadingLogs(true);\n            const q = query(collection(db, 'admin_logs'), orderBy('timestamp', 'desc'));\n            const unsubscribe = onSnapshot(q, (snapshot) => {\n                const logsData: AdminLog[] = [];\n                snapshot.forEach(doc => {\n                    logsData.push({ id: doc.id, ...doc.data() } as AdminLog);\n                });\n                setLogs(logsData);\n                setLoadingLogs(false);\n            });\n            return () => unsubscribe();\n        }\n    }, [activeTab, canViewLogs]);\n\n    const filteredUsers = useMemo(() => {\n        const lowerTerm = searchTerm.toLowerCase();\n        return users.filter(user => \n            user.name.toLowerCase().includes(lowerTerm) ||\n            user.email.toLowerCase().includes(lowerTerm) ||\n            user.uid.toLowerCase().includes(lowerTerm)\n        );\n    }, [users, searchTerm]);\n\n    const stats = useMemo(() => {\n        const now = new Date();\n        now.setHours(0,0,0,0);\n        \n        return {\n            total: users.length,\n            active: users.filter(u => u.status === 'active').length,\n            blocked: users.filter(u => u.status === 'blocked').length,\n            expired: users.filter(u => {\n                if (!u.subscriptionExpiresAt) return false;\n                const [y, m, d] = u.subscriptionExpiresAt.split('-').map(Number);\n                const expiry = new Date(y, m - 1, d);\n                return expiry < now;\n            }).length\n        };\n    }, [users]);\n\n    // --- ACTIONS ---\n\n    const handleToggleStatus = async (user: User) => {\n        if (!canBlockUsers) {\n            showToast('Sem permiss√£o para bloquear usu√°rios.', 'error');\n            return;\n        }\n        if (user.uid === currentUser.uid) {\n            showToast('Voc√™ n√£o pode bloquear a si mesmo.', 'error');\n            return;\n        }\n        \n        if ((user.role === 'super_admin' || user.role === 'admin') && !isSuperAdmin) {\n             showToast('Apenas Super Admins podem gerenciar outros Admins.', 'error');\n             return;\n        }\n\n        const newStatus: UserStatus = user.status === 'active' ? 'blocked' : 'active';\n        try {\n            const userRef = doc(db, 'users', user.uid);\n            await updateDoc(userRef, { status: newStatus });\n            \n            // Log Action\n            await logAction(\n                newStatus === 'blocked' ? 'Bloqueio de Usu√°rio' : 'Desbloqueio de Usu√°rio', \n                `Status alterado de ${user.status} para ${newStatus}`,\n                user\n            );\n\n            setUsers(prev => prev.map(u => u.uid === user.uid ? { ...u, status: newStatus } : u));\n            showToast(`Usu√°rio ${newStatus === 'active' ? 'desbloqueado' : 'bloqueado'} com sucesso.`, 'success');\n        } catch (error) {\n            showToast('Erro ao atualizar status.', 'error');\n        }\n    };\n\n    const handleOpenEdit = (user: User) => {\n        if (!canEditUsers) return;\n        setEditingUser(user);\n        setNewName(user.name);\n        setNewEmail(user.email);\n        setSubscriptionDate(user.subscriptionExpiresAt || '');\n        setNewRole(user.role || 'user');\n        setInternalNotes(user.internalNotes || ''); \n    };\n\n    const handleExtendSubscription = (monthsToAdd: number) => {\n        let baseDate = new Date(); \n\n        if (subscriptionDate) {\n            const [y, m, d] = subscriptionDate.split('-').map(Number);\n            const currentExpiry = new Date(y, m - 1, d);\n            \n            if (currentExpiry > new Date()) {\n                baseDate = currentExpiry;\n            }\n        }\n\n        baseDate.setMonth(baseDate.getMonth() + monthsToAdd);\n        const newDateStr = baseDate.toISOString().split('T')[0];\n        setSubscriptionDate(newDateStr);\n    };\n\n    const handleRevokeSubscription = () => {\n        const yesterday = new Date();\n        yesterday.setDate(yesterday.getDate() - 1);\n        setSubscriptionDate(yesterday.toISOString().split('T')[0]);\n        showToast('Data definida para ontem. Salve para confirmar o cancelamento.', 'info');\n    };\n\n    const handleSaveUser = async () => {\n        if (!editingUser) return;\n\n        try {\n            const userRef = doc(db, 'users', editingUser.uid);\n            await updateDoc(userRef, {\n                name: newName,\n                email: newEmail,\n                subscriptionExpiresAt: subscriptionDate || null,\n                role: newRole,\n                internalNotes: internalNotes \n            });\n\n            // LOGGING LOGIC\n            const updates = [];\n            if (newName !== editingUser.name) updates.push(`Nome: ${newName}`);\n            if (newEmail !== editingUser.email) updates.push(`Email: ${newEmail}`);\n            if (newRole !== editingUser.role) updates.push(`Role: ${newRole}`);\n            if (subscriptionDate !== (editingUser.subscriptionExpiresAt || '')) updates.push(`Assinatura: ${subscriptionDate || 'Vital√≠cio'}`);\n            if (internalNotes !== (editingUser.internalNotes || '')) updates.push('Notas Internas atualizadas');\n\n            if (updates.length > 0) {\n                await logAction('Edi√ß√£o de Usu√°rio', updates.join(', '), editingUser);\n            }\n\n            setUsers(prev => prev.map(u => u.uid === editingUser.uid ? {\n                ...u,\n                name: newName,\n                email: newEmail,\n                subscriptionExpiresAt: subscriptionDate || null,\n                role: newRole,\n                internalNotes: internalNotes\n            } : u));\n\n            showToast('Dados do usu√°rio atualizados com sucesso.', 'success');\n            setEditingUser(null);\n        } catch (error) {\n            console.error(error);\n            showToast('Erro ao salvar altera√ß√µes no banco de dados.', 'error');\n        }\n    };\n\n    const handleCreateUser = async (e: React.FormEvent) => {\n        e.preventDefault();\n        \n        if (!canCreateUsers) return;\n\n        if (!createName || !createEmail || !createPassword) {\n            showToast('Preencha todos os campos.', 'error');\n            return;\n        }\n\n        if (createPassword.length < 6) {\n             showToast('A senha deve ter pelo menos 6 caracteres.', 'error');\n             return;\n        }\n\n        setIsCreatingUser(true);\n        try {\n            const result = await adminCreateUser(createName, createEmail, createPassword, createRole);\n            if (result.success) {\n                // Log Creation\n                await logAction('Cria√ß√£o de Usu√°rio', `Novo usu√°rio criado com role: ${createRole}`, { name: createName, email: createEmail } as User);\n\n                showToast(result.message, 'success');\n                setIsCreateUserModalOpen(false);\n                setCreateName('');\n                setCreateEmail('');\n                setCreatePassword('');\n                setCreateRole('user');\n                await fetchUsers(); \n            } else {\n                showToast(result.message, 'error');\n            }\n        } catch (error) {\n            console.error(error);\n            showToast('Erro ao criar usu√°rio.', 'error');\n        } finally {\n            setIsCreatingUser(false);\n        }\n    };\n    \n    const handleSavePricing = async () => {\n        if (!canManagePricing) return;\n\n        const mPrice = parseFloat(editMonthlyPrice.replace(',', '.'));\n        const aPrice = parseFloat(editAnnualPrice.replace(',', '.'));\n\n        if (isNaN(mPrice) || isNaN(aPrice)) {\n            showToast('Por favor, insira valores v√°lidos.', 'error');\n            return;\n        }\n\n        setIsSavingPricing(true);\n        try {\n            const pricingRef = doc(db, 'settings', 'pricing');\n            await setDoc(pricingRef, {\n                monthlyPrice: mPrice,\n                annualPrice: aPrice\n            }, { merge: true });\n            \n            await logAction('Altera√ß√£o de Pre√ßos', `Mensal: ${mPrice}, Anual: ${aPrice}`);\n\n            showToast('Pre√ßos atualizados com sucesso! Refletindo no app em instantes.', 'success');\n        } catch (error) {\n            console.error(error);\n            showToast('Erro ao atualizar pre√ßos.', 'error');\n        } finally {\n            setIsSavingPricing(false);\n        }\n    };\n\n    const handlePasswordReset = async () => {\n        if (!editingUser) return;\n        const { success, message } = await sendPasswordResetEmail(editingUser.email);\n        \n        if (success) await logAction('Reset de Senha', 'Email de redefini√ß√£o enviado', editingUser);\n        \n        showToast(message, success ? 'success' : 'error');\n    };\n\n    const copyToClipboard = (text: string) => {\n        navigator.clipboard.writeText(text);\n        showToast('ID copiado!', 'success');\n    };\n\n    const inputClasses = \"w-full p-3 bg-white text-gray-800 rounded-xl border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\";\n\n    const getRoleBadge = (role: UserRole) => {\n        switch (role) {\n            case 'super_admin':\n            case 'admin':\n                return <span className=\"text-[10px] bg-purple-100 text-purple-800 px-2 py-0.5 rounded-full font-bold border border-purple-200 uppercase tracking-wider flex items-center gap-1 w-fit\"><ShieldCheckIcon className=\"text-xs\"/> Super Admin</span>;\n            case 'operational_admin':\n                return <span className=\"text-[10px] bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full font-bold border border-blue-200 uppercase tracking-wider flex items-center gap-1 w-fit\"><AdminPanelSettingsIcon className=\"text-xs\"/> Operacional</span>;\n            case 'support_admin':\n                return <span className=\"text-[10px] bg-green-100 text-green-800 px-2 py-0.5 rounded-full font-bold border border-green-200 uppercase tracking-wider flex items-center gap-1 w-fit\"><SupportAgentIcon className=\"text-xs\"/> Suporte</span>;\n            default:\n                return <span className=\"text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full font-bold border border-gray-200 uppercase tracking-wider w-fit\">Usu√°rio</span>;\n        }\n    };\n\n    return (\n        <div className=\"p-4 space-y-6\">\n            <div className=\"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center\">\n                <div>\n                    <h1 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\n                        Painel Administrativo\n                        {getRoleBadge(userRole)}\n                    </h1>\n                    <p className=\"text-gray-500 text-sm mt-1\">Gest√£o de sistema</p>\n                </div>\n                \n                {/* Tab Switcher */}\n                <div className=\"flex bg-gray-100 p-1 rounded-xl mt-4 sm:mt-0 shadow-inner overflow-x-auto\">\n                    <button \n                        onClick={() => setActiveTab('users')}\n                        className={`px-6 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center gap-2 ${activeTab === 'users' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}\n                    >\n                        <GroupIcon className=\"text-lg\" />\n                        Usu√°rios\n                    </button>\n                    <button \n                        onClick={() => setActiveTab('support')}\n                        className={`px-6 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center gap-2 ${activeTab === 'support' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}\n                    >\n                        <ChatBubbleIcon className=\"text-lg\" />\n                        Suporte\n                    </button>\n                    {canViewLogs && (\n                        <button \n                            onClick={() => setActiveTab('logs')}\n                            className={`px-6 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center gap-2 ${activeTab === 'logs' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}\n                        >\n                            <HistoryIcon className=\"text-lg\" />\n                            Auditoria\n                        </button>\n                    )}\n                    {canManagePricing && (\n                        <button \n                            onClick={() => setActiveTab('settings')}\n                            className={`px-6 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center gap-2 ${activeTab === 'settings' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}\n                        >\n                            <AdminPanelSettingsIcon className=\"text-lg\" />\n                            Configura√ß√µes\n                        </button>\n                    )}\n                </div>\n            </div>\n\n            {/* CONTE√öDO DA ABA SUPORTE */}\n            {activeTab === 'support' && (\n                <div className=\"animate-fade-in\">\n                    <AdminSupport currentUser={currentUser} allUsers={users} />\n                </div>\n            )}\n\n            {/* CONTE√öDO DA ABA AUDITORIA (LOGS) */}\n            {activeTab === 'logs' && canViewLogs && (\n                <div className=\"animate-fade-in\">\n                    <div className=\"bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200\">\n                        <div className=\"p-4 border-b border-gray-100 flex items-center gap-2\">\n                            <HistoryIcon className=\"text-gray-400\" />\n                            <h2 className=\"font-bold text-gray-700\">Hist√≥rico de A√ß√µes</h2>\n                        </div>\n                        <div className=\"overflow-x-auto max-h-[600px] overflow-y-auto\">\n                            <table className=\"min-w-full divide-y divide-gray-200\">\n                                <thead className=\"bg-gray-50 sticky top-0 z-10\">\n                                    <tr>\n                                        <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">Data</th>\n                                        <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">Admin</th>\n                                        <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">A√ß√£o</th>\n                                        <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">Alvo</th>\n                                        <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">Detalhes</th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"bg-white divide-y divide-gray-200\">\n                                    {loadingLogs ? (\n                                        <tr><td colSpan={5} className=\"px-6 py-12 text-center\"><div className=\"flex justify-center\"><span className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></span></div></td></tr>\n                                    ) : logs.length === 0 ? (\n                                        <tr><td colSpan={5} className=\"px-6 py-12 text-center text-gray-500\">Nenhum registro encontrado.</td></tr>\n                                    ) : (\n                                        logs.map((log) => (\n                                            <tr key={log.id} className=\"hover:bg-gray-50\">\n                                                <td className=\"px-6 py-4 whitespace-nowrap text-xs text-gray-500\">\n                                                    {log.timestamp?.toDate ? log.timestamp.toDate().toLocaleString('pt-BR') : '...'}\n                                                </td>\n                                                <td className=\"px-6 py-4 whitespace-nowrap text-xs font-bold text-blue-600\">\n                                                    {log.adminName}\n                                                </td>\n                                                <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                    <span className={`px-2 py-1 inline-flex text-[10px] leading-5 font-semibold rounded-full \n                                                        ${log.action.includes('Bloqueio') ? 'bg-red-100 text-red-800' : \n                                                          log.action.includes('Cria√ß√£o') ? 'bg-green-100 text-green-800' : \n                                                          'bg-blue-100 text-blue-800'}`}>\n                                                        {log.action}\n                                                    </span>\n                                                </td>\n                                                <td className=\"px-6 py-4 whitespace-nowrap text-xs text-gray-600\">\n                                                    {log.targetUserName || '-'}\n                                                </td>\n                                                <td className=\"px-6 py-4 text-xs text-gray-500 max-w-xs truncate\" title={log.details}>\n                                                    {log.details}\n                                                </td>\n                                            </tr>\n                                        ))\n                                    )}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* CONTE√öDO DA ABA USU√ÅRIOS */}\n            {activeTab === 'users' && (\n                <>\n                    {/* Cards de Estat√≠sticas */}\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                        <div className=\"bg-white p-4 rounded-xl shadow-sm flex items-center space-x-3 border border-gray-100\">\n                            <div className=\"w-10 h-10 flex items-center justify-center bg-blue-100 rounded-full text-blue-600 flex-shrink-0\"><GroupIcon className=\"text-xl\"/></div>\n                            <div><p className=\"text-xs text-gray-500\">Total</p><p className=\"text-xl font-bold\">{stats.total}</p></div>\n                        </div>\n                        <div className=\"bg-white p-4 rounded-xl shadow-sm flex items-center space-x-3 border border-gray-100\">\n                            <div className=\"w-10 h-10 flex items-center justify-center bg-green-100 rounded-full text-green-600 flex-shrink-0\"><CheckCircleIcon className=\"text-xl\"/></div>\n                            <div><p className=\"text-xs text-gray-500\">Ativos</p><p className=\"text-xl font-bold\">{stats.active}</p></div>\n                        </div>\n                        <div className=\"bg-white p-4 rounded-xl shadow-sm flex items-center space-x-3 border border-gray-100\">\n                            <div className=\"w-10 h-10 flex items-center justify-center bg-red-100 rounded-full text-red-600 flex-shrink-0\"><LockIcon className=\"text-xl\"/></div>\n                            <div><p className=\"text-xs text-gray-500\">Bloqueados</p><p className=\"text-xl font-bold\">{stats.blocked}</p></div>\n                        </div>\n                        <div className=\"bg-white p-4 rounded-xl shadow-sm flex items-center space-x-3 border border-gray-100\">\n                            <div className=\"w-10 h-10 flex items-center justify-center bg-orange-100 rounded-full text-orange-600 flex-shrink-0\"><CalendarClockIcon className=\"text-xl\"/></div>\n                            <div><p className=\"text-xs text-gray-500\">Vencidos</p><p className=\"text-xl font-bold\">{stats.expired}</p></div>\n                        </div>\n                    </div>\n\n                    {/* Filtros e Busca e Bot√£o Novo Usu√°rio */}\n                    <div className=\"bg-white p-4 rounded-2xl shadow-sm flex flex-col md:flex-row justify-between items-center gap-4 border border-gray-200\">\n                        <div className=\"relative w-full md:w-1/2\">\n                            <SearchIcon className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl\" />\n                            <input \n                                type=\"text\" \n                                placeholder=\"Buscar por Nome, Email ou ID...\" \n                                value={searchTerm}\n                                onChange={e => setSearchTerm(e.target.value)}\n                                className=\"w-full pl-12 pr-4 py-3 bg-gray-50 text-gray-800 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all shadow-inner text-sm\"\n                            />\n                        </div>\n                        {canCreateUsers && (\n                            <button \n                                onClick={() => setIsCreateUserModalOpen(true)}\n                                className=\"w-full md:w-auto bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition-colors flex items-center justify-center gap-2 shadow-md active:scale-95 text-sm\"\n                            >\n                                <PlusIcon className=\"text-xl\" />\n                                Novo Usu√°rio\n                            </button>\n                        )}\n                    </div>\n\n                    {/* Tabela de Usu√°rios */}\n                    <div className=\"bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200\">\n                        <div className=\"overflow-x-auto\">\n                            <table className=\"min-w-full divide-y divide-gray-200\">\n                                <thead className=\"bg-gray-50\">\n                                    <tr>\n                                        <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">Usu√°rio</th>\n                                        <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">Plano Atual</th>\n                                        <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">Criado em</th>\n                                        <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider text-right\">A√ß√µes</th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"bg-white divide-y divide-gray-200\">\n                                    {isLoading ? (\n                                        <tr>\n                                            <td colSpan={4} className=\"px-6 py-12 text-center text-gray-500\">\n                                                <div className=\"flex justify-center\"><span className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></span></div>\n                                            </td>\n                                        </tr>\n                                    ) : filteredUsers.length === 0 ? (\n                                        <tr><td colSpan={4} className=\"px-6 py-12 text-center text-gray-500 font-medium\">Nenhum usu√°rio encontrado.</td></tr>\n                                    ) : (\n                                        filteredUsers.map((user) => (\n                                            <tr key={user.uid} className=\"hover:bg-gray-50 transition-colors\">\n                                                <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                    <div className=\"flex items-center\">\n                                                        <div className=\"flex-shrink-0 h-10 w-10 relative\">\n                                                            <img className=\"h-10 w-10 rounded-full object-cover border border-gray-200\" src={user.profileImage || 'https://gravatar.com/avatar/?d=mp'} alt=\"\" />\n                                                            <span className={`absolute bottom-0 right-0 block h-2.5 w-2.5 rounded-full ring-2 ring-white ${user.status === 'active' ? 'bg-green-400' : 'bg-red-400'}`}></span>\n                                                        </div>\n                                                        <div className=\"ml-4\">\n                                                            <div className=\"flex items-center gap-2\">\n                                                                <div className=\"text-sm font-bold text-gray-900\">{user.name}</div>\n                                                                {user.internalNotes && <span className=\"material-symbols-outlined text-[10px] text-yellow-600\" title=\"Possui observa√ß√µes internas\">description</span>}\n                                                            </div>\n                                                            <div className=\"text-xs text-gray-500\">{user.email}</div>\n                                                            <button \n                                                                onClick={() => copyToClipboard(user.uid)}\n                                                                className=\"text-[10px] text-gray-400 font-mono hover:text-blue-500 cursor-pointer flex items-center gap-1 mt-0.5\"\n                                                                title=\"Clique para copiar UID\"\n                                                            >\n                                                                ID: {user.uid.substring(0, 8)}... <span className=\"material-symbols-outlined text-[10px]\">content_copy</span>\n                                                            </button>\n                                                            <div className=\"mt-1\">{getRoleBadge(user.role || 'user')}</div>\n                                                        </div>\n                                                    </div>\n                                                </td>\n                                                <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                    {user.subscriptionExpiresAt ? (\n                                                        (() => {\n                                                            const [y, m, d] = user.subscriptionExpiresAt.split('-').map(Number);\n                                                            const expiry = new Date(y, m - 1, d);\n                                                            const now = new Date();\n                                                            now.setHours(0,0,0,0);\n                                                            const isExpired = expiry < now;\n                                                            \n                                                            return (\n                                                                <div className=\"flex flex-col\">\n                                                                    <div className={`text-sm font-bold ${isExpired ? 'text-red-600' : 'text-blue-600'}`}>\n                                                                        {isExpired ? 'Expirado' : 'Premium'}\n                                                                    </div>\n                                                                    <div className=\"text-xs text-gray-500\">\n                                                                        Vence: {formatDate(user.subscriptionExpiresAt)}\n                                                                    </div>\n                                                                </div>\n                                                            );\n                                                        })()\n                                                    ) : (\n                                                        <div className=\"flex flex-col\">\n                                                            <span className=\"text-sm font-bold text-gray-600\">Free / Vital√≠cio</span>\n                                                            <span className=\"text-xs text-gray-400\">Sem validade</span>\n                                                        </div>\n                                                    )}\n                                                </td>\n                                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\">\n                                                    {formatDate(user.createdAt)}\n                                                </td>\n                                                <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                                                    <div className=\"flex justify-end items-center space-x-2\">\n                                                        {canBlockUsers && (\n                                                            <button \n                                                                onClick={() => handleToggleStatus(user)}\n                                                                className={`p-2 rounded-lg transition-colors border ${user.status === 'active' ? 'text-gray-400 hover:text-red-600 hover:border-red-200 bg-white border-gray-200' : 'text-red-600 bg-red-50 border-red-200'}`}\n                                                                title={user.status === 'active' ? \"Suspender Conta\" : \"Reativar Conta\"}\n                                                                disabled={user.uid === currentUser.uid}\n                                                            >\n                                                                {user.status === 'active' ? <LockOpenIcon className=\"text-lg\"/> : <LockIcon className=\"text-lg\"/>}\n                                                            </button>\n                                                        )}\n                                                        {canEditUsers ? (\n                                                            <button \n                                                                onClick={() => handleOpenEdit(user)}\n                                                                className=\"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors border border-blue-100\"\n                                                                title=\"Editar Usu√°rio / Assinatura / Resetar Senha\"\n                                                            >\n                                                                <EditIcon className=\"text-lg\" />\n                                                            </button>\n                                                        ) : (\n                                                            // Modo visualiza√ß√£o para Support Admin\n                                                            <button className=\"p-2 rounded-lg bg-gray-50 text-gray-400 cursor-not-allowed\" title=\"Apenas visualiza√ß√£o\">\n                                                                <span className=\"material-symbols-outlined text-lg\">visibility</span>\n                                                            </button>\n                                                        )}\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        ))\n                                    )}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </>\n            )}\n\n            {/* CONTE√öDO DA ABA CONFIGURA√á√ïES (Pre√ßos - Apenas Super Admin) */}\n            {activeTab === 'settings' && canManagePricing && (\n                <div className=\"bg-white p-8 rounded-2xl shadow-sm border border-gray-200 max-w-2xl mx-auto animate-fade-in\">\n                    <h2 className=\"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-3\">\n                        <div className=\"bg-blue-100 p-2 rounded-lg text-blue-600\"><AttachMoneyIcon /></div>\n                        Configura√ß√£o de Pre√ßos\n                    </h2>\n                    <p className=\"text-gray-600 mb-8 leading-relaxed border-b border-gray-100 pb-4\">\n                        Atualize os valores dos planos de assinatura. Estas altera√ß√µes refletem imediatamente na Landing Page e na tela de assinatura do app.\n                    </p>\n                    \n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-8\">\n                        <div className=\"space-y-2\">\n                            <label className=\"block text-sm font-bold text-gray-700 uppercase tracking-wide\">Plano Mensal (R$)</label>\n                            <div className=\"relative\">\n                                <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold\">R$</span>\n                                <input \n                                    type=\"number\" \n                                    step=\"0.01\"\n                                    value={editMonthlyPrice}\n                                    onChange={e => setEditMonthlyPrice(e.target.value)}\n                                    className=\"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all font-mono text-xl shadow-sm\"\n                                    placeholder=\"Ex: 24.90\"\n                                />\n                            </div>\n                        </div>\n                        <div className=\"space-y-2\">\n                            <label className=\"block text-sm font-bold text-gray-700 uppercase tracking-wide\">Plano Anual (R$)</label>\n                            <div className=\"relative\">\n                                <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold\">R$</span>\n                                <input \n                                    type=\"number\" \n                                    step=\"0.01\"\n                                    value={editAnnualPrice}\n                                    onChange={e => setEditAnnualPrice(e.target.value)}\n                                    className=\"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all font-mono text-xl shadow-sm\"\n                                    placeholder=\"Ex: 149.88\"\n                                />\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div className=\"mt-10 flex justify-end\">\n                         <button \n                            onClick={handleSavePricing}\n                            disabled={isSavingPricing || loadingPricing}\n                            className=\"bg-blue-600 text-white font-bold py-4 px-8 rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-200 flex items-center gap-2 disabled:bg-blue-300 transform active:scale-95\"\n                        >\n                            {isSavingPricing ? (\n                                <span className=\"flex items-center\"><span className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></span>Salvando...</span>\n                            ) : 'Salvar Novos Pre√ßos'}\n                        </button>\n                    </div>\n                </div>\n            )}\n\n            {/* Modal de Edi√ß√£o de Usu√°rio */}\n            {editingUser && canEditUsers && (\n                <div className=\"fixed inset-0 bg-gray-900/40 flex justify-center items-center z-50 p-4 backdrop-blur-sm\">\n                    <div className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto animate-fade-in border border-gray-100\">\n                        <div className=\"flex justify-between items-center mb-6 border-b border-gray-100 pb-4\">\n                            <h2 className=\"text-xl font-bold text-gray-800\">Gerenciar Usu√°rio</h2>\n                            <button onClick={() => setEditingUser(null)} className=\"text-gray-400 hover:text-gray-600 bg-gray-50 p-1.5 rounded-full hover:bg-gray-100 transition-colors\"><XMarkIcon className=\"text-xl\" /></button>\n                        </div>\n                        \n                        <div className=\"space-y-6\">\n                            \n                            {/* Nome e Email */}\n                            <div className=\"space-y-3\">\n                                <div>\n                                    <label className=\"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1.5\">Nome</label>\n                                    <input type=\"text\" value={newName} onChange={e => setNewName(e.target.value)} className={inputClasses} />\n                                </div>\n                                <div className=\"bg-blue-50 p-4 rounded-xl border border-blue-100\">\n                                    <label className=\"block text-xs font-bold text-blue-800 uppercase tracking-wide mb-1.5 flex items-center gap-2\">\n                                        <EmailIcon /> Email de Login\n                                    </label>\n                                    <input \n                                        type=\"email\" \n                                        value={newEmail} \n                                        onChange={e => setNewEmail(e.target.value)} \n                                        className=\"w-full p-3 border border-blue-200 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 outline-none text-sm\" \n                                    />\n                                </div>\n                            </div>\n\n                            {/* Informa√ß√£o de Pagamento Recente (Read-Only) */}\n                            {editingUser.lastPayment && (\n                                <div className=\"bg-green-50 p-3 rounded-xl border border-green-100 text-xs\">\n                                    <h4 className=\"font-bold text-green-800 mb-1 flex items-center gap-1\"><span className=\"material-symbols-outlined text-sm\">payments</span> √öltimo Pagamento</h4>\n                                    <div className=\"grid grid-cols-2 gap-2 text-green-700\">\n                                        <p>Data: <strong>{new Date(editingUser.lastPayment.date).toLocaleDateString('pt-BR')}</strong></p>\n                                        <p>Valor: <strong>{formatCurrency(editingUser.lastPayment.amount)}</strong></p>\n                                        <p className=\"col-span-2\">Produto: <strong>{editingUser.lastPayment.product || 'Desconhecido'}</strong></p>\n                                    </div>\n                                </div>\n                            )}\n\n                            {/* Se√ß√£o de Controle de Assinatura */}\n                            <div className=\"border-t border-gray-100 pt-4\">\n                                <label className=\"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2 flex items-center gap-2\">\n                                    <span className=\"material-symbols-outlined text-base\">calendar_month</span> Controle de Assinatura\n                                </label>\n                                <div className=\"flex flex-col gap-3\">\n                                    <input \n                                        type=\"date\" \n                                        value={subscriptionDate} \n                                        onChange={e => setSubscriptionDate(e.target.value)} \n                                        className={inputClasses} \n                                    />\n                                    \n                                    <div className=\"grid grid-cols-3 gap-2\">\n                                        <button \n                                            onClick={() => handleExtendSubscription(1)}\n                                            className=\"px-2 py-2 bg-blue-50 text-blue-600 text-xs font-bold rounded-lg hover:bg-blue-100 border border-blue-100 transition-colors\"\n                                            title=\"Liberar 30 dias\"\n                                        >\n                                            +1 M√™s\n                                        </button>\n                                        <button \n                                            onClick={() => handleExtendSubscription(12)}\n                                            className=\"px-2 py-2 bg-blue-50 text-blue-600 text-xs font-bold rounded-lg hover:bg-blue-100 border border-blue-100 transition-colors\"\n                                            title=\"Liberar 1 Ano\"\n                                        >\n                                            +1 Ano\n                                        </button>\n                                        <button \n                                            onClick={() => setSubscriptionDate('')}\n                                            className=\"px-2 py-2 bg-purple-50 text-purple-600 text-xs font-bold rounded-lg hover:bg-purple-100 border border-purple-100 transition-colors\"\n                                            title=\"Tornar Vital√≠cio\"\n                                        >\n                                            Vital√≠cio\n                                        </button>\n                                    </div>\n                                    <button \n                                        onClick={handleRevokeSubscription}\n                                        className=\"w-full py-2 bg-red-50 text-red-600 text-xs font-bold rounded-lg hover:bg-red-100 border border-red-100 transition-colors flex items-center justify-center gap-1\"\n                                    >\n                                        <span className=\"material-symbols-outlined text-sm\">cancel</span> Cancelar Assinatura (Expirar Hoje)\n                                    </button>\n                                </div>\n                            </div>\n\n                            {/* Observa√ß√µes Internas */}\n                            <div className=\"bg-yellow-50 p-4 rounded-xl border border-yellow-100\">\n                                <label className=\"block text-xs font-bold text-yellow-800 uppercase tracking-wide mb-1.5 flex items-center gap-2\">\n                                    <DescriptionIcon className=\"text-sm\"/> Observa√ß√µes Internas (Admin)\n                                </label>\n                                <textarea\n                                    value={internalNotes}\n                                    onChange={e => setInternalNotes(e.target.value)}\n                                    className=\"w-full p-3 border border-yellow-200 rounded-lg bg-white focus:ring-2 focus:ring-yellow-400 outline-none text-xs resize-none h-20 placeholder-yellow-800/30\"\n                                    placeholder=\"Ex: Usu√°rio liberado 30 dias por erro no gateway. N√£o informado ao cliente.\"\n                                />\n                            </div>\n                            \n                            {/* N√≠vel de Acesso */}\n                            {canManageAdmins && (\n                                <div className=\"border-t border-gray-100 pt-4\">\n                                    <label className=\"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1.5 flex items-center gap-2\">\n                                        <AdminPanelSettingsIcon className=\"text-lg\" /> Fun√ß√£o (Role)\n                                    </label>\n                                    <select \n                                        value={newRole} \n                                        onChange={(e) => setNewRole(e.target.value as UserRole)}\n                                        className=\"w-full p-3 border border-gray-200 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 outline-none text-sm appearance-none\"\n                                        disabled={editingUser.uid === currentUser.uid}\n                                    >\n                                        <option value=\"user\">Usu√°rio Comprador</option>\n                                        <option value=\"support_admin\">Admin Suporte</option>\n                                        <option value=\"operational_admin\">Admin Operacional</option>\n                                        <option value=\"super_admin\">Super Admin</option>\n                                    </select>\n                                </div>\n                            )}\n\n                            <div className=\"pt-4 border-t border-gray-100 flex flex-col gap-3\">\n                                <button onClick={handlePasswordReset} className=\"flex items-center justify-center gap-2 w-full py-3 text-gray-600 border border-gray-200 rounded-xl hover:bg-gray-50 text-sm font-bold transition-colors\">\n                                    <KeyIcon /> Enviar Email de Reset de Senha\n                                </button>\n                                <button onClick={handleSaveUser} className=\"w-full py-3.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 font-bold transition-all shadow-md active:scale-95\">\n                                    Salvar Altera√ß√µes\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n            \n            {/* Modal de CRIA√á√ÉO de Usu√°rio */}\n            {isCreateUserModalOpen && canCreateUsers && (\n                <div className=\"fixed inset-0 bg-gray-900/40 flex justify-center items-center z-50 p-4 backdrop-blur-sm\">\n                    <div className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto animate-fade-in\">\n                        <div className=\"flex justify-between items-center mb-6 border-b border-gray-100 pb-4\">\n                            <h2 className=\"text-xl font-bold text-gray-800\">Criar Novo Usu√°rio</h2>\n                            <button onClick={() => setIsCreateUserModalOpen(false)} className=\"text-gray-400 hover:text-gray-600 bg-gray-50 p-1.5 rounded-full hover:bg-gray-100 transition-colors\"><XMarkIcon className=\"text-xl\" /></button>\n                        </div>\n                        \n                        <form onSubmit={handleCreateUser} className=\"space-y-5\">\n                            <div>\n                                <label className=\"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1.5\">Nome Completo</label>\n                                <input \n                                    type=\"text\" \n                                    value={createName} \n                                    onChange={e => setCreateName(e.target.value)} \n                                    className={inputClasses} \n                                    placeholder=\"Ex: Jo√£o Silva\"\n                                    required\n                                />\n                            </div>\n                            \n                            <div>\n                                <label className=\"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1.5\">Email de Login</label>\n                                <input \n                                    type=\"email\" \n                                    value={createEmail} \n                                    onChange={e => setCreateEmail(e.target.value)} \n                                    className={inputClasses} \n                                    placeholder=\"exemplo@email.com\"\n                                    required\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1.5\">Senha Tempor√°ria</label>\n                                <input \n                                    type=\"password\" \n                                    value={createPassword} \n                                    onChange={e => setCreatePassword(e.target.value)} \n                                    className={inputClasses} \n                                    placeholder=\"M√≠nimo 6 caracteres\"\n                                    required\n                                    minLength={6}\n                                />\n                            </div>\n\n                            <div className=\"bg-yellow-50 p-4 rounded-xl border border-yellow-200\">\n                                <label className=\"block text-xs font-bold text-yellow-800 uppercase tracking-wide mb-1.5 flex items-center gap-2\">\n                                    <AdminPanelSettingsIcon className=\"text-lg\" /> Fun√ß√£o (Role)\n                                </label>\n                                <select \n                                    value={createRole} \n                                    onChange={(e) => setCreateRole(e.target.value as UserRole)}\n                                    className=\"w-full p-3 border border-yellow-300 rounded-lg bg-white focus:ring-2 focus:ring-yellow-500 outline-none appearance-none\"\n                                >\n                                    <option value=\"user\">Usu√°rio Comprador</option>\n                                    {canManageAdmins && (\n                                        <>\n                                            <option value=\"support_admin\">Admin Suporte</option>\n                                            <option value=\"operational_admin\">Admin Operacional</option>\n                                            <option value=\"super_admin\">Super Admin</option>\n                                        </>\n                                    )}\n                                </select>\n                            </div>\n\n                            <div className=\"pt-4 border-t border-gray-100\">\n                                <button \n                                    type=\"submit\" \n                                    disabled={isCreatingUser}\n                                    className=\"w-full py-3.5 bg-green-600 text-white rounded-xl hover:bg-green-700 font-bold transition-all shadow-md disabled:bg-green-300 flex items-center justify-center active:scale-95\"\n                                >\n                                    {isCreatingUser ? (\n                                        <span className=\"flex items-center\"><span className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></span>Criando...</span>\n                                    ) : 'Criar Usu√°rio'}\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n"],"names":["MACROS","TICKET_TAGS","AdminSupport","currentUser","allUsers","tickets","setTickets","useState","selectedTicketId","setSelectedTicketId","messages","setMessages","filterStatus","setFilterStatus","replyText","setReplyText","searchTerm","setSearchTerm","internalNote","setInternalNote","loadingMessages","setLoadingMessages","messagesEndRef","useRef","showToast","useToast","admins","useMemo","u","useEffect","q","query","collection","db","orderBy","unsubscribe","onSnapshot","snapshot","ticketList","doc","messagesRef","msgList","_a","currentTicket","t","handleSendMessage","e","addDoc","serverTimestamp","ticketRef","updateDoc","error","updateTicketField","field","value","handleSaveNote","filteredTickets","matchesStatus","matchesSearch","selectedTicket","getStatusBadge","status","jsx","jsxs","SearchIcon","ticket","_b","_c","msg","isSupport","macro","idx","SendIcon","SupportAgentIcon","admin","tag","isSelected","currentTags","newTags","DescriptionIcon","formatDate","isoDate","datePart","year","month","day","formatCurrency","AdminPanel","users","setUsers","isLoading","setIsLoading","pricing","loadingPricing","useSystemSettings","logs","setLogs","loadingLogs","setLoadingLogs","editMonthlyPrice","setEditMonthlyPrice","editAnnualPrice","setEditAnnualPrice","isSavingPricing","setIsSavingPricing","editingUser","setEditingUser","newEmail","setNewEmail","newName","setNewName","subscriptionDate","setSubscriptionDate","newRole","setNewRole","internalNotes","setInternalNotes","isCreateUserModalOpen","setIsCreateUserModalOpen","createName","setCreateName","createEmail","setCreateEmail","createPassword","setCreatePassword","createRole","setCreateRole","isCreatingUser","setIsCreatingUser","activeTab","setActiveTab","userRole","isSuperAdmin","isOperationalAdmin","canManagePricing","canManageAdmins","canEditUsers","canCreateUsers","canBlockUsers","canViewLogs","logAction","action","details","targetUser","fetchUsers","querySnapshot","getDocs","userList","data","logsData","filteredUsers","lowerTerm","user","stats","now","y","m","d","handleToggleStatus","newStatus","userRef","prev","handleOpenEdit","handleExtendSubscription","monthsToAdd","baseDate","currentExpiry","newDateStr","handleRevokeSubscription","yesterday","handleSaveUser","updates","handleCreateUser","result","adminCreateUser","handleSavePricing","mPrice","aPrice","pricingRef","setDoc","handlePasswordReset","success","message","sendPasswordResetEmail","copyToClipboard","text","inputClasses","getRoleBadge","role","ShieldCheckIcon","AdminPanelSettingsIcon","GroupIcon","ChatBubbleIcon","HistoryIcon","log","Fragment","CheckCircleIcon","LockIcon","CalendarClockIcon","PlusIcon","expiry","isExpired","LockOpenIcon","EditIcon","AttachMoneyIcon","XMarkIcon","EmailIcon","KeyIcon"],"mappings":"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"}